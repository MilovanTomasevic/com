<!DOCTYPE html><html><head><title>[High-performance computing (HPC)](/courses/#table-of-contents)</title><meta charset="utf-8"><style>@import url(https://fonts.googleapis.com/css?family=Playfair+Display);@import url(https://fonts.googleapis.com/css?family=Droid+Serif);@import url(https://fonts.googleapis.com/css?family=Open+Sans);@import url(https://fonts.googleapis.com/css?family=Work+Sans);@import url(https://fonts.googleapis.com/css?family=Muli);@import url(https://fonts.googleapis.com/css?family=Yanone+Kaffeesatz);@import url(https://fonts.googleapis.com/css?family=Ubuntu+Mono:400,700,400italic);@import url(https://fonts.googleapis.com/css?family=Roboto+Condensed);@import url(https://fonts.googleapis.com/css?family=PT+Sans);@import url(https://fonts.googleapis.com/css?family=Roboto);body{font-family:'Open Sans';color:#333;display:flex;height:100%}h1{font-family:"Playfair Display"}h2,h3,h4{font-family:'Yanone Kaffeesatz';font-weight:400}a{font-family:"PT Sans"}.remark-slide-content h1{font-size:3em}.remark-slide-content h2{font-size:2em}.remark-slide-content h3{font-size:1.6em}.remark-code,.remark-inline-code{font-family:'Ubuntu Mono'}.remark-code-line-highlighted{background-color:#373832}h1{text-shadow:-1px 0 #000,0 1px #000,1px 0 #000,0 -1px #000;-webkit-animation:pulse 7s forwards;-moz-animation:pulse 7s forwards;-o-animation:pulse 7s forwards;-ms-animation:pulse 7s forwards;animation:pulse 7s forwards}@-webkit-keyframes pulse{0%{color:#eee}100%{color:#666}}@-moz-keyframes pulse{0%{color:#eee}100%{color:#666}}@-ms-keyframes pulse{0%{color:#eee}100%{color:#666}}@-o-keyframes pulse{0%{color:#eee}100%{color:#666}}@keyframes pulse{0%{color:#eee}100%{color:#666}}h2{-webkit-animation:color-change 1.5s infinite;-moz-animation:color-change 1.5s infinite;-o-animation:color-change 1.5s infinite;-ms-animation:color-change 1.5s infinite;animation:color-change 1.5s infinite}@-webkit-keyframes color-change{0%{color:coral}50%{color:#5db9e0}100%{color:coral}}@-moz-keyframes color-change{0%{color:coral}50%{color:#5db9e0}100%{color:coral}}@-ms-keyframes color-change{0%{color:coral}50%{color:#5db9e0}100%{color:coral}}@-o-keyframes color-change{0%{color:coral}50%{color:#5db9e0}100%{color:coral}}@keyframes color-change{0%{color:coral}50%{color:#5db9e0}100%{color:coral}}h3,h4{color:#c7e2ee;text-shadow:-.7px 0 #4d4d4d,0 .7px #4d4d4d,.7px 0 #4d4d4d,0 -.7px #4d4d4d}.theend{background-color:#000;color:#000;text-shadow:0 0 20px #333}.inverse{background-color:#7e7e7e;color:#c5dae4;text-shadow:0 0 20px #333}.inverse h1{text-shadow:-1px 0 #000,0 1px #000,1px 0 #000,0 -1px #000;-webkit-animation:pulsei 7s forwards;-moz-animation:pulsei 7s forwards;-o-animation:pulsei 7s forwards;-ms-animation:pulsei 7s forwards;animation:pulsei 7s forwards}@-webkit-keyframes pulsei{0%{color:#eee}100%{color:#e9a46b}}@-moz-keyframes pulsei{0%{color:#eee}100%{color:#e9a46b}}@-ms-keyframes pulsei{0%{color:#eee}100%{color:#e9a46b}}@-o-keyframes pulsei{0%{color:#eee}100%{color:#e9a46b}}@keyframes pulsei{0%{color:#eee}100%{color:#e9a46b}}.inverse h2{text-shadow:-1px 0 #000,0 1px #000,1px 0 #000,0 -1px #000;-webkit-animation:color-changei 1s infinite;-moz-animation:color-changei 1s infinite;-o-animation:color-changei 1s infinite;-ms-animation:color-changei 1s infinite;animation:color-changei 1s infinite}@-webkit-keyframes color-changei{0%{color:#fff}50%{color:#7bbcd8}100%{color:#fff}}@-moz-keyframes color-changei{0%{color:#fff}50%{color:#7bbcd8}100%{color:#fff}}@-ms-keyframes color-changei{0%{color:#fff}50%{color:#7bbcd8}100%{color:#fff}}@-o-keyframes color-changei{0%{color:#fff}50%{color:#7bbcd8}100%{color:#fff}}@keyframes color-changei{0%{color:#fff}50%{color:#7bbcd8}100%{color:#fff}}a{color:#bb7917;text-decoration:none;transition:all .3s linear;-webkit-transition:all .3s linear;-moz-transition:all .3s linear;background:linear-gradient(to bottom,var(--mainColor) 0,var(--mainColor) 100%);background-position:0 100%;background-repeat:repeat-x;background-size:1.5px 1.5px}a:hover{background-image:url("data:image/svg+xml;charset=utf8,%3Csvg id='squiggle-link' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' xmlns:ev='http://www.w3.org/2001/xml-events' viewBox='0 0 20 4'%3E%3Cstyle type='text/css'%3E.squiggle{animation:shift .3s linear infinite;}@keyframes shift {from {transform:translateX(0);}to {transform:translateX(-20px);}}%3C/style%3E%3Cpath fill='none' stroke='%23ff9800' stroke-width='2' class='squiggle' d='M0,3.5 c 5,0,5,-3,10,-3 s 5,3,10,3 c 5,0,5,-3,10,-3 s 5,3,10,3'/%3E%3C/svg%3E");background-position:0 100%;background-size:auto 4px;background-repeat:repeat-x;text-decoration:none;color:#2d77d8;padding-left:10px}.inverse code{background-color:#7e7e7e}.hide-text{text-indent:-9999px}.remark-slide-container{transition:opacity 1s linear,right 1s ease-in-out;opacity:0;right:1000px}.remark-visible{transition:opacity 1s linear,right 1s ease-in-out;opacity:1;right:0}.remark-fading{z-index:9}.remark-visible~.remark-slide-container{right:-1000px}.remark-code,.remark-inline-code{font-family:'Ubuntu Mono'}.remark-code-line-highlighted{background-color:#373832}.remark-inline-code{font-weight:700}.remark-code-line-highlighted{font-weight:700;background-color:transparent;text-shadow:0 5px 15px rgba(255,106,20,.5),5px 0 15px rgba(255,106,20,.5),-5px 0 15px rgba(255,106,20,.5),0 -5px 15px rgba(255,106,20,.5)}.shade{padding:0}.shade{background-color:rgba(0,0,0,.7);color:#fff;width:100%;padding:1em 0}.shadelight{background-color:rgba(0,0,0,.5);color:#fff;width:100%;padding:0}.fgtransparent h1{color:rgba(255,255,255,.8)!important;text-shadow:none}.boxtitle1{padding:1em;text-align:left;border-left:rgba(255,255,255,.6) solid .5em;border-right:#fff solid 0}.nosplit>div:first-of-type{width:100%;height:100%;position:absolute;top:0;left:0}.split-20>div:first-of-type{width:20%;height:100%;position:absolute;top:0;left:0}.split-20>div:nth-of-type(2){width:80%;height:100%;position:absolute;top:0;right:0}.split-30>div:first-of-type{width:30%;height:100%;position:absolute;top:0;left:0}.split-30>div:nth-of-type(2){width:70%;height:100%;position:absolute;top:0;right:0}.split-50>div:first-of-type{width:50%;height:100%;position:absolute;top:0;left:0}.split-50>div:nth-of-type(2){width:50%;height:100%;position:absolute;top:0;right:0}.split-60>div:first-of-type{width:60%;height:100%;position:absolute;top:0;left:0}.split-60>div:nth-of-type(2){width:40%;height:100%;position:absolute;top:0;right:0}.split-70>div:first-of-type{width:70%;height:100%;position:absolute;top:0;left:0}.split-70>div:nth-of-type(2){width:30%;height:100%;position:absolute;top:0;right:0}.column_t1{background-color:#2aa9df;color:#fff}.column_t1 a{color:#b3e5fc}.column_t1 pre code{-webkit-box-shadow:0 0 55px 0 rgba(0,0,0,.75);-moz-box-shadow:0 0 55px 0 rgba(0,0,0,.75);box-shadow:0 0 55px 0 rgba(0,0,0,.75)}.uline{text-decoration:underline}.vmiddle{position:relative;top:50%;transform:translateY(-50%);padding:1em}.remark-slide-content h1{font-size:50px}.remark-slide-content h2{font-size:40px}.remark-slide-content h3{font-size:30px}.remark-slide-content img{width:100%}.remark-slide-content{padding-left:50px;padding-right:50px}.remark-slide-content{background-size:contain}blockquote{font-family:'Playfair Display';font-style:italic;font-size:110%;margin-top:10px;margin-bottom:10px;margin-left:50px;padding:1em 1em;background-color:#f5f5f5;border-left:5px solid #dbdbdb}.hljs-ln td.hljs-ln-numbers{-webkit-touch-callout:none;-webkit-user-select:none;-khtml-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;text-align:center;color:#ccc;border-right:1px solid #ccc;vertical-align:top;padding-right:5px}.hljs-ln td.hljs-ln-code{padding-left:10px}.lcol{width:49%;float:left}.lcol-narrow{width:39%;float:left}.lcol-narrow2{width:24%;float:left}.lcol-wide{width:59%;float:left}.lcol-wide2{width:74%;float:left}.rcol{width:49%;float:right}.rcol-narrow{width:39%;float:right}.rcol-narrow2{width:24%;float:right}.rcol-wide{width:59%;float:right}.rcol-wide2{width:74%;float:right}.wide{clear:both}.l-col{color:#777;width:20%;height:92%;float:left}.r-col{width:75%;float:right;padding-top:1em}code{-moz-border-radius:5px;-web-border-radius:5px;border-radius:5px;background:#e7e8e2}em{color:#c63235}.remark-slide-content{font-size:24px}ol>li,ul>li{margin-top:5px}.section{font-size:16px;float:right;clear:both}.small,.small .remark-code-line{font-size:60%}.medium,.medium .remark-code-line{font-size:80%}.condensed{line-height:.8em;font-size:90%}.size-90,.size-90 .remark-code-line{font-size:90%}.size-85,.size-85 .remark-code-line{font-size:85%}.multicode pre{margin-top:10px;margin-bottom:10px}.remark-slide img,.remark-slide pre{margin-top:25px;margin-bottom:25px}.attention{-moz-border-radius:5px;-web-border-radius:5px;border-radius:5px;background-color:#fbd2d2;text-align:center}.attention p{margin:10px}.footer{position:absolute;bottom:12px;left:20px;font-size:70%}.footer.small{font-size:50%}.footer,li>p{margin:0}.ref{color:red;vertical-align:super;font-size:70%}.created{font-size:60%;margin-bottom:5em;font-family:"Playfair Display";font-size:16px;font-style:normal;font-variant:normal;font-weight:400;line-height:22px}.created:before{content:"üë®üèª‚Äçüíª‚ûô "}.noselect{-webkit-touch-callout:none;-webkit-user-select:none;-khtml-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.overlay{box-shadow:inset 0 0 0 9999px rgba(0,0,0,.35)}.container{height:100%;width:100%;display:flex;position:fixed;align-items:center;justify-content:center}table{border-collapse:collapse;border-spacing:0;empty-cells:show;border:1px solid #cbcbcb}.center-table table{margin:0 auto}table caption{color:#000;font:italic 85%/1 arial,sans-serif;padding:1em 0;text-align:center}table td,table th{border-left:1px solid #cbcbcb;border-width:0 0 0 1px;font-size:inherit;margin:0;overflow:visible;padding:.5em 1em}table td:first-child,table th:first-child{border-left-width:0}table thead{background-color:#e0e0e0;color:#000;text-align:left;vertical-align:bottom}table td{background-color:transparent}table-odd td{background-color:#f2f2f2}table tr:nth-child(2n-1) td{background-color:#f2f2f2}table td{border-bottom:1px solid #cbcbcb}table tbody>tr:last-child>td{border-bottom-width:0}table-horizontal td,table-horizontal th{border-width:0 0 1px 0;border-bottom:1px solid #cbcbcb}table-horizontal tbody>tr:last-child>td{border-bottom-width:0}/*! bulma.io v0.4.2 | MIT License | github.com/jgthms/bulma */@-webkit-keyframes spinAround{from{-webkit-transform:rotate(0);transform:rotate(0)}to{-webkit-transform:rotate(359deg);transform:rotate(359deg)}}@keyframes spinAround{from{-webkit-transform:rotate(0);transform:rotate(0)}to{-webkit-transform:rotate(359deg);transform:rotate(359deg)}}/*! minireset.css v0.0.2 | MIT License | github.com/jgthms/minireset.css */p{margin:0;padding:0}.message{font-family:'Playfair Display';background-color:#f5f5f5;border-radius:3px;font-size:1rem}.message:not(:last-child){margin-bottom:1.5rem}.message.is-white{background-color:#fff}.message.is-white .message-header{background-color:#fff;color:#0a0a0a}.message.is-white .message-body{border-color:#fff;color:#4d4d4d}.message.is-black{background-color:#fafafa}.message.is-black .message-header{background-color:#0a0a0a;color:#fff}.message.is-black .message-body{border-color:#0a0a0a;color:#090909}.message.is-light{background-color:#fafafa}.message.is-light .message-header{background-color:#f5f5f5;color:#363636}.message.is-light .message-body{border-color:#f5f5f5;color:#505050}.message.is-dark{background-color:#fafafa}.message.is-dark .message-header{background-color:#363636;color:#f5f5f5}.message.is-dark .message-body{border-color:#363636;color:#2a2a2a}.message.is-primary{background-color:#f5fffd}.message.is-primary .message-header{background-color:#00d1b2;color:#fff}.message.is-primary .message-body{border-color:#00d1b2;color:#021310}.message.is-info{background-color:#f6f9fe}.message.is-info .message-header{background-color:#3273dc;color:#fff}.message.is-info .message-body{border-color:#3273dc;color:#22509a}.message.is-success{background-color:#f6fef9}.message.is-success .message-header{background-color:#23d160;color:#fff}.message.is-success .message-body{border-color:#23d160;color:#0e301a}.message.is-warning{background-color:#fffdf5}.message.is-warning .message-header{background-color:#ffdd57;color:rgba(0,0,0,.7)}.message.is-warning .message-body{border-color:#ffdd57;color:#3b3108}.message.is-danger{background-color:#fff5f7}.message.is-danger .message-header{background-color:#ff3860;color:#fff}.message.is-danger .message-body{border-color:#ff3860;color:#cd0930}.message-header{-webkit-box-align:center;-ms-flex-align:center;align-items:center;background-color:#4a4a4a;border-radius:3px 3px 0 0;color:#fff;display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-pack:justify;-ms-flex-pack:justify;justify-content:space-between;line-height:1.25;padding:.5em .75em;position:relative}.message-header a,.message-header strong{color:inherit}.message-header a{text-decoration:underline}.message-header .delete{-webkit-box-flex:0;-ms-flex-positive:0;flex-grow:0;-ms-flex-negative:0;flex-shrink:0;margin-left:.75em}.message-header+.message-body{border-top-left-radius:0;border-top-right-radius:0;border-top:none}.message-body{border:1px solid #dbdbdb;border-radius:3px;color:#4a4a4a;padding:.1em .5em}.message-body a,.message-body strong{color:inherit}.message-body a{text-decoration:underline}.message-body code,.message-body pre{background:#fff}.message-body pre code{background:0 0}.column{display:block;-ms-flex-preferred-size:0;flex-basis:0;-webkit-box-flex:1;-ms-flex-positive:1;flex-grow:1;-ms-flex-negative:1;flex-shrink:1;padding:.75rem}.columns.is-mobile>.column.is-narrow{-webkit-box-flex:0;-ms-flex:none;flex:none}.columns.is-mobile>.column.is-full{-webkit-box-flex:0;-ms-flex:none;flex:none;width:100%}.columns.is-mobile>.column.is-three-quarters{-webkit-box-flex:0;-ms-flex:none;flex:none;width:75%}.columns.is-mobile>.column.is-two-thirds{-webkit-box-flex:0;-ms-flex:none;flex:none;width:66.6666%}.columns.is-mobile>.column.is-half{-webkit-box-flex:0;-ms-flex:none;flex:none;width:50%}.columns.is-mobile>.column.is-one-third{-webkit-box-flex:0;-ms-flex:none;flex:none;width:33.3333%}.columns.is-mobile>.column.is-one-quarter{-webkit-box-flex:0;-ms-flex:none;flex:none;width:25%}.columns.is-mobile>.column.is-offset-three-quarters{margin-left:75%}.columns.is-mobile>.column.is-offset-two-thirds{margin-left:66.6666%}.columns.is-mobile>.column.is-offset-half{margin-left:50%}.columns.is-mobile>.column.is-offset-one-third{margin-left:33.3333%}.columns.is-mobile>.column.is-offset-one-quarter{margin-left:25%}.columns.is-mobile>.column.is-1{-webkit-box-flex:0;-ms-flex:none;flex:none;width:8.33333%}.columns.is-mobile>.column.is-offset-1{margin-left:8.33333%}.columns.is-mobile>.column.is-2{-webkit-box-flex:0;-ms-flex:none;flex:none;width:16.66667%}.columns.is-mobile>.column.is-offset-2{margin-left:16.66667%}.columns.is-mobile>.column.is-3{-webkit-box-flex:0;-ms-flex:none;flex:none;width:25%}.columns.is-mobile>.column.is-offset-3{margin-left:25%}.columns.is-mobile>.column.is-4{-webkit-box-flex:0;-ms-flex:none;flex:none;width:33.33333%}.columns.is-mobile>.column.is-offset-4{margin-left:33.33333%}.columns.is-mobile>.column.is-5{-webkit-box-flex:0;-ms-flex:none;flex:none;width:41.66667%}.columns.is-mobile>.column.is-offset-5{margin-left:41.66667%}.columns.is-mobile>.column.is-6{-webkit-box-flex:0;-ms-flex:none;flex:none;width:50%}.columns.is-mobile>.column.is-offset-6{margin-left:50%}.columns.is-mobile>.column.is-7{-webkit-box-flex:0;-ms-flex:none;flex:none;width:58.33333%}.columns.is-mobile>.column.is-offset-7{margin-left:58.33333%}.columns.is-mobile>.column.is-8{-webkit-box-flex:0;-ms-flex:none;flex:none;width:66.66667%}.columns.is-mobile>.column.is-offset-8{margin-left:66.66667%}.columns.is-mobile>.column.is-9{-webkit-box-flex:0;-ms-flex:none;flex:none;width:75%}.columns.is-mobile>.column.is-offset-9{margin-left:75%}.columns.is-mobile>.column.is-10{-webkit-box-flex:0;-ms-flex:none;flex:none;width:83.33333%}.columns.is-mobile>.column.is-offset-10{margin-left:83.33333%}.columns.is-mobile>.column.is-11{-webkit-box-flex:0;-ms-flex:none;flex:none;width:91.66667%}.columns.is-mobile>.column.is-offset-11{margin-left:91.66667%}.columns.is-mobile>.column.is-12{-webkit-box-flex:0;-ms-flex:none;flex:none;width:100%}.columns.is-mobile>.column.is-offset-12{margin-left:100%}@media screen and (max-width:768px){.column.is-narrow-mobile{-webkit-box-flex:0;-ms-flex:none;flex:none}.column.is-full-mobile{-webkit-box-flex:0;-ms-flex:none;flex:none;width:100%}.column.is-three-quarters-mobile{-webkit-box-flex:0;-ms-flex:none;flex:none;width:75%}.column.is-two-thirds-mobile{-webkit-box-flex:0;-ms-flex:none;flex:none;width:66.6666%}.column.is-half-mobile{-webkit-box-flex:0;-ms-flex:none;flex:none;width:50%}.column.is-one-third-mobile{-webkit-box-flex:0;-ms-flex:none;flex:none;width:33.3333%}.column.is-one-quarter-mobile{-webkit-box-flex:0;-ms-flex:none;flex:none;width:25%}.column.is-offset-three-quarters-mobile{margin-left:75%}.column.is-offset-two-thirds-mobile{margin-left:66.6666%}.column.is-offset-half-mobile{margin-left:50%}.column.is-offset-one-third-mobile{margin-left:33.3333%}.column.is-offset-one-quarter-mobile{margin-left:25%}.column.is-1-mobile{-webkit-box-flex:0;-ms-flex:none;flex:none;width:8.33333%}.column.is-offset-1-mobile{margin-left:8.33333%}.column.is-2-mobile{-webkit-box-flex:0;-ms-flex:none;flex:none;width:16.66667%}.column.is-offset-2-mobile{margin-left:16.66667%}.column.is-3-mobile{-webkit-box-flex:0;-ms-flex:none;flex:none;width:25%}.column.is-offset-3-mobile{margin-left:25%}.column.is-4-mobile{-webkit-box-flex:0;-ms-flex:none;flex:none;width:33.33333%}.column.is-offset-4-mobile{margin-left:33.33333%}.column.is-5-mobile{-webkit-box-flex:0;-ms-flex:none;flex:none;width:41.66667%}.column.is-offset-5-mobile{margin-left:41.66667%}.column.is-6-mobile{-webkit-box-flex:0;-ms-flex:none;flex:none;width:50%}.column.is-offset-6-mobile{margin-left:50%}.column.is-7-mobile{-webkit-box-flex:0;-ms-flex:none;flex:none;width:58.33333%}.column.is-offset-7-mobile{margin-left:58.33333%}.column.is-8-mobile{-webkit-box-flex:0;-ms-flex:none;flex:none;width:66.66667%}.column.is-offset-8-mobile{margin-left:66.66667%}.column.is-9-mobile{-webkit-box-flex:0;-ms-flex:none;flex:none;width:75%}.column.is-offset-9-mobile{margin-left:75%}.column.is-10-mobile{-webkit-box-flex:0;-ms-flex:none;flex:none;width:83.33333%}.column.is-offset-10-mobile{margin-left:83.33333%}.column.is-11-mobile{-webkit-box-flex:0;-ms-flex:none;flex:none;width:91.66667%}.column.is-offset-11-mobile{margin-left:91.66667%}.column.is-12-mobile{-webkit-box-flex:0;-ms-flex:none;flex:none;width:100%}.column.is-offset-12-mobile{margin-left:100%}}@media screen and (min-width:769px),print{.column.is-narrow,.column.is-narrow-tablet{-webkit-box-flex:0;-ms-flex:none;flex:none}.column.is-full,.column.is-full-tablet{-webkit-box-flex:0;-ms-flex:none;flex:none;width:100%}.column.is-three-quarters,.column.is-three-quarters-tablet{-webkit-box-flex:0;-ms-flex:none;flex:none;width:75%}.column.is-two-thirds,.column.is-two-thirds-tablet{-webkit-box-flex:0;-ms-flex:none;flex:none;width:66.6666%}.column.is-half,.column.is-half-tablet{-webkit-box-flex:0;-ms-flex:none;flex:none;width:50%}.column.is-one-third,.column.is-one-third-tablet{-webkit-box-flex:0;-ms-flex:none;flex:none;width:33.3333%}.column.is-one-quarter,.column.is-one-quarter-tablet{-webkit-box-flex:0;-ms-flex:none;flex:none;width:25%}.column.is-offset-three-quarters,.column.is-offset-three-quarters-tablet{margin-left:75%}.column.is-offset-two-thirds,.column.is-offset-two-thirds-tablet{margin-left:66.6666%}.column.is-offset-half,.column.is-offset-half-tablet{margin-left:50%}.column.is-offset-one-third,.column.is-offset-one-third-tablet{margin-left:33.3333%}.column.is-offset-one-quarter,.column.is-offset-one-quarter-tablet{margin-left:25%}.column.is-1,.column.is-1-tablet{-webkit-box-flex:0;-ms-flex:none;flex:none;width:8.33333%}.column.is-offset-1,.column.is-offset-1-tablet{margin-left:8.33333%}.column.is-2,.column.is-2-tablet{-webkit-box-flex:0;-ms-flex:none;flex:none;width:16.66667%}.column.is-offset-2,.column.is-offset-2-tablet{margin-left:16.66667%}.column.is-3,.column.is-3-tablet{-webkit-box-flex:0;-ms-flex:none;flex:none;width:25%}.column.is-offset-3,.column.is-offset-3-tablet{margin-left:25%}.column.is-4,.column.is-4-tablet{-webkit-box-flex:0;-ms-flex:none;flex:none;width:33.33333%}.column.is-offset-4,.column.is-offset-4-tablet{margin-left:33.33333%}.column.is-5,.column.is-5-tablet{-webkit-box-flex:0;-ms-flex:none;flex:none;width:41.66667%}.column.is-offset-5,.column.is-offset-5-tablet{margin-left:41.66667%}.column.is-6,.column.is-6-tablet{-webkit-box-flex:0;-ms-flex:none;flex:none;width:50%}.column.is-offset-6,.column.is-offset-6-tablet{margin-left:50%}.column.is-7,.column.is-7-tablet{-webkit-box-flex:0;-ms-flex:none;flex:none;width:58.33333%}.column.is-offset-7,.column.is-offset-7-tablet{margin-left:58.33333%}.column.is-8,.column.is-8-tablet{-webkit-box-flex:0;-ms-flex:none;flex:none;width:66.66667%}.column.is-offset-8,.column.is-offset-8-tablet{margin-left:66.66667%}.column.is-9,.column.is-9-tablet{-webkit-box-flex:0;-ms-flex:none;flex:none;width:75%}.column.is-offset-9,.column.is-offset-9-tablet{margin-left:75%}.column.is-10,.column.is-10-tablet{-webkit-box-flex:0;-ms-flex:none;flex:none;width:83.33333%}.column.is-offset-10,.column.is-offset-10-tablet{margin-left:83.33333%}.column.is-11,.column.is-11-tablet{-webkit-box-flex:0;-ms-flex:none;flex:none;width:91.66667%}.column.is-offset-11,.column.is-offset-11-tablet{margin-left:91.66667%}.column.is-12,.column.is-12-tablet{-webkit-box-flex:0;-ms-flex:none;flex:none;width:100%}.column.is-offset-12,.column.is-offset-12-tablet{margin-left:100%}}@media screen and (max-width:999px){.column.is-narrow-touch{-webkit-box-flex:0;-ms-flex:none;flex:none}.column.is-full-touch{-webkit-box-flex:0;-ms-flex:none;flex:none;width:100%}.column.is-three-quarters-touch{-webkit-box-flex:0;-ms-flex:none;flex:none;width:75%}.column.is-two-thirds-touch{-webkit-box-flex:0;-ms-flex:none;flex:none;width:66.6666%}.column.is-half-touch{-webkit-box-flex:0;-ms-flex:none;flex:none;width:50%}.column.is-one-third-touch{-webkit-box-flex:0;-ms-flex:none;flex:none;width:33.3333%}.column.is-one-quarter-touch{-webkit-box-flex:0;-ms-flex:none;flex:none;width:25%}.column.is-offset-three-quarters-touch{margin-left:75%}.column.is-offset-two-thirds-touch{margin-left:66.6666%}.column.is-offset-half-touch{margin-left:50%}.column.is-offset-one-third-touch{margin-left:33.3333%}.column.is-offset-one-quarter-touch{margin-left:25%}.column.is-1-touch{-webkit-box-flex:0;-ms-flex:none;flex:none;width:8.33333%}.column.is-offset-1-touch{margin-left:8.33333%}.column.is-2-touch{-webkit-box-flex:0;-ms-flex:none;flex:none;width:16.66667%}.column.is-offset-2-touch{margin-left:16.66667%}.column.is-3-touch{-webkit-box-flex:0;-ms-flex:none;flex:none;width:25%}.column.is-offset-3-touch{margin-left:25%}.column.is-4-touch{-webkit-box-flex:0;-ms-flex:none;flex:none;width:33.33333%}.column.is-offset-4-touch{margin-left:33.33333%}.column.is-5-touch{-webkit-box-flex:0;-ms-flex:none;flex:none;width:41.66667%}.column.is-offset-5-touch{margin-left:41.66667%}.column.is-6-touch{-webkit-box-flex:0;-ms-flex:none;flex:none;width:50%}.column.is-offset-6-touch{margin-left:50%}.column.is-7-touch{-webkit-box-flex:0;-ms-flex:none;flex:none;width:58.33333%}.column.is-offset-7-touch{margin-left:58.33333%}.column.is-8-touch{-webkit-box-flex:0;-ms-flex:none;flex:none;width:66.66667%}.column.is-offset-8-touch{margin-left:66.66667%}.column.is-9-touch{-webkit-box-flex:0;-ms-flex:none;flex:none;width:75%}.column.is-offset-9-touch{margin-left:75%}.column.is-10-touch{-webkit-box-flex:0;-ms-flex:none;flex:none;width:83.33333%}.column.is-offset-10-touch{margin-left:83.33333%}.column.is-11-touch{-webkit-box-flex:0;-ms-flex:none;flex:none;width:91.66667%}.column.is-offset-11-touch{margin-left:91.66667%}.column.is-12-touch{-webkit-box-flex:0;-ms-flex:none;flex:none;width:100%}.column.is-offset-12-touch{margin-left:100%}}@media screen and (min-width:1000px){.column.is-narrow-desktop{-webkit-box-flex:0;-ms-flex:none;flex:none}.column.is-full-desktop{-webkit-box-flex:0;-ms-flex:none;flex:none;width:100%}.column.is-three-quarters-desktop{-webkit-box-flex:0;-ms-flex:none;flex:none;width:75%}.column.is-two-thirds-desktop{-webkit-box-flex:0;-ms-flex:none;flex:none;width:66.6666%}.column.is-half-desktop{-webkit-box-flex:0;-ms-flex:none;flex:none;width:50%}.column.is-one-third-desktop{-webkit-box-flex:0;-ms-flex:none;flex:none;width:33.3333%}.column.is-one-quarter-desktop{-webkit-box-flex:0;-ms-flex:none;flex:none;width:25%}.column.is-offset-three-quarters-desktop{margin-left:75%}.column.is-offset-two-thirds-desktop{margin-left:66.6666%}.column.is-offset-half-desktop{margin-left:50%}.column.is-offset-one-third-desktop{margin-left:33.3333%}.column.is-offset-one-quarter-desktop{margin-left:25%}.column.is-1-desktop{-webkit-box-flex:0;-ms-flex:none;flex:none;width:8.33333%}.column.is-offset-1-desktop{margin-left:8.33333%}.column.is-2-desktop{-webkit-box-flex:0;-ms-flex:none;flex:none;width:16.66667%}.column.is-offset-2-desktop{margin-left:16.66667%}.column.is-3-desktop{-webkit-box-flex:0;-ms-flex:none;flex:none;width:25%}.column.is-offset-3-desktop{margin-left:25%}.column.is-4-desktop{-webkit-box-flex:0;-ms-flex:none;flex:none;width:33.33333%}.column.is-offset-4-desktop{margin-left:33.33333%}.column.is-5-desktop{-webkit-box-flex:0;-ms-flex:none;flex:none;width:41.66667%}.column.is-offset-5-desktop{margin-left:41.66667%}.column.is-6-desktop{-webkit-box-flex:0;-ms-flex:none;flex:none;width:50%}.column.is-offset-6-desktop{margin-left:50%}.column.is-7-desktop{-webkit-box-flex:0;-ms-flex:none;flex:none;width:58.33333%}.column.is-offset-7-desktop{margin-left:58.33333%}.column.is-8-desktop{-webkit-box-flex:0;-ms-flex:none;flex:none;width:66.66667%}.column.is-offset-8-desktop{margin-left:66.66667%}.column.is-9-desktop{-webkit-box-flex:0;-ms-flex:none;flex:none;width:75%}.column.is-offset-9-desktop{margin-left:75%}.column.is-10-desktop{-webkit-box-flex:0;-ms-flex:none;flex:none;width:83.33333%}.column.is-offset-10-desktop{margin-left:83.33333%}.column.is-11-desktop{-webkit-box-flex:0;-ms-flex:none;flex:none;width:91.66667%}.column.is-offset-11-desktop{margin-left:91.66667%}.column.is-12-desktop{-webkit-box-flex:0;-ms-flex:none;flex:none;width:100%}.column.is-offset-12-desktop{margin-left:100%}}@media screen and (min-width:1192px){.column.is-narrow-widescreen{-webkit-box-flex:0;-ms-flex:none;flex:none}.column.is-full-widescreen{-webkit-box-flex:0;-ms-flex:none;flex:none;width:100%}.column.is-three-quarters-widescreen{-webkit-box-flex:0;-ms-flex:none;flex:none;width:75%}.column.is-two-thirds-widescreen{-webkit-box-flex:0;-ms-flex:none;flex:none;width:66.6666%}.column.is-half-widescreen{-webkit-box-flex:0;-ms-flex:none;flex:none;width:50%}.column.is-one-third-widescreen{-webkit-box-flex:0;-ms-flex:none;flex:none;width:33.3333%}.column.is-one-quarter-widescreen{-webkit-box-flex:0;-ms-flex:none;flex:none;width:25%}.column.is-offset-three-quarters-widescreen{margin-left:75%}.column.is-offset-two-thirds-widescreen{margin-left:66.6666%}.column.is-offset-half-widescreen{margin-left:50%}.column.is-offset-one-third-widescreen{margin-left:33.3333%}.column.is-offset-one-quarter-widescreen{margin-left:25%}.column.is-1-widescreen{-webkit-box-flex:0;-ms-flex:none;flex:none;width:8.33333%}.column.is-offset-1-widescreen{margin-left:8.33333%}.column.is-2-widescreen{-webkit-box-flex:0;-ms-flex:none;flex:none;width:16.66667%}.column.is-offset-2-widescreen{margin-left:16.66667%}.column.is-3-widescreen{-webkit-box-flex:0;-ms-flex:none;flex:none;width:25%}.column.is-offset-3-widescreen{margin-left:25%}.column.is-4-widescreen{-webkit-box-flex:0;-ms-flex:none;flex:none;width:33.33333%}.column.is-offset-4-widescreen{margin-left:33.33333%}.column.is-5-widescreen{-webkit-box-flex:0;-ms-flex:none;flex:none;width:41.66667%}.column.is-offset-5-widescreen{margin-left:41.66667%}.column.is-6-widescreen{-webkit-box-flex:0;-ms-flex:none;flex:none;width:50%}.column.is-offset-6-widescreen{margin-left:50%}.column.is-7-widescreen{-webkit-box-flex:0;-ms-flex:none;flex:none;width:58.33333%}.column.is-offset-7-widescreen{margin-left:58.33333%}.column.is-8-widescreen{-webkit-box-flex:0;-ms-flex:none;flex:none;width:66.66667%}.column.is-offset-8-widescreen{margin-left:66.66667%}.column.is-9-widescreen{-webkit-box-flex:0;-ms-flex:none;flex:none;width:75%}.column.is-offset-9-widescreen{margin-left:75%}.column.is-10-widescreen{-webkit-box-flex:0;-ms-flex:none;flex:none;width:83.33333%}.column.is-offset-10-widescreen{margin-left:83.33333%}.column.is-11-widescreen{-webkit-box-flex:0;-ms-flex:none;flex:none;width:91.66667%}.column.is-offset-11-widescreen{margin-left:91.66667%}.column.is-12-widescreen{-webkit-box-flex:0;-ms-flex:none;flex:none;width:100%}.column.is-offset-12-widescreen{margin-left:100%}}@media screen and (min-width:1384px){.column.is-narrow-fullhd{-webkit-box-flex:0;-ms-flex:none;flex:none}.column.is-full-fullhd{-webkit-box-flex:0;-ms-flex:none;flex:none;width:100%}.column.is-three-quarters-fullhd{-webkit-box-flex:0;-ms-flex:none;flex:none;width:75%}.column.is-two-thirds-fullhd{-webkit-box-flex:0;-ms-flex:none;flex:none;width:66.6666%}.column.is-half-fullhd{-webkit-box-flex:0;-ms-flex:none;flex:none;width:50%}.column.is-one-third-fullhd{-webkit-box-flex:0;-ms-flex:none;flex:none;width:33.3333%}.column.is-one-quarter-fullhd{-webkit-box-flex:0;-ms-flex:none;flex:none;width:25%}.column.is-offset-three-quarters-fullhd{margin-left:75%}.column.is-offset-two-thirds-fullhd{margin-left:66.6666%}.column.is-offset-half-fullhd{margin-left:50%}.column.is-offset-one-third-fullhd{margin-left:33.3333%}.column.is-offset-one-quarter-fullhd{margin-left:25%}.column.is-1-fullhd{-webkit-box-flex:0;-ms-flex:none;flex:none;width:8.33333%}.column.is-offset-1-fullhd{margin-left:8.33333%}.column.is-2-fullhd{-webkit-box-flex:0;-ms-flex:none;flex:none;width:16.66667%}.column.is-offset-2-fullhd{margin-left:16.66667%}.column.is-3-fullhd{-webkit-box-flex:0;-ms-flex:none;flex:none;width:25%}.column.is-offset-3-fullhd{margin-left:25%}.column.is-4-fullhd{-webkit-box-flex:0;-ms-flex:none;flex:none;width:33.33333%}.column.is-offset-4-fullhd{margin-left:33.33333%}.column.is-5-fullhd{-webkit-box-flex:0;-ms-flex:none;flex:none;width:41.66667%}.column.is-offset-5-fullhd{margin-left:41.66667%}.column.is-6-fullhd{-webkit-box-flex:0;-ms-flex:none;flex:none;width:50%}.column.is-offset-6-fullhd{margin-left:50%}.column.is-7-fullhd{-webkit-box-flex:0;-ms-flex:none;flex:none;width:58.33333%}.column.is-offset-7-fullhd{margin-left:58.33333%}.column.is-8-fullhd{-webkit-box-flex:0;-ms-flex:none;flex:none;width:66.66667%}.column.is-offset-8-fullhd{margin-left:66.66667%}.column.is-9-fullhd{-webkit-box-flex:0;-ms-flex:none;flex:none;width:75%}.column.is-offset-9-fullhd{margin-left:75%}.column.is-10-fullhd{-webkit-box-flex:0;-ms-flex:none;flex:none;width:83.33333%}.column.is-offset-10-fullhd{margin-left:83.33333%}.column.is-11-fullhd{-webkit-box-flex:0;-ms-flex:none;flex:none;width:91.66667%}.column.is-offset-11-fullhd{margin-left:91.66667%}.column.is-12-fullhd{-webkit-box-flex:0;-ms-flex:none;flex:none;width:100%}.column.is-offset-12-fullhd{margin-left:100%}}.columns{margin-left:-.75rem;margin-right:-.75rem;margin-top:-.75rem}.columns:last-child{margin-bottom:-.75rem}.columns:not(:last-child){margin-bottom:.75rem}.columns.is-centered{-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center}.columns.is-gapless{margin-left:0;margin-right:0;margin-top:0}.columns.is-gapless:last-child{margin-bottom:0}.columns.is-gapless:not(:last-child){margin-bottom:1.5rem}.columns.is-gapless>.column{margin:0;padding:0}@media screen and (min-width:769px){.columns.is-grid{-ms-flex-wrap:wrap;flex-wrap:wrap}.columns.is-grid>.column{max-width:33.3333%;padding:.75rem;width:33.3333%}.columns.is-grid>.column+.column{margin-left:0}}.columns.is-mobile{display:-webkit-box;display:-ms-flexbox;display:flex}.columns.is-multiline{-ms-flex-wrap:wrap;flex-wrap:wrap}.columns.is-vcentered{-webkit-box-align:center;-ms-flex-align:center;align-items:center}@media screen and (min-width:769px){.columns:not(.is-desktop){display:-webkit-box;display:-ms-flexbox;display:flex}}@media screen and (min-width:1000px){.columns.is-desktop{display:-webkit-box;display:-ms-flexbox;display:flex}}.label{-webkit-border-radius:4px;-moz-border-radius:4px;border-radius:4px;padding:3px 5px 4px;color:#fff;font-weight:700;text-transform:uppercase;white-space:nowrap;font-size:.75em;left:10px;top:-15px;position:relative}div.box p,div.box ul{position:relative;top:-20px}.box.moody .label{background-color:#f89406}.box.happy .label{background-color:#46a546}.box.angry .label{background-color:#c43c35}code,div.box{-webkit-border-radius:4px;-moz-border-radius:4px;border-radius:4px;padding:0 5px;border:1px solid #ccc;margin-bottom:25px;font-size:.9em}.angry{background-color:#ffd7d5;border-color:#c43c35}.happy{background-color:#c0e0c0;border-color:#46a546}.moody{background-color:#ffecd1;border-color:#f89406}@page{size:1210px 681px;margin:0}@media print{.remark-slide-scaler{width:100%!important;height:100%!important;transform:scale(1)!important;top:0!important;left:0!important}}</style><script type="text/javascript" async src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/latest.js?config=TeX-MML-AM_CHTML" async></script> <script src="https://cdn.jsdelivr.net/npm/highlightjs-line-numbers.js@2.6.0/dist/highlightjs-line-numbers.min.js"></script> <script>hljs.initHighlightingOnLoad();hljs.initLineNumbersOnLoad();</script> <link rel="stylesheet2" href="https://cdnjs.cloudflare.com/ajax/libs/mermaid/7.0.10/mermaid.min.css"> <script>mermaid.initialize({startOnLoad:true});</script> <script async src="https://www.googletagmanager.com/gtag/js?id=UA-127734928-1"></script> <script>window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments);} gtag('js',new Date());gtag('config','UA-127734928-1');</script> <script>(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)})(window,document,'script','//www.google-analytics.com/analytics.js','ga');ga('create','UA-127734928-1','auto');ga('send','pageview');</script> </head><body> <script>if(window.location.search.match(/print-pdf/gi)){var link=document.createElement('link');link.rel='stylesheet';link.type='text/css';link.href='../pdf.css';document.getElementsByTagName('head')[0].appendChild(link);}</script> <textarea id="source">class: center, middle

## [High-performance computing (HPC)](/courses/#table-of-contents)
### V4-openMPI


.author[[Milovan Toma≈°eviƒá, Ph.D.](https://www.milovantomasevic.com/)]

.small[![:scale 40%](../codep.png).medium[[üåê‚ûô milovantomasevic.com](https://milovantomasevic.com)</br> [‚úé‚ûô tomas.ftn.e2@gmail.com](mailto:tomas.ftn.e2@gmail.com)]]



.created[25.05.2020 u 23:09]


---



class: split-20 nopadding
background-image: url(../key.jpg)

.column_t2.center[.vmiddle[
.fgtransparent[
![:scale 80%](../zahvalnica.png)
]
]]
.column_t2[.vmiddle.nopadding[
.shadelight[.boxtitle1[
.small[
## Acknowledgements

#### University of Novi Sad | Serbia

- [Gorana Gojiƒá, MS, Teaching assistant](http://www.acs.uns.ac.rs/en/user/49)
- [Veljko Petroviƒá, Ph.D., Assistant Professor](http://www.acs.uns.ac.rs/en/user/30)
- [Faculty of Technical Sciences](http://ftn.uns.ac.rs/)
- [Computing and Control Department | Chair for Applied Computer Sciences](http://www.acs.uns.ac.rs/en)
]]]
]]

.footer.small[
- #### Slides are created according to sources in the literature & Acknowledgements
]

---

name: sadrzaj

# Sadr≈æaj

- [MPI](#mpi)
- [Komunikatori](#komunikatori)
- [Point to Point komunikacija](#p2p)
- [Kolektivna komunikacija](#kk)

---
name: mpi
class: center, middle, inverse

# MPI

---
layout: true

.section[[MPI](#sadrzaj)]

---
## Message Passing Interface (MPI)

- Standard koji propisuje komunikaciju razmenom poruka na razliƒçitim paralelnim arhitekturama.
- **MPI 1.x** (1994.) podr≈°ka za C, C++, Fortran
- **MPI 2.x** (1997.) podr≈°ka za C, C++, Fortran
- **MPI 3.x** (2012.) podr≈°ka za C, Fortran
- Od formulisanja standarda razvijene su razliƒçite implementacije MPI (komercijalne i otvorenog koda).

---

## MPI ciljna arhitektura

![:scale 80%](img/mpi.png)

---

## Format OpenMPI programa

```c
#include "mpi.h"

	int main(int argc, char *argv[]) {
	MPI_Init(&argc, &argv);

	// MPI code	

	MPI_Finalize();

	return 0;
}
```

---

## Kompajliranje MPI programa
- Pozicionirati se u direktorijum u kojem se nalazi izvorni kod MPI programa i uneti:
```console
mpicc <izvorna_datoteka>
```
- `mpicc` je omotaƒçka skripta za `gcc`, pa se pri kompajliranju mogu navesti opcije gcc kompajlera.

- Pokretanje:
```console
mpiexec [-np <N>] <izvrsna_datoteka>
```
- `-np <N>` - opcija za zadavanje broja procesa koji ƒáe biti kreirani pri pokretanju programa.

---

## Primer 1: <a target="_blank" rel="noopener noreferrer" href="/courses/hpc-z4-openMPI/#table-of-contents"> ‚òõ Primeri/`hello_world.c`</a>

.message.is-dark[
.message-header[
Primer
]
.message-body[
```c
#include <stdio.h>
#include "mpi.h"

int main(int argc, char *argv[]) {
	int size, rank;

	MPI_Init(&argc, &argv);
	MPI_Comm_size(MPI_COMM_WORLD, &size);
	MPI_Comm_rank(MPI_COMM_WORLD, &rank);

	printf("Hello World iz %d/%d.\n", rank, size);
	
	MPI_Finalize();

	return 0;
}
```
]
]

---

## MPI osnovni koncepti

- Komunikator (eng. *communicator* )
- `Point to Point` komunikacija (eng. *Point-to-Point communication*)
- Kolektivna komunikacija (eng. *Collective communication*)

---
layout: false
name: komunikatori
class: center, middle, inverse

# Komunikatori

---
layout: true

.section[[Komunikatori](#sadrzaj)]

---

## Komunikatori

- Logiƒçki gledano, **komunikator** predstavlja grupu procesa unutar koje
svaki proces ima svoj **rank** (odnosno identifikator).

![:scale 80%](img/komunikator.png)

- `MPI_COMM_SELF, MPI_COMM_NULL`

---

## Komunikatori
- Tokom izvr≈°avanja MPI istovremeno mo≈æe da postoji vi≈°e komunikatora.

- `MPI_Comm` tip podatka.

- Funkcije za pravljenje komunikatora:

```c
# kreiranje novog komunikatora deljenjem postojeƒáeg
MPI_Comm_split(MPI_Comm comm, int color, int key, MPI_Comm* newcomm);

# novi komunikator je kopija postojeƒáeg
int MPI_Comm_dup(MPI_Comm comm, MPI_Comm *newcomm)

# i druge
```

---

## Zadatak 1: Komunikatori

.message.is-info[
.message-header[
Zadatak
]
.message-body[
- Napraviti OpenMPI C program koji kori≈°ƒáenjem funkcije `MPI_Comm_split` na osnovu podrazumevanog pravi dva nova komunikatora. Procese podeliti u dva komunikatora na osnovu parnosti ranka unutar `MPI_COMM_WORLD` komunikatora. Pri tom relativni poredak procesa unutar komunikatora treba da bude isti kao i u podrazumevanom komunikatoru. Svaki proces na standardni izlaz treba da ispi≈°e svoj rank unutar `MPI_COMM_WORLD` i novoformiranog komunikatora.
]
]

--
.message.is-dark[
.message-header[
Primer
]
.message-body[
- Primer ispisa za jedan proces:
```console
MPI_COMM_WORLD rank: 0/4 - ncomm rank: 0/2
```
]
]

--
.message.is-success[
.message-header[
Odgovor
]
.message-body[
- <a target="_blank" rel="noopener noreferrer" href="/courses/hpc-z3-openMPI/#table-of-contents"> ‚òõ Re≈°enja/`communicators.c`</a>
]
]

---

## MPI tipovi podataka
- Zarad portabilnosti MPI standard defini≈°e tipove podataka.

.center-table.small[

|   MPI tip podatka  |    C tip podatka   |
|:------------------:|:------------------:|
|      MPI_CHAR      |     signed char    |
|      MPI_SHORT     |  signed short int  |
|       MPI_INT      |     signed int     |
|      MPI_LONG      |   signed long int  |
|  MPI_UNSIGNED_CHAR |    unsigned char   |
| MPI_UNSIGNED_SHORT | unsigned short int |
|    MPI_UNSIGNED    |    unsigned int    |
|  MPI_UNSIGNED_LONG |  unsigned long int |
|      MPI_FLOAT     |        float       |
|     MPI_DOUBLE     |       double       |
|   MPI_LONG_DOUBLE  |     long double    |
|      MPI_BYTE      |         /          |
|     MPI_PACKED     |         /          |

]

---
layout: false
name: p2p
class: center, middle, inverse

# Point to Point komunikacija

---
layout: true

.section[[Point to Point komunikacija](#sadrzaj)]

---

## Point to Point komunikacija
- Komunikacija dva procesa. Jedan proces ≈°alje poruku, drugi proces prima poruku.
- Funkcije za razmenu poruka.ref[1,2]:

.lcol.medium[

```c
int MPI_Recv(
	void *buf,
	int count,
	MPI_Datatype datatype,
	int source,
	int tag,
	MPI_Comm comm,
	MPI_Status *status);
```
]

.rcol.medium[
```c
int MPI_Send(
	const void *buf,
	int count,
	MPI_Datatype datatype,
	int dest,
	int tag,
	MPI_Comm comm);
```
]
![:scale 45%](img/p2p.gif)

.footer.medium[
   <a target="_blank" rel="noopener noreferrer" href="https://www.open-mpi.org/doc/v2.0/man3/MPI_Recv.3.php">1. OpenMPI 2.0 MPI_Recv docs</a><br>
   <a target="_blank" rel="noopener noreferrer" href="https://www.open-mpi.org/doc/v2.0/man3/MPI_Send.3.php">2. OpenMPI 2.0 MPI_Send docs</a>

] 

---

## Primer 2: Point to Point komunikacija <a target="_blank" rel="noopener noreferrer" href="/courses/hpc-z4-openMPI/#table-of-contents"> <br>‚òõ Primeri/`send_recv.c`</a>

```c
// ...
if (rank == 0) {

	int message = 1;

	printf("Proces %d salje poruku procesu %d.\n", rank, 1);

	MPI_Send(&message, 1, MPI_INT, 1, 0, MPI_COMM_WORLD);

} else if (rank == 1) {

	int message;

	printf("Proces %d treba da primi poruku od procesa %d.\n",rank, 0);

	MPI_Recv(&message, 1, MPI_INT, 0, 0, MPI_COMM_WORLD, NULL);

	printf("Proces %d primio poruku %d od procesa %d.\n", rank, message, 0);
}

// ...
```

---

## Re≈æimi Point-to-Point komunikacije

- P2P komunikacioni re≈æimi slanja poruke:
	- `Synchronous` (MPI_Ssend)- po≈°iljalac ≈°alje zahtev za slanje poruke, nakon ≈°to primalac odgovori poruka se ≈°alje (*handshake protokol*)
	- `Buffered` (MPI_Bsend) - po iniciranju slanja poruka se ≈°alje u bafer odakle je primalac mo≈æe preuzeti
	- `Standard` (MPI_Send) - mo≈æe imati karakteristike buffered ili `synchronous` re≈æima (podrazumevano)
	- `Ready` (MPI_Rsend) - pretpostavlja se da je proces koji prima poruku veƒá ƒçeka na poruku u trenutku iniciranja slanja
- Za prijem poruke postoji samo jedan re≈æim i poruka se smatra primljenom kada je preuzeta i mo≈æe dalje da se koristi.

---
## Point to Point komunikacija

- Da bi proces2 primio poruku koju mu ≈°alje proces1 mora da va≈æi: 
- Da `comm` parametar oba procesa ima istu vrednost,
- Da parametar `dest` procesa 1 ima istu vrednost kao i parametar source procesa 2 ili da je vrednost parametra procesa 2 postavljena na `MPI_ANY_SOURCE`,
- Da parametar `tag` ima istu vrednost za oba procesa ili da je vrednost parametra tag `MPI_ANY_TAG`

--

.message.is-dark[
.message-header[
Primer
]
.message-body[
- <a target="_blank" rel="noopener noreferrer" href="/courses/hpc-z4-openMPI/#table-of-contents"> ‚òõ Primeri/`wrong_send_recv.c`</a>
]
]

---

## Tipovi Point-to-Point komunikacije
- Slanje i prijem poruke mogu biti:
	- blokirajuƒái - Ako `MPI_Send` blokirajuƒáa, kontrola toka se neƒáe vratiti pozivaocu funkcije sve dok uslov slanja ne bude ispunjen. Nakon izlaska iz funkcije bafer poruke mo≈æe biti bezbedno prepisan. Ako je `MPI_Recv` blokirajuƒáa kontrola se ne vraƒáa pozivaocu funkcije sve dok poruka ne bude preuzeta (`podrazumevano`).
	- neblokirajuƒái - Iz `MPI_Send`, tj. `MPI_Recv` se izlazi nakon inicijacije slanja, tj. primanja poruke. Kada se pojavi potreba za kori≈°ƒáenjem izvornog odnosno odredi≈°nog bafera, potrebno je prethodno proveriti da li je podatak poslat tj. da li je stigao.

.center[
```c
MPI_{I}[S, B, R]Send(...), MPI_{I}Recv(...)
```
]

---

## Zadatak 2: Ping pong

.message.is-info[
.message-header[
Zadatak
]
.message-body[
- Napraviti OpenMPI program implementiran u C programskom jeziku koji simulira igranje ping ponga izmeƒëu dva procesa. Lopticu simulirati promenljivom tipa int. Uveƒáati ovu promenljivu svaki put kada neki od procesa udari lopticu, odnosno, pre nego ≈°to neki od procesa po≈°alje promenljivu drugom procesu i ispisati odgovarajuƒáu poruku.
]
]

--
.message.is-dark[
.message-header[
Primer
]
.message-body[
- Format oƒçekivanog ispisa:
```console
p0 sent ping_pong_count to p1 and incremented it to 1.
p1 received ping_pong_count 1 from p0.
p1 sent ping_pong_count to p0 and incremented it to 2.
```

]
]

--
.message.is-warning[
.message-header[
Info
]
.message-body[
- **Napomene**: 
Pretpostavka je da ƒáe program biti pozvan opcijom `-np 2` i od ovoga se ne mora ≈°tititi.
Ne znaƒçi da program nije ispravan ukoliko ispis na ekranu nije u oƒçekivanom redosledu.
]
]

---

## Zadatak 3: Ping pong - sekvencijalni ispis

.message.is-info[
.message-header[
Zadatak
]
.message-body[
- Modifikovati osnovni ping pong zadatak tako da se ispis na standardni izlaz odvija u redosledu u kojem procesi udaraju ping pong lopticu. Program pokrenuti sa tri procesa - procesi 0 i 1 igraju ping pong, dok treƒái proces ispisuje poruke na standardni izlaz. Svaki put kada neki od procesa igraƒça udari lopticu, on procesu ≈°tampaƒçu ≈°alje poruku koju treba ispisati na standardni izlaz. Poruke za ispis procesu ≈°tampaƒçu sti≈æu u proizvoljnom redosledu, ali on treba da ih ispi≈°e u redosledu koji odgovara sekvencijalnom izvr≈°avanju programa. Sve poruke su iste du≈æine.
- Ping pong se igra do 9.
  
]
]

--
.message.is-dark[
.message-header[
Primer
]
.message-body[
- Primer izvr≈°avanja:
```console
p0 sent ping_pong_count to p1 and incremented it to 1.
p1 sent ping_pong_count to p0 and incremented it to 2.
p0 sent ping_pong_count to p1 and incremented it to 3.
```
]
]

---

## Zadatak 4: Prsten

.message.is-info[
.message-header[
Zadatak
]
.message-body[
- Napisati OpenMPI C program koji prosleƒëuje ≈æeton izmeƒëu procesa po principu prstena. ≈Ωeton je predstavljen brojem -1 i poseduje ga proces ranga 0. Svi procesi osim poslednjeg ≈°alju ≈æeton procesu sa rangom za jedan veƒái od svog. Poslednji proces (proces sa najveƒáim rangom u komunikatoru) ≈æeton prosleƒëuje nazad procesu ranga 0. Nakon ≈°to proces ranga 0 primi ≈æeton, program se zavr≈°ava. Ispisati poruku na standardni izlaz svaki put kada neki od procesa primi ≈æeton.
]
]

--
.message.is-dark[
.message-header[
Primer
]
.message-body[
- Format oƒçekivanog ispisa:
```console
Process 1 received token -1 from process 0
Process 2 received token -1 from process 1
Process 3 received token -1 from process 2
Process 0 received token -1 from process 3
```
]
]

---

## P2P: Neblokirajuƒáa komunikacija

- `MPI_Isend` (i drugi re≈æimi), `MPI_Irecv`
- Proces inicira slanje ili primanje poruke, ali **ne ƒçeka na zavr≈°etak operacije**.

.lcol[

```c
int MPI_Test(
	MPI_Request *request,
	int *flag,
	MPI_Status *status)
```

- Testira stanje zahteva i postavlja promenljivu flag na `true` ukoliko je zahtev izvr≈°en, odnosno na `false` ukoliko nije..ref[1]

]

.rcol[
```c
int MPI_Wait(
	MPI_Request *request,
	MPI_Status *status)
```

- Testira da li je zahtev izvr≈°en i zavr≈°ava se kada se zahtev izvr≈°i.
- Funkcija je blokirajuƒáa..ref[2]
]

.footer.medium[
<a target="_blank" rel="noopener noreferrer" href="https://www.open-mpi.org/doc/v2.0/man3/MPI_Test.3.php">1. MPI_Test docs</a><br>
<a target="_blank" rel="noopener noreferrer" href="https://www.open-mpi.org/doc/v2.0/man3/MPI_Wait.3.php">2. MPI_Wait docs</a>

] 

---

## Primer 3: <a target="_blank" rel="noopener noreferrer" href="/courses/hpc-z4-openMPI/#table-of-contents"> ‚òõ Primeri/`send_recv_nonblocking.c`</a>

```c
	if (rank == 0) {
		MPI_Request send_request;
		char *message = "Zdravo!";
		
		MPI_Issend(message, 8, MPI_CHAR, 1, 0, MPI_COMM_WORLD, &send_request);

		printf("Proces %d inicirao slanje poruke.\n", rank);
		
		printf("Proces radi nesto drugo dok se poruka salje.");

		int flag = 0;
		MPI_Test(&send_request, &flag, MPI_STATUS_IGNORE);

		if (flag != 0) 
			/* poslato */ 
		
		else 
			/* nije */
		
	}else /* ... */
```

---

## Primer 3: <a target="_blank" rel="noopener noreferrer" href="/courses/hpc-z4-openMPI/#table-of-contents"> ‚òõ Primeri/`send_recv_nonblocking.c`</a>

```c
	if (rank == 0) /* ... */
	} else {

		MPI_Request receive_request;
		char message[8];

		MPI_Irecv(message, 8, MPI_CHAR, 0, 0, MPI_COMM_WORLD, &receive_request);
		
		printf("Proces %d inicirao primanje poruke.\n", rank);
		
		printf("Proces radi nesto drugo dok se poruka prima...");

		MPI_Wait(&receive_request, MPI_STATUS_IGNORE);
		printf("Proces %d primio poruku: \"%s\"\n", rank, message);

	}
```

---

## Zadatak 5: Ping pong - neblokirajuƒái sekvencijalni ispis

.message.is-info[
.message-header[
Zadatak
]
.message-body[
- Modifikovati zadatak 4 tako da slanje poruka procesu ≈°tampaƒçu bude neblokirajuƒáe. Pri tom se obezbediti da program radi korektno, odnosno da se ne desi da poruka koja nije poslata bude prepisana novom porukom pre nego se stara po≈°alje.
]
]

--
.message.is-success[
.message-header[
Odgovor
]
.message-body[
- <a target="_blank" rel="noopener noreferrer" href="/courses/hpc-z4-openMPI/#table-of-contents"> ‚òõ Primeri/`ping_pong_printf_async.c`</a>
]
]

---

## P2P: dinamiƒçka komunikacija

- Nekada poruke koje procesi razmenjuju nisu fiksne du≈æine. 
- Tada je prvo potrebno oƒçitati du≈æinu poruke, alocirati bafer za poruku, pa tek onda zapoƒçeti njeno primanje.

.lcol[

```c
MPI_Probe(
	int source,
	int tag,
	MPI_Comm comm,
	MPI_Status* status)
```

- Simulira primanje poruke.
- Popunjava status polje..ref[1]
]

.rcol[
```c
MPI_Get_count(
	const MPI_Status *status,
	MPI_Datatype datatype,
	int *count)
```

- Oƒçitava broj primljenih podataka tipa datatype na osnovu status polja..ref[2]
]

.footer.medium[
<a target="_blank" rel="noopener noreferrer" href="https://www.open-mpi.org/doc/v2.0/man3/MPI_Probe.3.php">1. MPI_Probe docs</a><br>
<a target="_blank" rel="noopener noreferrer" href="https://www.open-mpi.org/doc/v2.0/man3/MPI_Get_count.3.php">2. MPI_Get_count docs</a>

] 

---

## Primer 4: dynamic_communication.c

```c
	if (rank == 0) {
		int size = rand() % 10 + 1;
		char *message = (char *) calloc(size + 1, sizeof(char));

		for (int i = 0; i < size; i++) {
			message[i] = 'a';
		}

		MPI_Send(message, size + 1, MPI_CHAR, 1, 0, MPI_COMM_WORLD);
		free(message);
	} else {
		MPI_Status status; int size;
		MPI_Probe(0, 0, MPI_COMM_WORLD, &status);
		MPI_Get_count(&status, MPI_CHAR, &size);

		char *message = (char *) malloc(size * sizeof(char));
		MPI_Recv(message, size, MPI_CHAR, 0, 0, MPI_COMM_WORLD, MPI_STATUS_IGNORE);

		printf("Primljena poruka: %s.\n", message);
	}
```

---

## Zadatak 6: Ping pong - poruka varijabilne du≈æine

.message.is-info[
.message-header[
Zadatak
]
.message-body[
- Modifikovati zadatak 4 tako da se procesu printeru ≈°alju poruke promenljive du≈æine. Koristiti funkcije `MPI_Probe` i `MPI_Get_count`. 
- Procesi mogu da izvr≈°e maksimalno 999 razmena lopticom.
]
]

--
.message.is-success[
.message-header[
Odgovor
]
.message-body[

-  <a target="_blank" rel="noopener noreferrer" href="/courses/hpc-z4-openMPI/#table-of-contents"> ‚òõ Primeri/`ping_pong_printf_variablelen.c`</a>
]
]

---

layout: false
name: kk
class: center, middle, inverse

# Kolektivna komunikacija

---
layout: true

.section[[Kolektivna komunikacija](#sadrzaj)]

---
## Kolektivna komunikacija
- (eng. *collective communication*)
- Komunikacija **svih** procesa unutar jednog komunikatora.
- Vrste kolektivne komunikacije:
	- Broadcast
	- Scatter
	- Gather
	- AllGather
	- Reduction
	- AllReduction
	- ...

---

## Kolektivna komunikacija: Broadcast

.lcol[
```c
int MPI_Bcast(
	void *buffer,
	int count,
	MPI_Datatype datatype,
	int root,
	MPI_Comm comm);
```
]

.rcol[
![:scale 75%](img/broadcast.png)
]
<br><br><br><br><br><br><br>

- Proces ƒçiji je rank jednak vrednosti root parametra ≈°alje poruku svim ostalim procesima iz komunikatora, ukljuƒçujuƒái i sebe.

---

## Primer 5: <a target="_blank" rel="noopener noreferrer" href="/courses/hpc-z4-openMPI/#table-of-contents"> ‚òõ Primeri/`bcast.c`</a>
```c
int main(int argc, char *argv[]) {
	int rank, root = 0;

	MPI_Init(&argc, &argv);

	MPI_Comm_rank(MPI_COMM_WORLD, &rank);

	int token;
	if (rank == root) token = 123;
	MPI_Bcast(&token, 1, MPI_INT, root, MPI_COMM_WORLD);
	printf("Proces %d primio token %d.\n", rank, token);

	MPI_Finalize();
	
	return 0;
}
```

---

## Zadatak 7: Broadcast

.message.is-info[
.message-header[
Zadatak
]
.message-body[
- Napisati OpenMPI C implementaciju `MPI_Bcast` funkcije kori≈°ƒáenjem `MPI_Send` i `MPI_Recv` funkcija. Rank procesa koji emituje vrednost ≈æetona se unosi kao argument poziva programa. Vrednost ≈æetona koji se emituje je -1. Nakon ≈°to root proces (proces koji emituje vrednost ≈æetona) po≈°alje ≈æeton ispisati poruku o tome.
- Nakon ≈°to svaki od preostalih procesa primi ≈æeton, ispisati poruku i vrednost primljenog ≈æetona.
]
]

--
.message.is-dark[
.message-header[
Primer
]
.message-body[
- Format oƒçekivanog ispisa:
```console
Proces 0 poslao zeton -1
Proces 1 primio zeton -1
Proces 2 primio zeton -1
Proces 3 primio zeton -1
```
]
]

---

## Zadatak 8: Kolektivna komunikacija nad podskupom komunikatora

.message.is-info[
.message-header[
Zadatak
]
.message-body[
- U kolektivnoj komunikaciji uƒçestvuju svi procesi unutar komunikatora. Meƒëutim, pri pre≈°avanju kompleksnijih problema mo≈æe se pojaviti potreba da se neki podatak po≈°alje samo delu procesa komunikatora. Ustanovili smo da kori≈°ƒáenje metoda kolektivne komunikacije mo≈æe biti efikasnije u odnosu na pojedinaƒçno pozivanje `MPI_Send` i `MPI_Recv` za svaki od procesa u komunikatoru kojima treba proslediti podatak. 
- `Kako biste podatak poslali samo delu procesa u nekom komunikatoru kori≈°ƒáenjem kolektivne komunikacije?`
]
]

--
.message.is-success[
.message-header[
Odgovor
]
.message-body[
- Napraviti novi komunikator za procese kojima treba poslati podataka i koristiti kolektivnu komunikaciju na nivou novonapravljenog komunikatora.
]
]

---

## Kolektivna komunikacija: Scatter

.lcol[

```c
int MPI_Scatter(
	const void *sendbuf,
	int sendcount,
	MPI_Datatype sendtype,
	void *recvbuf,
	int recvcount,
	MPI_Datatype recvtype,
	int root,
	MPI_Comm comm);
```

]

.rcol[

![:scale 85%](img/scatter.png)

]
<br><br><br><br><br><br><br><br>

- Korenski proces ≈°alje delove podataka procesima iz komunikatora..ref[1]
- Svaki proces dobija "parƒçe" podatka iste veliƒçine.

.footer.medium[
    1. <a target="_blank" rel="noopener noreferrer" href="https://www.open-mpi.org/doc/v2.0/man3/MPI_Scatter.3.php">MPI_Scatter docs</a>
] 

---

## Primer 6: <a target="_blank" rel="noopener noreferrer" href="/courses/hpc-z4-openMPI/#table-of-contents"> ‚òõ Primeri/`scatter.c`</a>

```c
int main(int argc, char *argv[]) {

	/* ... */

	int *data = NULL, *partial_data = NULL;
	int piecelen = datalen / size;

	if (rank == root) {
		/* inicijalizacija data niza */

	}
	partial_data = (int *) malloc(sizeof(int) * piecelen);

	MPI_Scatter(data, piecelen, MPI_INT, partial_data, piecelen, MPI_INT, root, MPI_COMM_WORLD);

	/* ... */

	return 0;
}
```

---

## Kolektivna komunikacija: Gather

.lcol[

```c
int MPI_Gather(
	const void *sendbuf,
	int sendcount,
	MPI_Datatype sendtype,
	void *recvbuf,
	int recvcount,
	MPI_Datatype recvtype,
	int root,
	MPI_Comm comm);
```

]

.rcol[

![:scale 85%](img/gather.png)

]

<br><br><br><br><br><br><br><br>
- Korenski proces prima podatke od procesa iz komunikatora..ref[1] 
- Svaki proces ≈°alje "parƒçe" podatka iste veliƒçine.

.footer.medium[
    1. <a target="_blank" rel="noopener noreferrer" href="https://www.open-mpi.org/doc/v2.0/man3/MPI_Gather.3.php">MPI_Gather docs</a>
] 

---

## Primer 7: <a target="_blank" rel="noopener noreferrer" href="/courses/hpc-z4-openMPI/#table-of-contents"> ‚òõ Primeri/`gather.c`</a>
```c
int main(int argc, char *argv[]) {

	int *data = NULL, *partial_data = NULL;
	int piecelen = datalen / size;
	partial_data = (int *) malloc(sizeof(int) * piecelen);

	/* ... */

	if (rank == root)
	data = (int *) malloc(sizeof(int) * datalen);
	
	MPI_Gather(partial_data, piecelen, MPI_INT, data, piecelen, MPI_INT, root, MPI_COMM_WORLD);
	
	/* ... */
	
	return 0;
}
```

---

## Zadatak 9: Raƒçunanje srednje vrednosti

.message.is-info[
.message-header[
Zadatak
]
.message-body[
- Napraviti OpenMPI C program koji raƒçuna srednju vrednost elemenata niza u vi≈°e procesa kori≈°ƒáenjem funkcija `MPI_Scatter` i `MPI_Gather`. Program napisati tako da:
	- Korenski proces inicijalizuje niz du≈æine n nasumiƒçno izgenerisanim celim brojevima. Du≈æina niza mora biti deljiva brojem pokrenutih procesa.
	- Razdeliti izgenerisani niz na jednake delove izmeƒëu svih procesa.
	- Svaki proces treba da izraƒçuna sumu elemenata niza koji su mu prosleƒëeni.
	- Nakon ≈°to su sve parcijalne sume sraƒçunate, prebacuju se nazad korenskom procesu koji od parcijalnih suma pravi konaƒçnu sumu koju deli ukupnim brojem elemenata i ispisuje srednju vrednost niza.
]
]

---

## Kolektivna komunikacija: AllGather

.lcol[

```c
int MPI_Allgather(
	const void *sendbuf,
	int sendcount,
	MPI_Datatype sendtype,
	void *recvbuf,
	int recvcount,
	MPI_Datatype recvtype,
	MPI_Comm comm);
```

]

.rcol[

![:scale 60%](img/allgather.png)

]

<br><br><br><br><br><br><br><br><br>

- Efektivno poziv `MPI_Gather` praƒáen `MPI_Bcast` pozivom..ref[1]

.footer.medium[
    1. <a target="_blank" rel="noopener noreferrer" href="https://www.open-mpi.org/doc/v2.0/man3/MPI_Allgather.3.php">MPI_Allgather docs</a>
] 

---

## Primer 8: <a target="_blank" rel="noopener noreferrer" href="/courses/hpc-z4-openMPI/#table-of-contents"> ‚òõ Primeri/`allgather.c`</a>
```c
int main(int argc, char *argv[]) {

	/* ... */

	int *data = (int *) malloc(sizeof(int) * size);

	int token = rank;
	MPI_Allgather(&token, 1, MPI_INT, data, 1, MPI_INT, MPI_COMM_WORLD);

	free(data);
	
	/* ... */
	
	return 0;
}
```

---

## Kolektivna komunikacija: Reduce

.lcol[

```c
int MPI_Reduce(
	const void *sendbuf,
	void *recvbuf,
	int count,
	MPI_Datatype datatype,
	MPI_Op op,
	int root,
	MPI_Comm comm);
```

]

.rcol[

![:scale 90%](img/reduce.png)

]

<br><br><br><br><br><br><br><br><br>

- Procesi unutar komunikatora ≈°alju podatke korenskom procesu koji vr≈°i redukciju nad podacima zadatom funkcijom (npr. `MPI_SUM`, `MPI_AND`...)..ref[1]

.footer.medium[
    1. <a target="_blank" rel="noopener noreferrer" href="https://www.open-mpi.org/doc/v2.0/man3/MPI_Reduce.3.php">MPI_Reduce docs</a>
] 

---

## Primer 9: <a target="_blank" rel="noopener noreferrer" href="/courses/hpc-z4-openMPI/#table-of-contents"> ‚òõ Primeri/`reduce.c`</a>

```c
int main(int argc, char *argv[]) {
	/* ... */

	int token = rank, result;
	MPI_Reduce(&token, &result, 1, MPI_INT, MPI_SUM, root, MPI_COMM_WORLD);

	printf("Proces %d: result = %d.\n", rank, result);

	MPI_Finalize();
	
	return 0;
}
```

---

## Zadatak 10: Raƒçunanje srednje vrednosti 2

.message.is-info[
.message-header[
Zadatak
]
.message-body[
- Modifikovati zadatak koji raƒçuna srednju vrednost elemenata niza tako da se u odgovarajuƒáem koraku koristi funkcija `MPI_Reduce`.
]
]

---

## Kolektivna komunikacija: AllReduce

.lcol[

```c
int MPI_Allreduce(
	const void *sendbuf,
	void *recvbuf,
	int count,
	MPI_Datatype datatype,
	MPI_Op op,
	MPI_Comm comm);
```

]

.rcol[

![:scale 90%](img/allreduce.png)

]

<br><br><br><br><br><br><br><br><br>

- Efektivno poziv `MPI_Reduce` praƒáen `MPI_Bcast` pozivom.

.footer.medium[
    1. <a target="_blank" rel="noopener noreferrer" href="https://www.open-mpi.org/doc/v2.0/man3/MPI_Allreduce.3.php">MPI_Allreduce docs</a>
] 

---

## Primer 10: <a target="_blank" rel="noopener noreferrer" href="/courses/hpc-z4-openMPI/#table-of-contents"> ‚òõ Primeri/`allreduce.c`</a>

```c
int main(int argc, char *argv[]) {
	/* ... */

	int token = rank, result;
	MPI_Allreduce(&token, &result, 1, MPI_INT, MPI_SUM, MPI_COMM_WORLD);

	printf("Proces %d: result = %d.\n", rank, result);

	/* ... */
	
	return 0;
}
```

---

## Zadatak 11: Mno≈æenje matrice i vektora - domaƒái

.message.is-info[
.message-header[
Zadatak
]
.message-body[
- Napisati OpenMPI C program za mno≈æenje kvadratne matrice i vektora. Ulazna matrica i vektor sadr≈æe razlomljene brojeve u jednostrukoj preciznosti i podrazumeva se da ƒáe dimenzije matrice i vektora biti odgovarajuƒáe. Ulazni podaci za zadatak su izgenerisani i dati u h5 formatu. Takoƒëe, dat je kostur re≈°enja sa primerima kako uƒçitati matricu/vektor iz h5 datoteke i ispisati ih na standardni izlaz (direktorijum MatrixVectorMultiplication). Za detalje oko kompajliranja i pokretanja re≈°enja pogledati README.md datoteku.
- Implementirati:
  - Sekvencijalni algoritam za mno≈æenje matrice i vektora. Meriti vreme izvr≈°avanja i ispisati ga na standardni izlaz.
  - OpenMPI C algoritam za mno≈æenje matrice i vektora. Meriti vreme izvr≈°avanja i ispisati ga na standardni izlaz. Ostaviti moguƒánost da se na standardni izlaz ispi≈°e i rezultat raƒçunanja.

]
]

---
## Zadatak 12: Mno≈æenje matrica - domaƒái

.message.is-info[
.message-header[
Zadatak
]
.message-body[
- Napisati OpenMPI C program za mno≈æenje dve kvadratne matrice.
- Obe ulazne matrice sadr≈æe brojeve u jednostrukoj preciznosti.
- Ulazni podaci za zadatak su izgenerisani i dati u h5 formatu.
- Takoƒëe, dat je kosture≈°enja sa primerima kako uƒçitati matricu iz h5 datoteke i ispisati ih na standardni izlaz (direktorijum MatrixMultiplication). 
- Za detalje oko kompajliranja i pokretanja re≈°enja, pogledati README.md datoteku.
- Implementirati:
	- Sekvencijalni algoritam za mno≈æenje dve kvadratne matrice. Meriti vreme izvr≈°avanja i ispisati ga na standardni izlaz.
	- OpenMPI C algoritam za mno≈æenje dve kvadratne matrice. Meriti vreme izvr≈°avanja i ispisati ga na standardni izlaz. Ostaviti moguƒánost ispisa rezultata. U simulacijama na jednom raƒçunaru OpenMPI re≈°enje ne mora biti br≈æe od sekvencijalnog.
]
]

---

## Korisni materijali

- [MPI standard dokumentacija](https://www.mpi-forum.org/docs/)
- [OpenMPI dokumentacija](https://www.open-mpi.org/doc/)
- Peter S. Pacheco "Parallel Programming with MPI"
- Victor Eijkhout "Parallel Computing" (besplatna onlajn verzija knjige)
- [MPI tutorijal](http://mpitutorial.com/)

--

class: center, middle, theend, hide-text
layout: false
background-image: url(../theend.gif)

</textarea> <script src="https://remarkjs.com/downloads/remark-latest.min.js"></script> <script>remark.macros.scale=function(percentage){var url=this;return'<div class="center"><img src="' +url+'" style="width: '+percentage+'" /></div>';};var slideshow=remark.create({highlightLanguage:'python',highlightStyle:'monokai',highlightLines:true,countIncrementalSlides:false,navigation:{scroll:false,}});</script> <script src="https://cdnjs.cloudflare.com/ajax/libs/mermaid/8.0.0/mermaid.min.js"></script> <script>mermaid.initialize({startOnLoad:true});</script>
    <script id="wpcp_disable_selection" type="text/javascript">
	//<![CDATA[
	  var image_save_msg='You Can Not Save images!';
	    var no_menu_msg='Context Menu disabled!';
	    var smessage = "Content is protected !!";
	  
	  function disableEnterKey(e)
	  {
	    if (e.ctrlKey){
	       var key;
	       if(window.event)
	            key = window.event.keyCode;     //IE
	       else
	            key = e.which;     //firefox (97)
	      //if (key != 17) alert(key);
	       if (key == 97 || key == 65 || key == 67 || key == 99 || key == 88 || key == 120 || key == 26 || key == 85  || key == 86 || key == 83 || key == 43)
	       {
	            show_wpcp_message('You are not allowed to copy content or view source');
	            return false;
	       }else
	         return true;
	       }
	  }
	  
	  function disable_copy(e)
	  {	
	    var elemtype = e.target.nodeName;
	    var isSafari = /Safari/.test(navigator.userAgent) && /Apple Computer/.test(navigator.vendor);
	    elemtype = elemtype.toUpperCase();
	    var checker_IMG = '';
	    if (elemtype == "IMG" && checker_IMG == 'checked' && e.detail >= 2) {show_wpcp_message(alertMsg_IMG);return false;}
	    if (elemtype != "TEXT" && elemtype != "TEXTAREA" && elemtype != "INPUT" && elemtype != "PASSWORD" && elemtype != "SELECT" && elemtype != "OPTION" && elemtype != "EMBED")
	    {
	      if (smessage !== "" && e.detail == 2)
	        show_wpcp_message(smessage);
	      
	      if (isSafari)
	        return true;
	      else
	        return false;
	    }	
	  }
	  function disable_copy_ie()
	  {
	    var elemtype = window.event.srcElement.nodeName;
	    elemtype = elemtype.toUpperCase();
	    if (elemtype == "IMG") {show_wpcp_message(alertMsg_IMG);return false;}
	    if (elemtype != "TEXT" && elemtype != "TEXTAREA" && elemtype != "INPUT" && elemtype != "PASSWORD" && elemtype != "SELECT" && elemtype != "OPTION" && elemtype != "EMBED")
	    {
	      //alert(navigator.userAgent.indexOf('MSIE'));
	        //if (smessage !== "") show_wpcp_message(smessage);
	      return false;
	    }
	  }	
	  function reEnable()
	  {
	    return true;
	  }
	  document.onkeydown = disableEnterKey;
	  document.onselectstart = disable_copy_ie;
	  if(navigator.userAgent.indexOf('MSIE')==-1)
	  {
	    document.onmousedown = disable_copy;
	    document.onclick = reEnable;
	  }
	  function disableSelection(target)
	  {
	      //For IE This code will work
	      if (typeof target.onselectstart!="undefined")
	      target.onselectstart = disable_copy_ie;
	      
	      //For Firefox This code will work
	      else if (typeof target.style.MozUserSelect!="undefined")
	      {target.style.MozUserSelect="none";}
	      
	      //All other  (ie: Opera) This code will work
	      else
	      target.onmousedown=function(){return false}
	      target.style.cursor = "default";
	  }
	  //Calling the JS function directly just after body load
	  window.onload = function(){disableSelection(document.body);};
	  //]]>
</script>
<script id="wpcp_disable_Right_Click" type="text/javascript">
	//<![CDATA[
	    document.ondragstart = function() { return false;}
	    /* ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
	    Disable context menu on images by GreenLava Version 1.0
	    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ */
	        function nocontext(e) {
	           return false;
	        }
	        document.oncontextmenu = nocontext;
	    //]]>
</script>
<style>
	.unselectable
	  {
	  -moz-user-select:none;
	  -webkit-user-select:none;
	  cursor: default;
	  }
	  html
	  {
	  -webkit-touch-callout: none;
	  -webkit-user-select: none;
	  -khtml-user-select: none;
	  -moz-user-select: none;
	  -ms-user-select: none;
	  user-select: none;
	  -webkit-tap-highlight-color: rgba(0,0,0,0);
	  }
</style>
<script id="wpcp_css_disable_selection" type="text/javascript">
	var e = document.getElementsByTagName('body')[0];
	  if(e)
	  {
	    e.setAttribute('unselectable',on);
	  }
</script>
<!--Lockers: user tracker for visibility filters-->
<script>
	window.__bp_session_timeout = '300';
	          window.__bp_session_freezing = 0;
	          window.bizpanda||(window.bizpanda={}),window.bizpanda.bp_can_store_localy=function(){return!1},window.bizpanda.bp_ut_get_cookie=function(e){for(var n=e+"=",i=document.cookie.split(";"),o=0;o<i.length;o++){for(var t=i[o];" "==t.charAt(0);)t=t.substring(1);if(0==t.indexOf(n))return decodeURIComponent(t.substring(n.length,t.length))}return!1},window.bizpanda.bp_ut_set_cookie=function(e,n,i){var o=new Date;o.setTime(o.getTime()+24*i*60*60*1e3);var t="expires="+o.toUTCString();document.cookie=e+"="+encodeURIComponent(n)+"; "+t+"; path=/"},window.bizpanda.bp_ut_get_obj=function(e){var n=null;if(!(n=window.bizpanda.bp_can_store_localy()?window.localStorage.getItem("bp_ut_session"):window.bizpanda.bp_ut_get_cookie("bp_ut_session")))return!1;n=(n=n.replace(/\-c\-/g,",")).replace(/\-q\-/g,'"');try{n=JSON.parse(n)}catch(e){return!1}return n.started+1e3*e<(new Date).getTime()&&(n=null),n},window.bizpanda.bp_ut_set_obj=function(e,n){e.started&&window.__bp_session_freezing||(e.started=(new Date).getTime()),(e=JSON.stringify(e))&&(e=(e=e.replace(/\"/g,"-q-")).replace(/\,/g,"-c-")),window.bizpanda.bp_can_store_localy()?window.localStorage.setItem("bp_ut_session",e):window.bizpanda.bp_ut_set_cookie("bp_ut_session",e,5e3)},window.bizpanda.bp_ut_count_pageview=function(){var e=window.bizpanda.bp_ut_get_obj(window.__bp_session_timeout);e||(e={}),e.pageviews||(e.pageviews=0),0===e.pageviews&&(e.referrer=document.referrer,e.landingPage=window.location.href,e.pageviews=0),e.pageviews++,window.bizpanda.bp_ut_set_obj(e)},window.bizpanda.bp_ut_count_locker_pageview=function(){var e=window.bizpanda.bp_ut_get_obj(window.__bp_timeout);e||(e={}),e.lockerPageviews||(e.lockerPageviews=0),e.lockerPageviews++,window.bizpanda.bp_ut_set_obj(e)},window.bizpanda.bp_ut_count_pageview();
</script>
<!-- / -->
<script type="text/javascript">
	jQuery(function(){omShortcodes.init(["buttons","tooltips","toggle","tabs","responsivebox","counter"]);});
</script>
<div id="wpcp-error-message" class="msgmsg-box-wpcp warning-wpcp hideme"><span>error: </span>Content is protected !!</div>
<script>
	var timeout_result;
	function show_wpcp_message(smessage)
	{
	  if (smessage !== "")
	    {
	    var smessage_text = '<span>Alert: </span>'+smessage;
	    document.getElementById("wpcp-error-message").innerHTML = smessage_text;
	    document.getElementById("wpcp-error-message").className = "msgmsg-box-wpcp warning-wpcp showme";
	    clearTimeout(timeout_result);
	    timeout_result = setTimeout(hide_message, 3000);
	    }
	}
	function hide_message()
	{
	  document.getElementById("wpcp-error-message").className = "msgmsg-box-wpcp warning-wpcp hideme";
	}
</script>
<style type="text/css">
	#wpcp-error-message {
	    direction: ltr;
	    text-align: center;
	    transition: opacity 900ms ease 0s;
	    z-index: 99999999;
	}
	.hideme {
	    opacity:0;
	    visibility: hidden;
	}
	.showme {
	    opacity:1;
	    visibility: visible;
	}
	.msgmsg-box-wpcp {
	  border-radius: 10px;
	  color: #555;
	  font-family: Tahoma;
	  font-size: 11px;
	  margin: 10px;
	  padding: 10px 36px;
	  position: fixed;
	  width: 255px;
	  top: 50%;
	    left: 50%;
	    margin-top: -10px;
	    margin-left: -130px;
	    -webkit-box-shadow: 0px 0px 34px 2px rgba(242,191,191,1);
	  -moz-box-shadow: 0px 0px 34px 2px rgba(242,191,191,1);
	  box-shadow: 0px 0px 34px 2px rgba(242,191,191,1);
	}
	.msgmsg-box-wpcp span {
	  font-weight:bold;
	  text-transform:uppercase;
	}
	.error-wpcp {		background:#ffecec url('../blockIcon/error.png') no-repeat 10px 50%;
	  border:1px solid #f5aca6;
	}
	.success {
	  background:#e9ffd9 url('../blockIcon/success.png') no-repeat 10px 50%;
	  border:1px solid #a6ca8a;
	}
	.warning-wpcp {
	  background:#ffecec url('../blockIcon/warning.png') no-repeat 10px 50%;
	  border:1px solid #f5aca6;
	}
	.notice {
	  background:#e3f7fc url('../blockIcon/notice.png') no-repeat 10px 50%;
	  border:1px solid #8ed9f6;
	}
</style>
<div style="display:none"></div></body></html>