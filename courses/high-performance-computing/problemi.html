<!DOCTYPE html><html><head><title>[High-performance computing (HPC)](/courses/#table-of-contents)</title><meta charset="utf-8"><style>@import url(https://fonts.googleapis.com/css?family=Playfair+Display);@import url(https://fonts.googleapis.com/css?family=Droid+Serif);@import url(https://fonts.googleapis.com/css?family=Open+Sans);@import url(https://fonts.googleapis.com/css?family=Work+Sans);@import url(https://fonts.googleapis.com/css?family=Muli);@import url(https://fonts.googleapis.com/css?family=Yanone+Kaffeesatz);@import url(https://fonts.googleapis.com/css?family=Ubuntu+Mono:400,700,400italic);@import url(https://fonts.googleapis.com/css?family=Roboto+Condensed);@import url(https://fonts.googleapis.com/css?family=PT+Sans);@import url(https://fonts.googleapis.com/css?family=Roboto);body{font-family:'Open Sans';color:#333;display:flex;height:100%}h1{font-family:"Playfair Display"}h2,h3,h4{font-family:'Yanone Kaffeesatz';font-weight:400}a{font-family:"PT Sans"}.remark-slide-content h1{font-size:3em}.remark-slide-content h2{font-size:2em}.remark-slide-content h3{font-size:1.6em}.remark-code,.remark-inline-code{font-family:'Ubuntu Mono'}.remark-code-line-highlighted{background-color:#373832}h1{text-shadow:-1px 0 #000,0 1px #000,1px 0 #000,0 -1px #000;-webkit-animation:pulse 7s forwards;-moz-animation:pulse 7s forwards;-o-animation:pulse 7s forwards;-ms-animation:pulse 7s forwards;animation:pulse 7s forwards}@-webkit-keyframes pulse{0%{color:#eee}100%{color:#666}}@-moz-keyframes pulse{0%{color:#eee}100%{color:#666}}@-ms-keyframes pulse{0%{color:#eee}100%{color:#666}}@-o-keyframes pulse{0%{color:#eee}100%{color:#666}}@keyframes pulse{0%{color:#eee}100%{color:#666}}h2{-webkit-animation:color-change 1.5s infinite;-moz-animation:color-change 1.5s infinite;-o-animation:color-change 1.5s infinite;-ms-animation:color-change 1.5s infinite;animation:color-change 1.5s infinite}@-webkit-keyframes color-change{0%{color:coral}50%{color:#5db9e0}100%{color:coral}}@-moz-keyframes color-change{0%{color:coral}50%{color:#5db9e0}100%{color:coral}}@-ms-keyframes color-change{0%{color:coral}50%{color:#5db9e0}100%{color:coral}}@-o-keyframes color-change{0%{color:coral}50%{color:#5db9e0}100%{color:coral}}@keyframes color-change{0%{color:coral}50%{color:#5db9e0}100%{color:coral}}h3,h4{color:#c7e2ee;text-shadow:-.7px 0 #4d4d4d,0 .7px #4d4d4d,.7px 0 #4d4d4d,0 -.7px #4d4d4d}.theend{background-color:#000;color:#000;text-shadow:0 0 20px #333}.inverse{background-color:#7e7e7e;color:#c5dae4;text-shadow:0 0 20px #333}.inverse h1{text-shadow:-1px 0 #000,0 1px #000,1px 0 #000,0 -1px #000;-webkit-animation:pulsei 7s forwards;-moz-animation:pulsei 7s forwards;-o-animation:pulsei 7s forwards;-ms-animation:pulsei 7s forwards;animation:pulsei 7s forwards}@-webkit-keyframes pulsei{0%{color:#eee}100%{color:#e9a46b}}@-moz-keyframes pulsei{0%{color:#eee}100%{color:#e9a46b}}@-ms-keyframes pulsei{0%{color:#eee}100%{color:#e9a46b}}@-o-keyframes pulsei{0%{color:#eee}100%{color:#e9a46b}}@keyframes pulsei{0%{color:#eee}100%{color:#e9a46b}}.inverse h2{text-shadow:-1px 0 #000,0 1px #000,1px 0 #000,0 -1px #000;-webkit-animation:color-changei 1s infinite;-moz-animation:color-changei 1s infinite;-o-animation:color-changei 1s infinite;-ms-animation:color-changei 1s infinite;animation:color-changei 1s infinite}@-webkit-keyframes color-changei{0%{color:#fff}50%{color:#7bbcd8}100%{color:#fff}}@-moz-keyframes color-changei{0%{color:#fff}50%{color:#7bbcd8}100%{color:#fff}}@-ms-keyframes color-changei{0%{color:#fff}50%{color:#7bbcd8}100%{color:#fff}}@-o-keyframes color-changei{0%{color:#fff}50%{color:#7bbcd8}100%{color:#fff}}@keyframes color-changei{0%{color:#fff}50%{color:#7bbcd8}100%{color:#fff}}a{color:#bb7917;text-decoration:none;transition:all .3s linear;-webkit-transition:all .3s linear;-moz-transition:all .3s linear;background:linear-gradient(to bottom,var(--mainColor) 0,var(--mainColor) 100%);background-position:0 100%;background-repeat:repeat-x;background-size:1.5px 1.5px}a:hover{background-image:url("data:image/svg+xml;charset=utf8,%3Csvg id='squiggle-link' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' xmlns:ev='http://www.w3.org/2001/xml-events' viewBox='0 0 20 4'%3E%3Cstyle type='text/css'%3E.squiggle{animation:shift .3s linear infinite;}@keyframes shift {from {transform:translateX(0);}to {transform:translateX(-20px);}}%3C/style%3E%3Cpath fill='none' stroke='%23ff9800' stroke-width='2' class='squiggle' d='M0,3.5 c 5,0,5,-3,10,-3 s 5,3,10,3 c 5,0,5,-3,10,-3 s 5,3,10,3'/%3E%3C/svg%3E");background-position:0 100%;background-size:auto 4px;background-repeat:repeat-x;text-decoration:none;color:#2d77d8;padding-left:10px}.inverse code{background-color:#7e7e7e}.hide-text{text-indent:-9999px}.remark-slide-container{transition:opacity 1s linear,right 1s ease-in-out;opacity:0;right:1000px}.remark-visible{transition:opacity 1s linear,right 1s ease-in-out;opacity:1;right:0}.remark-fading{z-index:9}.remark-visible~.remark-slide-container{right:-1000px}.remark-code,.remark-inline-code{font-family:'Ubuntu Mono'}.remark-code-line-highlighted{background-color:#373832}.remark-inline-code{font-weight:700}.remark-code-line-highlighted{font-weight:700;background-color:transparent;text-shadow:0 5px 15px rgba(255,106,20,.5),5px 0 15px rgba(255,106,20,.5),-5px 0 15px rgba(255,106,20,.5),0 -5px 15px rgba(255,106,20,.5)}.shade{padding:0}.shade{background-color:rgba(0,0,0,.7);color:#fff;width:100%;padding:1em 0}.shadelight{background-color:rgba(0,0,0,.5);color:#fff;width:100%;padding:0}.fgtransparent h1{color:rgba(255,255,255,.8)!important;text-shadow:none}.boxtitle1{padding:1em;text-align:left;border-left:rgba(255,255,255,.6) solid .5em;border-right:#fff solid 0}.nosplit>div:first-of-type{width:100%;height:100%;position:absolute;top:0;left:0}.split-20>div:first-of-type{width:20%;height:100%;position:absolute;top:0;left:0}.split-20>div:nth-of-type(2){width:80%;height:100%;position:absolute;top:0;right:0}.split-30>div:first-of-type{width:30%;height:100%;position:absolute;top:0;left:0}.split-30>div:nth-of-type(2){width:70%;height:100%;position:absolute;top:0;right:0}.split-50>div:first-of-type{width:50%;height:100%;position:absolute;top:0;left:0}.split-50>div:nth-of-type(2){width:50%;height:100%;position:absolute;top:0;right:0}.split-60>div:first-of-type{width:60%;height:100%;position:absolute;top:0;left:0}.split-60>div:nth-of-type(2){width:40%;height:100%;position:absolute;top:0;right:0}.split-70>div:first-of-type{width:70%;height:100%;position:absolute;top:0;left:0}.split-70>div:nth-of-type(2){width:30%;height:100%;position:absolute;top:0;right:0}.column_t1{background-color:#2aa9df;color:#fff}.column_t1 a{color:#b3e5fc}.column_t1 pre code{-webkit-box-shadow:0 0 55px 0 rgba(0,0,0,.75);-moz-box-shadow:0 0 55px 0 rgba(0,0,0,.75);box-shadow:0 0 55px 0 rgba(0,0,0,.75)}.uline{text-decoration:underline}.vmiddle{position:relative;top:50%;transform:translateY(-50%);padding:1em}.remark-slide-content h1{font-size:50px}.remark-slide-content h2{font-size:40px}.remark-slide-content h3{font-size:30px}.remark-slide-content img{width:100%}.remark-slide-content{padding-left:50px;padding-right:50px}.remark-slide-content{background-size:contain}blockquote{font-family:'Playfair Display';font-style:italic;font-size:110%;margin-top:10px;margin-bottom:10px;margin-left:50px;padding:1em 1em;background-color:#f5f5f5;border-left:5px solid #dbdbdb}.hljs-ln td.hljs-ln-numbers{-webkit-touch-callout:none;-webkit-user-select:none;-khtml-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;text-align:center;color:#ccc;border-right:1px solid #ccc;vertical-align:top;padding-right:5px}.hljs-ln td.hljs-ln-code{padding-left:10px}.lcol{width:49%;float:left}.lcol-narrow{width:39%;float:left}.lcol-narrow2{width:24%;float:left}.lcol-wide{width:59%;float:left}.lcol-wide2{width:74%;float:left}.rcol{width:49%;float:right}.rcol-narrow{width:39%;float:right}.rcol-narrow2{width:24%;float:right}.rcol-wide{width:59%;float:right}.rcol-wide2{width:74%;float:right}.wide{clear:both}.l-col{color:#777;width:20%;height:92%;float:left}.r-col{width:75%;float:right;padding-top:1em}code{-moz-border-radius:5px;-web-border-radius:5px;border-radius:5px;background:#e7e8e2}em{color:#c63235}.remark-slide-content{font-size:24px}ol>li,ul>li{margin-top:5px}.section{font-size:16px;float:right;clear:both}.small,.small .remark-code-line{font-size:60%}.medium,.medium .remark-code-line{font-size:80%}.condensed{line-height:.8em;font-size:90%}.size-90,.size-90 .remark-code-line{font-size:90%}.size-85,.size-85 .remark-code-line{font-size:85%}.multicode pre{margin-top:10px;margin-bottom:10px}.remark-slide img,.remark-slide pre{margin-top:25px;margin-bottom:25px}.attention{-moz-border-radius:5px;-web-border-radius:5px;border-radius:5px;background-color:#fbd2d2;text-align:center}.attention p{margin:10px}.footer{position:absolute;bottom:12px;left:20px;font-size:70%}.footer.small{font-size:50%}.footer,li>p{margin:0}.ref{color:red;vertical-align:super;font-size:70%}.created{font-size:60%;margin-bottom:5em;font-family:"Playfair Display";font-size:16px;font-style:normal;font-variant:normal;font-weight:400;line-height:22px}.created:before{content:"üë®üèª‚Äçüíª‚ûô "}.noselect{-webkit-touch-callout:none;-webkit-user-select:none;-khtml-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.overlay{box-shadow:inset 0 0 0 9999px rgba(0,0,0,.35)}.container{height:100%;width:100%;display:flex;position:fixed;align-items:center;justify-content:center}table{border-collapse:collapse;border-spacing:0;empty-cells:show;border:1px solid #cbcbcb}.center-table table{margin:0 auto}table caption{color:#000;font:italic 85%/1 arial,sans-serif;padding:1em 0;text-align:center}table td,table th{border-left:1px solid #cbcbcb;border-width:0 0 0 1px;font-size:inherit;margin:0;overflow:visible;padding:.5em 1em}table td:first-child,table th:first-child{border-left-width:0}table thead{background-color:#e0e0e0;color:#000;text-align:left;vertical-align:bottom}table td{background-color:transparent}table-odd td{background-color:#f2f2f2}table tr:nth-child(2n-1) td{background-color:#f2f2f2}table td{border-bottom:1px solid #cbcbcb}table tbody>tr:last-child>td{border-bottom-width:0}table-horizontal td,table-horizontal th{border-width:0 0 1px 0;border-bottom:1px solid #cbcbcb}table-horizontal tbody>tr:last-child>td{border-bottom-width:0}/*! bulma.io v0.4.2 | MIT License | github.com/jgthms/bulma */@-webkit-keyframes spinAround{from{-webkit-transform:rotate(0);transform:rotate(0)}to{-webkit-transform:rotate(359deg);transform:rotate(359deg)}}@keyframes spinAround{from{-webkit-transform:rotate(0);transform:rotate(0)}to{-webkit-transform:rotate(359deg);transform:rotate(359deg)}}/*! minireset.css v0.0.2 | MIT License | github.com/jgthms/minireset.css */p{margin:0;padding:0}.message{font-family:'Playfair Display';background-color:#f5f5f5;border-radius:3px;font-size:1rem}.message:not(:last-child){margin-bottom:1.5rem}.message.is-white{background-color:#fff}.message.is-white .message-header{background-color:#fff;color:#0a0a0a}.message.is-white .message-body{border-color:#fff;color:#4d4d4d}.message.is-black{background-color:#fafafa}.message.is-black .message-header{background-color:#0a0a0a;color:#fff}.message.is-black .message-body{border-color:#0a0a0a;color:#090909}.message.is-light{background-color:#fafafa}.message.is-light .message-header{background-color:#f5f5f5;color:#363636}.message.is-light .message-body{border-color:#f5f5f5;color:#505050}.message.is-dark{background-color:#fafafa}.message.is-dark .message-header{background-color:#363636;color:#f5f5f5}.message.is-dark .message-body{border-color:#363636;color:#2a2a2a}.message.is-primary{background-color:#f5fffd}.message.is-primary .message-header{background-color:#00d1b2;color:#fff}.message.is-primary .message-body{border-color:#00d1b2;color:#021310}.message.is-info{background-color:#f6f9fe}.message.is-info .message-header{background-color:#3273dc;color:#fff}.message.is-info .message-body{border-color:#3273dc;color:#22509a}.message.is-success{background-color:#f6fef9}.message.is-success .message-header{background-color:#23d160;color:#fff}.message.is-success .message-body{border-color:#23d160;color:#0e301a}.message.is-warning{background-color:#fffdf5}.message.is-warning .message-header{background-color:#ffdd57;color:rgba(0,0,0,.7)}.message.is-warning .message-body{border-color:#ffdd57;color:#3b3108}.message.is-danger{background-color:#fff5f7}.message.is-danger .message-header{background-color:#ff3860;color:#fff}.message.is-danger .message-body{border-color:#ff3860;color:#cd0930}.message-header{-webkit-box-align:center;-ms-flex-align:center;align-items:center;background-color:#4a4a4a;border-radius:3px 3px 0 0;color:#fff;display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-pack:justify;-ms-flex-pack:justify;justify-content:space-between;line-height:1.25;padding:.5em .75em;position:relative}.message-header a,.message-header strong{color:inherit}.message-header a{text-decoration:underline}.message-header .delete{-webkit-box-flex:0;-ms-flex-positive:0;flex-grow:0;-ms-flex-negative:0;flex-shrink:0;margin-left:.75em}.message-header+.message-body{border-top-left-radius:0;border-top-right-radius:0;border-top:none}.message-body{border:1px solid #dbdbdb;border-radius:3px;color:#4a4a4a;padding:.1em .5em}.message-body a,.message-body strong{color:inherit}.message-body a{text-decoration:underline}.message-body code,.message-body pre{background:#fff}.message-body pre code{background:0 0}.column{display:block;-ms-flex-preferred-size:0;flex-basis:0;-webkit-box-flex:1;-ms-flex-positive:1;flex-grow:1;-ms-flex-negative:1;flex-shrink:1;padding:.75rem}.columns.is-mobile>.column.is-narrow{-webkit-box-flex:0;-ms-flex:none;flex:none}.columns.is-mobile>.column.is-full{-webkit-box-flex:0;-ms-flex:none;flex:none;width:100%}.columns.is-mobile>.column.is-three-quarters{-webkit-box-flex:0;-ms-flex:none;flex:none;width:75%}.columns.is-mobile>.column.is-two-thirds{-webkit-box-flex:0;-ms-flex:none;flex:none;width:66.6666%}.columns.is-mobile>.column.is-half{-webkit-box-flex:0;-ms-flex:none;flex:none;width:50%}.columns.is-mobile>.column.is-one-third{-webkit-box-flex:0;-ms-flex:none;flex:none;width:33.3333%}.columns.is-mobile>.column.is-one-quarter{-webkit-box-flex:0;-ms-flex:none;flex:none;width:25%}.columns.is-mobile>.column.is-offset-three-quarters{margin-left:75%}.columns.is-mobile>.column.is-offset-two-thirds{margin-left:66.6666%}.columns.is-mobile>.column.is-offset-half{margin-left:50%}.columns.is-mobile>.column.is-offset-one-third{margin-left:33.3333%}.columns.is-mobile>.column.is-offset-one-quarter{margin-left:25%}.columns.is-mobile>.column.is-1{-webkit-box-flex:0;-ms-flex:none;flex:none;width:8.33333%}.columns.is-mobile>.column.is-offset-1{margin-left:8.33333%}.columns.is-mobile>.column.is-2{-webkit-box-flex:0;-ms-flex:none;flex:none;width:16.66667%}.columns.is-mobile>.column.is-offset-2{margin-left:16.66667%}.columns.is-mobile>.column.is-3{-webkit-box-flex:0;-ms-flex:none;flex:none;width:25%}.columns.is-mobile>.column.is-offset-3{margin-left:25%}.columns.is-mobile>.column.is-4{-webkit-box-flex:0;-ms-flex:none;flex:none;width:33.33333%}.columns.is-mobile>.column.is-offset-4{margin-left:33.33333%}.columns.is-mobile>.column.is-5{-webkit-box-flex:0;-ms-flex:none;flex:none;width:41.66667%}.columns.is-mobile>.column.is-offset-5{margin-left:41.66667%}.columns.is-mobile>.column.is-6{-webkit-box-flex:0;-ms-flex:none;flex:none;width:50%}.columns.is-mobile>.column.is-offset-6{margin-left:50%}.columns.is-mobile>.column.is-7{-webkit-box-flex:0;-ms-flex:none;flex:none;width:58.33333%}.columns.is-mobile>.column.is-offset-7{margin-left:58.33333%}.columns.is-mobile>.column.is-8{-webkit-box-flex:0;-ms-flex:none;flex:none;width:66.66667%}.columns.is-mobile>.column.is-offset-8{margin-left:66.66667%}.columns.is-mobile>.column.is-9{-webkit-box-flex:0;-ms-flex:none;flex:none;width:75%}.columns.is-mobile>.column.is-offset-9{margin-left:75%}.columns.is-mobile>.column.is-10{-webkit-box-flex:0;-ms-flex:none;flex:none;width:83.33333%}.columns.is-mobile>.column.is-offset-10{margin-left:83.33333%}.columns.is-mobile>.column.is-11{-webkit-box-flex:0;-ms-flex:none;flex:none;width:91.66667%}.columns.is-mobile>.column.is-offset-11{margin-left:91.66667%}.columns.is-mobile>.column.is-12{-webkit-box-flex:0;-ms-flex:none;flex:none;width:100%}.columns.is-mobile>.column.is-offset-12{margin-left:100%}@media screen and (max-width:768px){.column.is-narrow-mobile{-webkit-box-flex:0;-ms-flex:none;flex:none}.column.is-full-mobile{-webkit-box-flex:0;-ms-flex:none;flex:none;width:100%}.column.is-three-quarters-mobile{-webkit-box-flex:0;-ms-flex:none;flex:none;width:75%}.column.is-two-thirds-mobile{-webkit-box-flex:0;-ms-flex:none;flex:none;width:66.6666%}.column.is-half-mobile{-webkit-box-flex:0;-ms-flex:none;flex:none;width:50%}.column.is-one-third-mobile{-webkit-box-flex:0;-ms-flex:none;flex:none;width:33.3333%}.column.is-one-quarter-mobile{-webkit-box-flex:0;-ms-flex:none;flex:none;width:25%}.column.is-offset-three-quarters-mobile{margin-left:75%}.column.is-offset-two-thirds-mobile{margin-left:66.6666%}.column.is-offset-half-mobile{margin-left:50%}.column.is-offset-one-third-mobile{margin-left:33.3333%}.column.is-offset-one-quarter-mobile{margin-left:25%}.column.is-1-mobile{-webkit-box-flex:0;-ms-flex:none;flex:none;width:8.33333%}.column.is-offset-1-mobile{margin-left:8.33333%}.column.is-2-mobile{-webkit-box-flex:0;-ms-flex:none;flex:none;width:16.66667%}.column.is-offset-2-mobile{margin-left:16.66667%}.column.is-3-mobile{-webkit-box-flex:0;-ms-flex:none;flex:none;width:25%}.column.is-offset-3-mobile{margin-left:25%}.column.is-4-mobile{-webkit-box-flex:0;-ms-flex:none;flex:none;width:33.33333%}.column.is-offset-4-mobile{margin-left:33.33333%}.column.is-5-mobile{-webkit-box-flex:0;-ms-flex:none;flex:none;width:41.66667%}.column.is-offset-5-mobile{margin-left:41.66667%}.column.is-6-mobile{-webkit-box-flex:0;-ms-flex:none;flex:none;width:50%}.column.is-offset-6-mobile{margin-left:50%}.column.is-7-mobile{-webkit-box-flex:0;-ms-flex:none;flex:none;width:58.33333%}.column.is-offset-7-mobile{margin-left:58.33333%}.column.is-8-mobile{-webkit-box-flex:0;-ms-flex:none;flex:none;width:66.66667%}.column.is-offset-8-mobile{margin-left:66.66667%}.column.is-9-mobile{-webkit-box-flex:0;-ms-flex:none;flex:none;width:75%}.column.is-offset-9-mobile{margin-left:75%}.column.is-10-mobile{-webkit-box-flex:0;-ms-flex:none;flex:none;width:83.33333%}.column.is-offset-10-mobile{margin-left:83.33333%}.column.is-11-mobile{-webkit-box-flex:0;-ms-flex:none;flex:none;width:91.66667%}.column.is-offset-11-mobile{margin-left:91.66667%}.column.is-12-mobile{-webkit-box-flex:0;-ms-flex:none;flex:none;width:100%}.column.is-offset-12-mobile{margin-left:100%}}@media screen and (min-width:769px),print{.column.is-narrow,.column.is-narrow-tablet{-webkit-box-flex:0;-ms-flex:none;flex:none}.column.is-full,.column.is-full-tablet{-webkit-box-flex:0;-ms-flex:none;flex:none;width:100%}.column.is-three-quarters,.column.is-three-quarters-tablet{-webkit-box-flex:0;-ms-flex:none;flex:none;width:75%}.column.is-two-thirds,.column.is-two-thirds-tablet{-webkit-box-flex:0;-ms-flex:none;flex:none;width:66.6666%}.column.is-half,.column.is-half-tablet{-webkit-box-flex:0;-ms-flex:none;flex:none;width:50%}.column.is-one-third,.column.is-one-third-tablet{-webkit-box-flex:0;-ms-flex:none;flex:none;width:33.3333%}.column.is-one-quarter,.column.is-one-quarter-tablet{-webkit-box-flex:0;-ms-flex:none;flex:none;width:25%}.column.is-offset-three-quarters,.column.is-offset-three-quarters-tablet{margin-left:75%}.column.is-offset-two-thirds,.column.is-offset-two-thirds-tablet{margin-left:66.6666%}.column.is-offset-half,.column.is-offset-half-tablet{margin-left:50%}.column.is-offset-one-third,.column.is-offset-one-third-tablet{margin-left:33.3333%}.column.is-offset-one-quarter,.column.is-offset-one-quarter-tablet{margin-left:25%}.column.is-1,.column.is-1-tablet{-webkit-box-flex:0;-ms-flex:none;flex:none;width:8.33333%}.column.is-offset-1,.column.is-offset-1-tablet{margin-left:8.33333%}.column.is-2,.column.is-2-tablet{-webkit-box-flex:0;-ms-flex:none;flex:none;width:16.66667%}.column.is-offset-2,.column.is-offset-2-tablet{margin-left:16.66667%}.column.is-3,.column.is-3-tablet{-webkit-box-flex:0;-ms-flex:none;flex:none;width:25%}.column.is-offset-3,.column.is-offset-3-tablet{margin-left:25%}.column.is-4,.column.is-4-tablet{-webkit-box-flex:0;-ms-flex:none;flex:none;width:33.33333%}.column.is-offset-4,.column.is-offset-4-tablet{margin-left:33.33333%}.column.is-5,.column.is-5-tablet{-webkit-box-flex:0;-ms-flex:none;flex:none;width:41.66667%}.column.is-offset-5,.column.is-offset-5-tablet{margin-left:41.66667%}.column.is-6,.column.is-6-tablet{-webkit-box-flex:0;-ms-flex:none;flex:none;width:50%}.column.is-offset-6,.column.is-offset-6-tablet{margin-left:50%}.column.is-7,.column.is-7-tablet{-webkit-box-flex:0;-ms-flex:none;flex:none;width:58.33333%}.column.is-offset-7,.column.is-offset-7-tablet{margin-left:58.33333%}.column.is-8,.column.is-8-tablet{-webkit-box-flex:0;-ms-flex:none;flex:none;width:66.66667%}.column.is-offset-8,.column.is-offset-8-tablet{margin-left:66.66667%}.column.is-9,.column.is-9-tablet{-webkit-box-flex:0;-ms-flex:none;flex:none;width:75%}.column.is-offset-9,.column.is-offset-9-tablet{margin-left:75%}.column.is-10,.column.is-10-tablet{-webkit-box-flex:0;-ms-flex:none;flex:none;width:83.33333%}.column.is-offset-10,.column.is-offset-10-tablet{margin-left:83.33333%}.column.is-11,.column.is-11-tablet{-webkit-box-flex:0;-ms-flex:none;flex:none;width:91.66667%}.column.is-offset-11,.column.is-offset-11-tablet{margin-left:91.66667%}.column.is-12,.column.is-12-tablet{-webkit-box-flex:0;-ms-flex:none;flex:none;width:100%}.column.is-offset-12,.column.is-offset-12-tablet{margin-left:100%}}@media screen and (max-width:999px){.column.is-narrow-touch{-webkit-box-flex:0;-ms-flex:none;flex:none}.column.is-full-touch{-webkit-box-flex:0;-ms-flex:none;flex:none;width:100%}.column.is-three-quarters-touch{-webkit-box-flex:0;-ms-flex:none;flex:none;width:75%}.column.is-two-thirds-touch{-webkit-box-flex:0;-ms-flex:none;flex:none;width:66.6666%}.column.is-half-touch{-webkit-box-flex:0;-ms-flex:none;flex:none;width:50%}.column.is-one-third-touch{-webkit-box-flex:0;-ms-flex:none;flex:none;width:33.3333%}.column.is-one-quarter-touch{-webkit-box-flex:0;-ms-flex:none;flex:none;width:25%}.column.is-offset-three-quarters-touch{margin-left:75%}.column.is-offset-two-thirds-touch{margin-left:66.6666%}.column.is-offset-half-touch{margin-left:50%}.column.is-offset-one-third-touch{margin-left:33.3333%}.column.is-offset-one-quarter-touch{margin-left:25%}.column.is-1-touch{-webkit-box-flex:0;-ms-flex:none;flex:none;width:8.33333%}.column.is-offset-1-touch{margin-left:8.33333%}.column.is-2-touch{-webkit-box-flex:0;-ms-flex:none;flex:none;width:16.66667%}.column.is-offset-2-touch{margin-left:16.66667%}.column.is-3-touch{-webkit-box-flex:0;-ms-flex:none;flex:none;width:25%}.column.is-offset-3-touch{margin-left:25%}.column.is-4-touch{-webkit-box-flex:0;-ms-flex:none;flex:none;width:33.33333%}.column.is-offset-4-touch{margin-left:33.33333%}.column.is-5-touch{-webkit-box-flex:0;-ms-flex:none;flex:none;width:41.66667%}.column.is-offset-5-touch{margin-left:41.66667%}.column.is-6-touch{-webkit-box-flex:0;-ms-flex:none;flex:none;width:50%}.column.is-offset-6-touch{margin-left:50%}.column.is-7-touch{-webkit-box-flex:0;-ms-flex:none;flex:none;width:58.33333%}.column.is-offset-7-touch{margin-left:58.33333%}.column.is-8-touch{-webkit-box-flex:0;-ms-flex:none;flex:none;width:66.66667%}.column.is-offset-8-touch{margin-left:66.66667%}.column.is-9-touch{-webkit-box-flex:0;-ms-flex:none;flex:none;width:75%}.column.is-offset-9-touch{margin-left:75%}.column.is-10-touch{-webkit-box-flex:0;-ms-flex:none;flex:none;width:83.33333%}.column.is-offset-10-touch{margin-left:83.33333%}.column.is-11-touch{-webkit-box-flex:0;-ms-flex:none;flex:none;width:91.66667%}.column.is-offset-11-touch{margin-left:91.66667%}.column.is-12-touch{-webkit-box-flex:0;-ms-flex:none;flex:none;width:100%}.column.is-offset-12-touch{margin-left:100%}}@media screen and (min-width:1000px){.column.is-narrow-desktop{-webkit-box-flex:0;-ms-flex:none;flex:none}.column.is-full-desktop{-webkit-box-flex:0;-ms-flex:none;flex:none;width:100%}.column.is-three-quarters-desktop{-webkit-box-flex:0;-ms-flex:none;flex:none;width:75%}.column.is-two-thirds-desktop{-webkit-box-flex:0;-ms-flex:none;flex:none;width:66.6666%}.column.is-half-desktop{-webkit-box-flex:0;-ms-flex:none;flex:none;width:50%}.column.is-one-third-desktop{-webkit-box-flex:0;-ms-flex:none;flex:none;width:33.3333%}.column.is-one-quarter-desktop{-webkit-box-flex:0;-ms-flex:none;flex:none;width:25%}.column.is-offset-three-quarters-desktop{margin-left:75%}.column.is-offset-two-thirds-desktop{margin-left:66.6666%}.column.is-offset-half-desktop{margin-left:50%}.column.is-offset-one-third-desktop{margin-left:33.3333%}.column.is-offset-one-quarter-desktop{margin-left:25%}.column.is-1-desktop{-webkit-box-flex:0;-ms-flex:none;flex:none;width:8.33333%}.column.is-offset-1-desktop{margin-left:8.33333%}.column.is-2-desktop{-webkit-box-flex:0;-ms-flex:none;flex:none;width:16.66667%}.column.is-offset-2-desktop{margin-left:16.66667%}.column.is-3-desktop{-webkit-box-flex:0;-ms-flex:none;flex:none;width:25%}.column.is-offset-3-desktop{margin-left:25%}.column.is-4-desktop{-webkit-box-flex:0;-ms-flex:none;flex:none;width:33.33333%}.column.is-offset-4-desktop{margin-left:33.33333%}.column.is-5-desktop{-webkit-box-flex:0;-ms-flex:none;flex:none;width:41.66667%}.column.is-offset-5-desktop{margin-left:41.66667%}.column.is-6-desktop{-webkit-box-flex:0;-ms-flex:none;flex:none;width:50%}.column.is-offset-6-desktop{margin-left:50%}.column.is-7-desktop{-webkit-box-flex:0;-ms-flex:none;flex:none;width:58.33333%}.column.is-offset-7-desktop{margin-left:58.33333%}.column.is-8-desktop{-webkit-box-flex:0;-ms-flex:none;flex:none;width:66.66667%}.column.is-offset-8-desktop{margin-left:66.66667%}.column.is-9-desktop{-webkit-box-flex:0;-ms-flex:none;flex:none;width:75%}.column.is-offset-9-desktop{margin-left:75%}.column.is-10-desktop{-webkit-box-flex:0;-ms-flex:none;flex:none;width:83.33333%}.column.is-offset-10-desktop{margin-left:83.33333%}.column.is-11-desktop{-webkit-box-flex:0;-ms-flex:none;flex:none;width:91.66667%}.column.is-offset-11-desktop{margin-left:91.66667%}.column.is-12-desktop{-webkit-box-flex:0;-ms-flex:none;flex:none;width:100%}.column.is-offset-12-desktop{margin-left:100%}}@media screen and (min-width:1192px){.column.is-narrow-widescreen{-webkit-box-flex:0;-ms-flex:none;flex:none}.column.is-full-widescreen{-webkit-box-flex:0;-ms-flex:none;flex:none;width:100%}.column.is-three-quarters-widescreen{-webkit-box-flex:0;-ms-flex:none;flex:none;width:75%}.column.is-two-thirds-widescreen{-webkit-box-flex:0;-ms-flex:none;flex:none;width:66.6666%}.column.is-half-widescreen{-webkit-box-flex:0;-ms-flex:none;flex:none;width:50%}.column.is-one-third-widescreen{-webkit-box-flex:0;-ms-flex:none;flex:none;width:33.3333%}.column.is-one-quarter-widescreen{-webkit-box-flex:0;-ms-flex:none;flex:none;width:25%}.column.is-offset-three-quarters-widescreen{margin-left:75%}.column.is-offset-two-thirds-widescreen{margin-left:66.6666%}.column.is-offset-half-widescreen{margin-left:50%}.column.is-offset-one-third-widescreen{margin-left:33.3333%}.column.is-offset-one-quarter-widescreen{margin-left:25%}.column.is-1-widescreen{-webkit-box-flex:0;-ms-flex:none;flex:none;width:8.33333%}.column.is-offset-1-widescreen{margin-left:8.33333%}.column.is-2-widescreen{-webkit-box-flex:0;-ms-flex:none;flex:none;width:16.66667%}.column.is-offset-2-widescreen{margin-left:16.66667%}.column.is-3-widescreen{-webkit-box-flex:0;-ms-flex:none;flex:none;width:25%}.column.is-offset-3-widescreen{margin-left:25%}.column.is-4-widescreen{-webkit-box-flex:0;-ms-flex:none;flex:none;width:33.33333%}.column.is-offset-4-widescreen{margin-left:33.33333%}.column.is-5-widescreen{-webkit-box-flex:0;-ms-flex:none;flex:none;width:41.66667%}.column.is-offset-5-widescreen{margin-left:41.66667%}.column.is-6-widescreen{-webkit-box-flex:0;-ms-flex:none;flex:none;width:50%}.column.is-offset-6-widescreen{margin-left:50%}.column.is-7-widescreen{-webkit-box-flex:0;-ms-flex:none;flex:none;width:58.33333%}.column.is-offset-7-widescreen{margin-left:58.33333%}.column.is-8-widescreen{-webkit-box-flex:0;-ms-flex:none;flex:none;width:66.66667%}.column.is-offset-8-widescreen{margin-left:66.66667%}.column.is-9-widescreen{-webkit-box-flex:0;-ms-flex:none;flex:none;width:75%}.column.is-offset-9-widescreen{margin-left:75%}.column.is-10-widescreen{-webkit-box-flex:0;-ms-flex:none;flex:none;width:83.33333%}.column.is-offset-10-widescreen{margin-left:83.33333%}.column.is-11-widescreen{-webkit-box-flex:0;-ms-flex:none;flex:none;width:91.66667%}.column.is-offset-11-widescreen{margin-left:91.66667%}.column.is-12-widescreen{-webkit-box-flex:0;-ms-flex:none;flex:none;width:100%}.column.is-offset-12-widescreen{margin-left:100%}}@media screen and (min-width:1384px){.column.is-narrow-fullhd{-webkit-box-flex:0;-ms-flex:none;flex:none}.column.is-full-fullhd{-webkit-box-flex:0;-ms-flex:none;flex:none;width:100%}.column.is-three-quarters-fullhd{-webkit-box-flex:0;-ms-flex:none;flex:none;width:75%}.column.is-two-thirds-fullhd{-webkit-box-flex:0;-ms-flex:none;flex:none;width:66.6666%}.column.is-half-fullhd{-webkit-box-flex:0;-ms-flex:none;flex:none;width:50%}.column.is-one-third-fullhd{-webkit-box-flex:0;-ms-flex:none;flex:none;width:33.3333%}.column.is-one-quarter-fullhd{-webkit-box-flex:0;-ms-flex:none;flex:none;width:25%}.column.is-offset-three-quarters-fullhd{margin-left:75%}.column.is-offset-two-thirds-fullhd{margin-left:66.6666%}.column.is-offset-half-fullhd{margin-left:50%}.column.is-offset-one-third-fullhd{margin-left:33.3333%}.column.is-offset-one-quarter-fullhd{margin-left:25%}.column.is-1-fullhd{-webkit-box-flex:0;-ms-flex:none;flex:none;width:8.33333%}.column.is-offset-1-fullhd{margin-left:8.33333%}.column.is-2-fullhd{-webkit-box-flex:0;-ms-flex:none;flex:none;width:16.66667%}.column.is-offset-2-fullhd{margin-left:16.66667%}.column.is-3-fullhd{-webkit-box-flex:0;-ms-flex:none;flex:none;width:25%}.column.is-offset-3-fullhd{margin-left:25%}.column.is-4-fullhd{-webkit-box-flex:0;-ms-flex:none;flex:none;width:33.33333%}.column.is-offset-4-fullhd{margin-left:33.33333%}.column.is-5-fullhd{-webkit-box-flex:0;-ms-flex:none;flex:none;width:41.66667%}.column.is-offset-5-fullhd{margin-left:41.66667%}.column.is-6-fullhd{-webkit-box-flex:0;-ms-flex:none;flex:none;width:50%}.column.is-offset-6-fullhd{margin-left:50%}.column.is-7-fullhd{-webkit-box-flex:0;-ms-flex:none;flex:none;width:58.33333%}.column.is-offset-7-fullhd{margin-left:58.33333%}.column.is-8-fullhd{-webkit-box-flex:0;-ms-flex:none;flex:none;width:66.66667%}.column.is-offset-8-fullhd{margin-left:66.66667%}.column.is-9-fullhd{-webkit-box-flex:0;-ms-flex:none;flex:none;width:75%}.column.is-offset-9-fullhd{margin-left:75%}.column.is-10-fullhd{-webkit-box-flex:0;-ms-flex:none;flex:none;width:83.33333%}.column.is-offset-10-fullhd{margin-left:83.33333%}.column.is-11-fullhd{-webkit-box-flex:0;-ms-flex:none;flex:none;width:91.66667%}.column.is-offset-11-fullhd{margin-left:91.66667%}.column.is-12-fullhd{-webkit-box-flex:0;-ms-flex:none;flex:none;width:100%}.column.is-offset-12-fullhd{margin-left:100%}}.columns{margin-left:-.75rem;margin-right:-.75rem;margin-top:-.75rem}.columns:last-child{margin-bottom:-.75rem}.columns:not(:last-child){margin-bottom:.75rem}.columns.is-centered{-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center}.columns.is-gapless{margin-left:0;margin-right:0;margin-top:0}.columns.is-gapless:last-child{margin-bottom:0}.columns.is-gapless:not(:last-child){margin-bottom:1.5rem}.columns.is-gapless>.column{margin:0;padding:0}@media screen and (min-width:769px){.columns.is-grid{-ms-flex-wrap:wrap;flex-wrap:wrap}.columns.is-grid>.column{max-width:33.3333%;padding:.75rem;width:33.3333%}.columns.is-grid>.column+.column{margin-left:0}}.columns.is-mobile{display:-webkit-box;display:-ms-flexbox;display:flex}.columns.is-multiline{-ms-flex-wrap:wrap;flex-wrap:wrap}.columns.is-vcentered{-webkit-box-align:center;-ms-flex-align:center;align-items:center}@media screen and (min-width:769px){.columns:not(.is-desktop){display:-webkit-box;display:-ms-flexbox;display:flex}}@media screen and (min-width:1000px){.columns.is-desktop{display:-webkit-box;display:-ms-flexbox;display:flex}}.label{-webkit-border-radius:4px;-moz-border-radius:4px;border-radius:4px;padding:3px 5px 4px;color:#fff;font-weight:700;text-transform:uppercase;white-space:nowrap;font-size:.75em;left:10px;top:-15px;position:relative}div.box p,div.box ul{position:relative;top:-20px}.box.moody .label{background-color:#f89406}.box.happy .label{background-color:#46a546}.box.angry .label{background-color:#c43c35}code,div.box{-webkit-border-radius:4px;-moz-border-radius:4px;border-radius:4px;padding:0 5px;border:1px solid #ccc;margin-bottom:25px;font-size:.9em}.angry{background-color:#ffd7d5;border-color:#c43c35}.happy{background-color:#c0e0c0;border-color:#46a546}.moody{background-color:#ffecd1;border-color:#f89406}@page{size:1210px 681px;margin:0}@media print{.remark-slide-scaler{width:100%!important;height:100%!important;transform:scale(1)!important;top:0!important;left:0!important}}</style><script type="text/javascript" async src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/latest.js?config=TeX-MML-AM_CHTML" async></script> <script src="https://cdn.jsdelivr.net/npm/highlightjs-line-numbers.js@2.6.0/dist/highlightjs-line-numbers.min.js"></script> <script>hljs.initHighlightingOnLoad();hljs.initLineNumbersOnLoad();</script> <link rel="stylesheet2" href="https://cdnjs.cloudflare.com/ajax/libs/mermaid/7.0.10/mermaid.min.css"> <script>mermaid.initialize({startOnLoad:true});</script> <script async src="https://www.googletagmanager.com/gtag/js?id=UA-127734928-1"></script> <script>window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments);} gtag('js',new Date());gtag('config','UA-127734928-1');</script> <script>(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)})(window,document,'script','//www.google-analytics.com/analytics.js','ga');ga('create','UA-127734928-1','auto');ga('send','pageview');</script> </head><body> <script>if(window.location.search.match(/print-pdf/gi)){var link=document.createElement('link');link.rel='stylesheet';link.type='text/css';link.href='../pdf.css';document.getElementsByTagName('head')[0].appendChild(link);}</script> <textarea id="source">class: center, middle

## [High-performance computing (HPC)](/courses/#table-of-contents)
### Problemi


.author[[Milovan Toma≈°eviƒá](https://www.milovantomasevic.com/)]

.small[</br>[üåê‚ûô milovantomasevic.com](https://milovantomasevic.com)</br> [‚úé‚ûô mt@milovantomasevic.com](mailto:mt@milovantomasevic.com)]



.created[25.03.2019 u 16:59]


---



class: split-20 nopadding
background-image: url(../key.jpg)

.column_t2.center[.vmiddle[
.fgtransparent[
![:scale 80%](../zahvalnica.png)
]
]]
.column_t2[.vmiddle.nopadding[
.shadelight[.boxtitle1[
.small[
## Acknowledgements

#### University of Novi Sad | Serbia

- [Doc. dr Veljko Petroviƒá ](http://www.acs.uns.ac.rs/en/user/30) & [ms Gorana Gojiƒá](http://www.acs.uns.ac.rs/en/user/49)
- [Faculty of Technical Sciences](http://ftn.uns.ac.rs/)
- [Computing and Control Department | Chair for Applied Computer Sciences](http://www.acs.uns.ac.rs/en)
]]]
]]

.footer.small[
- #### Slides are created according to sources in the literature & Acknowledgements
]

---

class: center, middle, inverse

# Za≈°to koristimo `HPC`? 

## tipiƒçni problemi `HPC`-a

---
layout: true

.section[[Domen problema](#sadrzaj)]

---

## `HPC` kao priznanje neuspeha

- Na jedan veoma stvaran naƒçin, `HPC` je znak da smo se predali.
- Reformulacija problema nije radila.
- Lukavi algoritmi nisu radili.
- Sve ≈°to nam je ostalo jeste da napadnemo problem sa mnogo vi≈°e resursa nego ≈°to je to normalno dostupno.
- `HPC` je, tako, zadnja linija odbrane kada se re≈°ava nekakav problem.

---

## `HPC` i ekonomija

- `HPC` je takoƒëe ograniƒçen neoƒçekivanim ekonomskim faktorima.
- Vi mo≈æete liƒçni raƒçunar namestiti da radi ≈°ta god ≈æelite: ako hoƒáete da uposlite 100% CPU-a generi≈°uƒái svetove kroz Dwarf Fortress niko se neƒáe buniti. U najgorem slu≈°aju tro≈°ite malo dodatne struje.
- `HPC` klasteri i super-raƒçunari su drugaƒçiji: ozbiljne instalacije imaju tro≈°kove izvr≈°avanja koji znaƒçe da se svaki minut mora naplaƒáivati.
- Stoga `HPC` se uglavnom koristi ili za projekte koje su interesantni vladama ili velikim kompanijama.

---

## Neke popularne primene

- Kriptanaliza
- Nauƒçna simulacija
    - Simulacija fluida
    - Simulacija plazme
    - Simulacija klime
    - Seizmolo≈°ki modeli
- Statistiƒçka analiza ogromnih skupova podataka
- Problemi ma≈°inskog uƒçenja

---

## Ograniƒçenje kursa

- Ovde mi prelazimo ove primene samo ovla≈° zato ≈°to, fundamentalno, svrha za koju se `HPC` primenjuje nije odgovornost `HPC` in≈æenjera. To je odgovornost domenskog eksperta. `HPC` se bavi time da su resursi za proraƒçun dostupni.
- Kao deo ovog kursa od vas ƒáe se tra≈æiti da napi≈°ete seminarski rad o nekoj primeni zato ≈°to je zgodno da znate, makar okvirno, kako izgleda pravi problem ne bi li bili sposobniji da projektujete re≈°enja koja taj problem i njemu sliƒçne re≈°avaju.

---

## Kriptanaliza

- Prvobitna primena raƒçunara (te i, po definicji, `HPC`-a).
- Cela svrha kriptografije jeste da ne ostavi nikakav brz naƒçin da se do podataka doƒëe bez nekog kljuƒçnog elementa (kljuƒça, tipiƒçno).
- Kriptanaliza, idealno, razbije algoritam za enkripciju tako da to ne va≈æi.
- Danas su kriptografi mnogo ve≈°tiji nego nekada i potpuno razbijeni algoritmi su retki. Alternativa jeste da se postigne parcijalno oslabljivanje gde se koliƒçina nagaƒëanja i proraƒçuna smanji donekle tako da (mo≈æda?) doƒëe u domet najbr≈æih super-raƒçunara.
- Mo≈æete biti sigurni da negde u podrumima `NSA` zuje raƒçunari koji se bave ba≈° ovim poslom.

---

## Kriptanaliza‚Äîmoguƒái problem

- Istra≈æiti algoritam tipa op≈°teg sita polja brojeva (*general number field sieve‚ÄîGNFS*) i koristiti ga za faktorisanje poluprostih brojeva.
    - Poluprost (*semiprime*) je broj sa dva ne-trivijalna prosta faktora, npr. 2701 koji je 37 * 73.
- Ovo se onda lako mo≈æe koristiti za razbijanje `RSA` enkripcije, tj. za ekstrakciju privatnog kljuƒça iz javnog kljuƒça.
- `GNFS` referentna implementacija je: https://sourceforge.net/projects/msieve/

---

## Nauƒçna simulacija

- Posmatrano sa veoma visokog nivoa apstrakcije, nauƒçne simulacije su tipiƒçno (mada ne nu≈æno) simulacije nekakvog fiziƒçkog sistema koji je takav da je nemoguƒáe dobiti re≈°enje zatvorene forme no je neophodno raditi aproksimaciju i diskretizaciju.
- Recimo u komputacionoj dinamici fluida prostor se deli na komade (ƒáelije) i specijalizovana verzija Navier-Stokes jednaƒçina se re≈°ava za svaki taj komad u svakom kvantu vremena formirajuƒái rezultat.

---

## Primer nauƒçne simulacije‚ÄîProblem n tela

- Problem `n`-tela je jedan od najpoznatijih i definitivno najstarijih problema u matematiƒçkoj fizici.
- Imaju razne pod-formulacije koje sve objedinjuje sistem od n tela koji interaguju pod nekakvom silom no mi se ovde fokusiramo na vrlo jednostavnu, Njutnovsku verziju:
- Ako imamo `n` tela sa masama `m0‚Ä¶n` i pozicijama `r0‚Ä¶.n` koje variraju u odnosu na vreme `t`, kako ƒáe ta tela da se pona≈°aju pod efektom gravitacije.
- (Dalji deo predavanja delimiƒçno baziran na materijalima Dr Rejmoda J. Spiterija za njegov kurs Parallel Programming for Scientific Computing dr≈æan 2014 u Univerzitetu Saskaƒçevana, a koji u bazirani na materijalima sa Berklija.) https://www.cs.usask.ca/~spiteri/CMPT851/notes/nBody.pdf

---

## Formulacija problema ‚Äî ulazi

- U sistem ulaze:
    - Poƒçetne pozicije svih tela
    - Poƒçetne brzine svih tela
    - Mase svih tela
    - Vremenski parametri koji ukljuƒçuju:
        - Koliko traje simulacija
        - Pod kojim koracima ≈æelimo izlaz

---

## Formulacija problema‚Äîizlazli

- Iz sistema izlazi:
    - Pozicija svakog tela za vremenske korake
    - Brzina svakog tela za vremenske korake

---

## Formulacija problema‚Äîpretpostavke

- Va≈æe Njutnovi zakoni kretanja i gravitacije
- Svi objekti su taƒçkaste mase
- Svi objekti se mogu preklapati, tj. sudare modeliramo kao dva objekta na istom mestu.

---

## Notacija

- Neka je `n` broj tela (ƒçestica)
- Neka su mase `mi` sa `i` od `0` do `n-1`.
- Neka su pozicije `ri(t)` sa `i` od `0` do `n-1`, vektori.

---

## Fizika

- Onda je sila kojom ƒçestica j deluje na ƒçesticu i iznosi:

<p>

$$ f_{i,j}(t)=-\frac{Gm_{i}m_{j}}{||r_{i}(t)-r_{j}(t)||^{3}}(r_{i}(t)-r_{j}(t)) $$
  
</p>

- Gde va≈æi:

<p>

$$ G=6.673\times10^{-11} \quad \frac{m}{(kg\cdot s^{2})} $$
  
</p>

---

## Fizika

- Ukupna sila na ƒçesticu ƒáe onda biti:

<p>

$$ F_{i}(t)=\sum_{j=0, j\neq i}^{n-1}f_{i,j}(t) $$
  
</p>

---

## Fizika

- ≈†to mo≈æemo da pro≈°irimo u:

<p>

$$ F_{i}(t)=-Gm_{i}\sum_{j=0, j\neq i}^{n-1}\frac{m_{j}}{||r_{i}(t)-r_{j}(t)||^{3}}(r_{i}(t)-r_{j}(t)) $$
  
</p>

---

## Fizika

- Koristeƒái Njutnov drugi zakon u vektorskoj formulaciji imamo onda:

<p>

$$ F_{i}(t)=m_{i}\ddot{r}_{i}(t) \quad za \quad i=0,1,...,n-1 $$
  
</p>

---

## Fizika

- Ovo nas na kraju dovede do sistema prostih diferencijalnih jednaƒçina drugog reda oblika:

<p>

$$ \ddot{r}_{i}(t)= -G\sum_{j=0, j\neq i}^{n-1}\frac{m_{j}}{||r_{i}(t)-r_{j}(t)||^{3}}(r_{i}(t)-r_{j}(t)) $$
  
</p>

---

## Neke olak≈°ice

- Da bi nam ≈æivot bio lak≈°i, u ovoj 'igraƒçka' implementaciji radimo sa sledeƒáim ograniƒçenjima:
    - Prostor je 2D i nije particionisan.
    - Jednaƒçinu integralimo koristeƒái maksimalno jednostavnu Ojlerovu numeriƒçku metodu koja gleda unapred.
    - Vremenski korak koji koristimo je konstantan.
- Ova ograniƒçenja ƒçine ovo vrlo lo≈°im algoritmom za n-tela, ali vrlo ilustrativnim.
- Moguƒá zadatak: Istra≈æivanje metoda za poveƒáanje preciznosti i brzine modela n tela ≈°to ukljuƒçuje hijerarhijsko particionisanje prostora, dinamiƒçko zaokru≈æivanje na nulu, i adaptivni korak vremena.

---

## Ojlerova metoda?

- Prva i komiƒçno najprostija metoda za numeriƒçku integraciju diferencijalnih jednaƒçina.
- Poznata je i kao najprostija Runge-Kuta metoda.
- Esencijalno, aproksimiramo nepoznatu krivu datu kroz njen izvod tako ≈°to je podelimo na male deliƒáe (koraci) u kojima se pretvaramo da je kriva linearna.

---

## Ojlerova metoda?

![:scale 75%](img/ojler.png)

---

## Ojlerova metoda?

- Ovo nije osobito dobar naƒçin da se integrali diferencijalna jednaƒçina.
- Mo≈æe li bolje?
    - Nego ≈°ta.
    - Ali to je vi≈°e posao za specijalistiƒçki kod, o kome vi≈°e kasnije.

---

## Gruba struktura algoritma

```c
foreach timestamp {
    foreach particle p[i]{
        calculate F_i(t);
        update r_i(t);
        update v_i(t);
    }
}
return (r, v);
 ```

---

## Gruba struktura proraƒçuna Fi(t)

```c
foreach particle j{
    if(j != 1){
        dx = r[i].x - r[j].x;
        dy = r[i].y - r[j].y;
        d = sqrt(dx * dx + dy * dy);
        d3 = d*d*d;
        F[i].x -= G*m[i]*m[j]/d3*(r[i].x-r[j].x);
        F[i].y -= G*m[i]*m[j]/d3*(r[i].y-r[j].y);
    }
}
```

---

## Malo ubrzanje

- Postoji fundamentalna simetrija u problemu kojom mo≈æemo da da prepolovimo broj proraƒçuna
- Njutnov treƒái zakon znaƒçi da `fi,j(t) = -fj,i(t)`
- Ako znamo jednu, znamo i drugu, samo treba obrnuti znak.
- Kako da to uradimo lako?
- Najbolje je posmatrati matricu sile

---

## Matrica sile

<p>

$$ \begin{bmatrix}0 & f_{0,1}& f_{0,2}& ...& f_{0,n-1} \\-f_{0,1} & 0 & f_{1,2} &...&f_{1, n-1} \\... & ... & ... &.... &.... \\-f_{0,n-1} & -f_{1, n-1} & -f_{2,n-1} &.... &0 \end{bmatrix} $$
  
</p>

- Sada, sve ≈°to treba da uradimo jeste da napravimo skraƒáenu petlju nad gornjim odn. donjim trouglom matrice sile.

---

## Redukovani algoritam

```c
    foreach particle i{
        F_i(t) = 0;
    }
        foreach particle i{
            foreach particle j > i{
                F_i(t) += F_i,j(t);
                F_j(t) -= F_i,j(t);
            }
        }
```

---

## Dalji razvoj algoritma

- Kada imamo ukupne sile koje deluju na neku ƒçesticu, onda mo≈æemo da ka≈æemo:

<p>

$$ a_{i}(t)= \ddot{r}_{i}(t)=\frac{F_{i}(t)}{m_{i}} $$
  
</p>

- Ovo je na≈°a diferencijalna jednaƒçina koju hoƒáemo da integri≈°emo (dvaput) da bi dobili pomeraj tokom vremena.

---

## Pojednostavljenje jednaƒçine

- Imamo Ojlerov metod koji smo pominjali ranije, ali on je za diferencijalne jednaƒçine prvog reda oblika:

<p>

$$ \dot{y}(t)=f(t,y), \quad y(0)=y_{0}, \quad t>0 $$
  
</p>

- Mi imamo jednaƒçinu drugog reda.
- Sreƒáom, to se mo≈æe popraviti: uvek je moguƒáe pretvoriti jednaƒçinu m-tog reda u m jednaƒçina prvog reda tako ≈°to se funkcija i njeni izvodi do m-1 tretiraju kao nepoznate.

---

## Pojednostavljenje jednaƒçine

<p>

$$ \dot{r}_{i}(t)=v_{i}, \\ \dot{v}_{i}(t)=\frac{F_{i}(t)}{m_{i}} \quad i=0,1,2,...,n-1, \\r_{i}(0)=r_{i,0}, \quad v_{i}(0)=v_{i,0}, \quad i=0,1,2,...,n-1 $$
  
</p>

---

## Ojlerov metod primenjen na pojednostavljenu jednaƒçinu

```c
r[i].x += dt*v[i].x;
r[i].y += dt*v[i].y;
v[i].x += dt*f[i].x/m[i];
v[i].y += dt*f[i].y/m[i];
```

---

## Pregledanje izvornog koda serijske implementacije

- Videti:
    - <a target="_blank" rel="noopener noreferrer" href="/courses/hpc-z5-openMPI/#table-of-contents"> ‚òõ Predavanja/`nbody_basic.c`</a>
    - <a target="_blank" rel="noopener noreferrer" href="/courses/hpc-z5-openMPI/#table-of-contents"> ‚òõ Predavanja/`nbody_red.c`</a>

---

## Problemi paralelizacije koda koristeƒái model deljene memorije

- Suoƒçeni smo sa klasiƒçnim problemom: imamo kod koji radi serijski i hoƒáemo da ga ubrzamo.
- Ovo je najƒçe≈°ƒáe situacija u kojoj se `HPC` in≈æenjer naƒëe, domenski ekspert vam da nekakav kod i pozove vas da ga uƒçinite br≈æim.
- Mnogo br≈æim.
- Jedino ≈°to se razlikuje od stvarnosti jeste ≈°to je ≈°ansa da ƒáe kod biti uraƒëen u neƒçemo pogodnijem za brzo prototipiziranje, kao ≈°to je Matlab ili, vrlo ƒçeto ovih dana, Python sa pro≈°irenjima za nauƒçno raƒçunarstvo.
- U svakom sluƒçaju, kako priƒái ovakvom problemu?

---

## Fosterova metodologija

- 1995 dr Ian Foster koji se, mo≈æemo da spekuli≈°emo, posvaƒëao sa jednim previ≈°e domenskim ekspertom, je predlo≈æio op≈°tu metodologiju paralelizacije.
- Ova op≈°ta metodologija je ba≈° to. Op≈°ta. Nema gotovih re≈°ena u ovom poslu: ≈°ta mo≈æe da se opi≈°e do tog nivoa je veƒá odavno posao nekakvog automatizovanog algoritma.
- No, mo≈æe da bude dobar potsetnik.

---

## Fosterova metodolgija

1. Particija (eng. *Partition*)
2. Komunikacija (eng. *Communication*)
3. Kombinacija (eng. *Agglomeration*)
4. Mapiranje (eng. *Mapping*)

---

## Particija

.lcol[

- Particija je podela osnovnog zadatka na pod-zadatke na najprimitivnijem nivou.
- Ovde nas ne zanima nikakvo ograniƒçenje: samo lista stvari koje moramo da uradimo, a koje se na nivou apstrakcije na kome programiramo ne mogu dalje dekomponovati.
- Ako poƒçinjemo od serijskog algoritma, ovaj posao se sastoji od brojanja.
]

.rcol[

![:scale 90%](img/problem.png)

]

---

## Komunikacija

.lcol[

![:scale 80%](img/kom.png)

]

.rcol[

- Kada imamo primitivne zadatke, sledeƒái korak jeste da se ustanovi kakva je komunikacija izmeƒëu njih.
- U modelu deljene memorije to se naroƒçito svodi na graf zavisnosti: koji podatak je potreban za raƒçunanje kog podataka.
- Ako se setimo onog fibonaƒçijevog niza od ranije, tu je ba≈° zavisnost izmeƒëu podataka bila deo posla koji nas je ograniƒçavao.

]

---

## Kombinacija

.lcol[

- Ako su nam primitivni zadaci potpuno nezavisni, onda mo≈æemo da ih kombinujemo kako god ≈æelimo.
- U praksi, biƒáe ograniƒçenja, i ta ograniƒçenja vode na≈°e kombinovanje primitivnih zadataka u celine pogodne za obradu.
]

.rcol[

![:scale 90%](img/kom2.png)

]

---

## Mapiranje

.lcol[

![:scale 90%](img/map.png)
]

.rcol[

- Konaƒçan korak jeste da kombinovane celine podelimo u grupe koje ƒáe se izvr≈°avati na procesnim elementima.
- Mapiranje je takoƒëe podlo≈æno ograniƒçenjima, specifiƒçno, ograniƒçenjima hardvera/arhitekture.

]

---

## Primena Fosterove metodologije na problem n tela

- Particija
    - Za svaku ƒçesticu (op≈°ti broj i) i korak vremena (op≈°ti broj k) sraƒçunati

<p>

$$ F_{i}(t_{k-1}), \quad v_{i}(t_{k}), \quad r_{i}(t_{k}) $$
  
</p>

- Komunikacija

<p>

$$ Za\quad v_{i}(t_{k})\quad treba \\ v_{i}(t_{k-1}), \quad F_{i}(t_{k-1}), \quad r_{i}(t_{k-1}), \quad v_{j}(t_{k-1}) \\ Za\quad v_{i}(t_{k})\quad treba \\ r_{i}(t_{k-1}), \quad v_{i}(t_{k-1}) $$
  
</p>

---

## Primena Fosterove metodologije na problem n tela

- Kombinacija
    - Veƒáina komunikacije ide po principu ƒçestica na ƒçesticu (i to najvi≈°e ista ƒçestica)
    - To znaƒçi da su nam kompozitni zadaci prirodno zadaci proraƒçuna za individualnu ƒçesticu.
- Mapiranje
    - Imamo dve dimenzija mapiranja: broj ƒçestica i broj koraka.
    - Ojlerova metoda (kao ≈°to smo videli u analizi komunikacije) je fundamentalno sekvencijalna.
    - Ovo nameƒáe da paralelizam ima samo smisla ako rasporeƒëujemo ƒçestice po procesima.

---

## Praktiƒçno mapiranje

- To znaƒçi da, u sluƒçaju modela deljene memorije, na svaku sistemsku nit ≈æelimo da blokovski rasporedimo n/p ƒçestica gde je p broj sistemskih niti.
- Za≈°to blokovski raspored? Zato ≈°to smanjuje ke≈° oma≈°aje a posao je homogen i mo≈æe se lako razdeliti na ovaj naƒçin.
- **Ovo va≈æi samo ako ne koristimo redukciju da simetrijom smanjimo broj koraka.**

---

## Mapiranje u sluƒçaju redukovanog algoritma

- Te≈°koƒáa je ovde u tome ≈°to nisu sada iteracije za svaku vrednost ‚Äôi‚Äô iste. Niske vrednosti i su mnogo ‚Äôskuplje‚Äô nego velike vrednosti i.
- Ovo znaƒçi da ƒáe u blokovskoj podeli da oni koji dobiju visoki blok zavr≈°iti ranije i morati da besposleno ƒçekaju ni≈æe blokove.
- Ovaj scenario je, dakle, dobar za cikliƒçnu distribuciju.
- Ali cikliƒçna distribucija pati od visokog broja oma≈°aja u ke≈°u.
- Pa ≈°ta baca vi≈°e vremena? Ne moguƒáe je reƒái apriori. Ovo je jedna od (mnogo) situacija u `HPC` svetu gde je profilisanje koda neophodno.
- Univerzalno re≈°enje `HPC`-a: idi i pogledaj.

---

## Paralelizacija neredukovanog algoritma

- Naivni pristup jeste da se uzmu dve unutarnje petlje algoritma (ona koja raƒçuna sile i ona koja raƒçuna pomeraje i brzine) i da se for-ovi paralelizuju u statiƒçki raspored sa n/p po niti.
- Kako to izgleda?

```c
1: # pragma omp parallel for
2: for each particle i do
3:  Compute Fi(t).
4: end for
5: # pragma omp parallel for
6: for each particle i do
7:   Update ri(t) (and r`i(t) := vi(t)).
8: end for
```

---

## Potencijalni problemi?

- Potencijalan problem jeste situacija gde paralelne niti mogu da pristupaju istoj promenljivoj na naƒçin koji otvara ≈°ansu za konflikt, tkzv. `race condition.`
- Zato, izmeƒëu ostalog, je komunikacija toliko bitna.
- Kako izgleda pseudo-kod prve petlje?

---

## Analiza prve petlje

.lcol[

```c
1: for each particle j != i do
2:    dx = r[i][x] - r[j][x];
3:    dy = r[i][y] - r[j][y];
4:    d = sqrt(dx * dx + dy * dy);
5:    d3 = d*d*d;
6:    F[i][x] -= G*m[i]*m[j]/d3*(r[i][x]-r[j][x]);
7:    F[i][y] -= G*m[i]*m[j]/d3*(r[i][y]-r[j][y]);
8: end for
```
]

.rcol[

- Za svaki `F[i]` mo≈æe mu pristupiti samo jedna nit zbog prirode for konstrukta.
- Nit i ƒáe pristupiti promenljivama `m[j]` i `r[j]` ali ove promenljive se samo ƒçitaju ovde, tako da smo bezbedni. 
- Samo pisanje stvara problem.
- Sve ostale promenljive su privremene i stoga, mogu biti privatne, te su bezbedne.

]

---

## Analiza druge petlje

.lcol[

- Iskljuƒçivo se pi≈°e u promenljive `r[i]` i `v[i]` koje su ekskluzivne za odgovarajuƒáu nit.
- Sve ostalo se samo ƒçita.
- Nema moguƒáeg konflikta.
]

.rcol[

```c
1: r[i][x] += dt*v[i][x];
2: r[i][y] += dt*v[i][y];
3: v[i][x] += dt*f[i][x]/m[i];
4: v[i][y] += dt*f[i][y]/m[i];
```

]

---

## Redukovani algoritam

```c
1:    for each particle i do
2:        Fi(t) = 0;
3:    end for
4:    for each particle i do
5:        for each particle j > i do
6:            Fi(t) += fi,j(t);
7:            Fj(t) -= fi,j(t);
8:        end for
9:    end for
```

---

## Problemi

- Prva petlja nije problem. Mo≈æe biti paralelizovana manje-vi≈°e koliko god ≈æelimo.
- Druga petlja je problem
- Nit i pi≈°e i u vrednost F[i] i u vrednost F[j] ≈°to znaƒçi da je destruktivno preklapanje izmeƒëu niti apsolutno moguƒáe.
- Ako zamislimo trivijalan primer 4 ƒçestice i 2 niti uz blok-particiju onda raƒçunamo silu na treƒáu ƒçesticu kao:

<p>

$$ F_{3}=f_{0,3}-f_{1,3}-f_{2,3} $$
  
</p>

- Ako, dalje, zamislimo da nit 0 raƒçuna prva dva elementa, a nit 1 treƒái, imamo konflikt. Rezultat zavisi od tajminga.

---

## Naivno re≈°enje

```c
    1:    for each particle i do
    2:        for each particle j > i do
    3:            # pragma omp critical {
    4:            Fi(t) += fi,j(t);
    5:            Fj(t) -= fi,j(t);
    6:            }
    7:        end for
    8:    end for
```
- Ovo radi, nema problema, ali pretvara na≈° paralelni kod u serijski u kom sluƒçaju, ≈°to smo se trudili?

---

## Malo manje naivno re≈°enje

```c
    1:    for each particle i do
    2:        for each particle j > i do
    3:            omp_set_lock(& locks[i])
    4:            Fi(t) += fi,j(t);
    5:            omp_unset_lock(& locks[i])
    6:            omp_set_lock(& locks[j])
    7:            Fj(t) -= fi,j(t);
    8:            omp_unset_lock(& locks[j])
    9:        end for
   10:    end for
```

- Ovo je mnogo bolje.
- Nemamo vi≈°e jedan kritiƒçni region koji blokira sve, nego samo tretiramo svaku ƒçesticu kao kritiƒçni resurs.
- Bolje.
- Ali mo≈æe jo≈° bolje.

---

## Lokalno ƒçuvanje

- Umesto da odmah raƒçunamo sve sile i sabiramo ih i sme≈°tamo gde treba mi podelimo posao na dva:
    - Raƒçunanje svih sila jedne niti koje smestimo u za nit lokalnu promenljivu.
    - Zbrajanje svih sila jedne ƒçestica tako ≈°to se zbrajaju vrednosti lokalnih promenljivih.
- Onda mo≈æemo da paralelizujemo ove dve faze odvojeno sa taƒçkom sinhronizacije izmeƒëu.

---

## Faza 1

```c
    1:    # pragma omp for
    2:    for each particle i do
    3:        Fi(t)=0 
    4:        for each particle j > i do
    5:            Floc,i(t) += fi,j(t);
    6:            Floc,j(t) -= fi,j(t);
    7:        end for
    8:    end for
```

- Ovo je isti kod kao i ranije, ali sada svaka nit ima svoje podatke o silama.
- To znaƒçi da imamo na kraju malo traƒáenje memorije i gomilu polurezultata.
- Nema konflikta zato ≈°to jedino u ≈°ta se pi≈°e je lokalno za nit.

---

## Faza 2

- Pretvaramo parcijalne u konaƒçne rezultate.
- Mo≈æemo o ovome da mislimo kao o ruƒçnoj implementaciji operacije redukcije.
- Nema ≈°anse za konflikt jer i-ta nit je "vlasnik" i-te ƒçestice, a samo se u to pi≈°e.

```c
    1:    # pragma omp for
    2:    for each particle i do
    3:        for each particle j > i do
    4:          Fi(t)+=Floc,p(t)
    5:        end for
    6:    end for
```

---

## Pregledanje izvornog koda OpenMP implementacije

- Videti:
    - <a target="_blank" rel="noopener noreferrer" href="/courses/hpc-z5-openMPI/#table-of-contents"> ‚òõ Predavanja/`omp_nbody_basic.c`</a>
    - <a target="_blank" rel="noopener noreferrer" href="/courses/hpc-z5-openMPI/#table-of-contents"> ‚òõ Predavanja/`omp_nbody_red.c`</a>

---

## Zadatak:

- Koliko je ovo brzo?
- Koji raspored zadataka (`static vs. cyclic`) proizvodi najbolje rezultate?

---

## OpenMPI paralelizacija

- Centralna ideja se ne razlikuje dramatiƒçno u odnosu na OpenMP paralelizaciju.
- Kljuƒçan korak, kao i ranije, jeste kako individualne niti (koje su sada na razliƒçitim ma≈°inama) komuniciraju.
- Fundamentalna podela posla, opet, radi na nivou individualnih ƒçestica.
- Ako govorimo o ne-redukovanom algoritmu, onda komunikacija nastaje u okviru raƒçunanja sile izmeƒëu i-te i j-te ƒçestice.
- To znaƒçi da u svakom koraku, svaka ƒçestica zahteva poziciju svake druge ƒçestice (manje-vi≈°e).
- Ovo je du≈°u dalo za `MPI_Allgather` operaciju.

---

## Tehniƒçki detalji struktura podataka

- Pod MPI umesto struct-a koristimo nizove elementarnih tipova zato ≈°to je komunikacija kroz elementarne tipove najbr≈æa.
- Takoƒëe, niz masa dr≈æimo unapred kopiranim na sve instance zato ≈°to se mase nikad ne menjaju, a uvek su neophodne.
- Najbolji naƒçin da razre≈°imo distribuciju podataka jeste kroz blokove pozicija za koje smo odgovorni (pozicije su ono ≈°to moramo da delimo iz koraka u korak) gde svaka nit pamti koji je njen blok kroz pokazivaƒçe i fiksnu veliƒçinu bloka.

---

## Op≈°ta struktura neredukovanog algoritma

```c
1: Get (and broadcast) input data.
2: for each timestep do
3:      for each local particle i-loc do
4:          Compute F-i-loc(t).
5.      end for
6:      for each local particle i-loc do
7:          Compute r-i-loc and v-i-loc
8:      end for
9:      Allgather r-i-loc to global array pos.
10: end for
```

---

## Pregledati kod

- <a target="_blank" rel="noopener noreferrer" href="/courses/hpc-z5-openMPI/#table-of-contents"> ‚òõ Predavanja/`mpi_nbody_basic.c`</a>

---

## MPI implementacija redukovanog algoritma

- Redukovani algoritam je jako problematiƒçan za implementaciju u MPI okru≈æenju.
- Problem je kako proslediti prave informacije u pravom trenutku.
    - Svaki proces je odgovoran za neke ƒçestice, ali ne raƒçuna sve sile za te ƒçestice. Neke sile ƒáe raƒçunati neko drugi.
    - To znaƒçi da u svakom koraku moramo i da emitujemo na≈°e sile drugim procesima i da dobijemo sile od negde drugde samo da bi mogli da sraƒçunamo sledeƒáu generaciju pozicija.
- Ovo je jako kompleksno, ali ako se implementira kako treba je ≈°ansa za istinski skalabilan i efikasan proces za raƒçunanje proizvoljno velikih n-tela simulacija.

---

## Prstenska komunikaciona ≈°ema

- Prstenska komunikaciona ≈°ema je stari trik u komunikacionoj topologiji da se pojednostavi i regularizuje komunikacija.
- U praksi, svaki ƒçvor mo≈æe da komunicira sa svakim drugim ƒçvorom na bilo koji naƒçin, bilo kada, sa bilo kojim sadr≈æajem.
- Ova sloboda znaƒçi da ni≈°ta ne mo≈æe, a priori, da se ka≈æe o toj komunikaciji, ona nema osobine, i o njoj se ne mo≈æe ba≈° puno rezonovati: suvi≈°e je nedefinisano.
- Problem do koga ovo ultimativno dovede jeste da ne mo≈æemo da optimizujemo komunikaciju zato ≈°to je ne razumemo.
- Re≈°enje jeste da se koriste obrasci gde ograniƒçenja stvaraju strukturu.

---

## Prstenska komunikaciona ≈°ema

- U ovoj ≈°emi zamislimo sve MPI procese (njih q) u prstenu.
- Zatim ih pove≈æemo vodeƒái raƒçuna o ograniƒçenju da `p`-ti proces samo komunicira sa procesima `p-1` i `p+1` ili, da bi bili ne≈°to taƒçniji, sa `(p - 1 + q) % q` i `(p+1) % q` (≈°to se samo stara da se oƒçuva prstenasta topologija.
- U okviru komunikacije va≈æi pipeline princip: komunikacija je sinhronizovana i to tako da p prima podatke od `p-1` i ≈°alje ih `p+1`
- Posle `q` faza komunikacije, svi imaju sve podatke.

---

## Paralelizacija redukovanog algoritma kroz MPI

- Neka je broj ƒçestica dodeljenih jednom procesu l
- Onda u na≈°oj prstenskoj strukturi u svakoj fazi komunikacije svaki proces:
1. ≈†alje dalje l sila i l pozicija (svojih)
2. Proraƒçuna silu izmeƒëu svojih ƒçestica i onih ƒçije pozicije primi.
3. Doda te sile svojim ƒçesticama i oduzme ih od sila koje dobije.

---

## Primer prstenskog stila komunikacije za n=4, p=2

.center-table.small[

|         **Vreme**        |  **Promenljiva** | **Proces0** | **Proces1** |
|:------------------------:|:----------------:|:-----------:|:-----------:|
|          Poƒçetak         | lokalna_pozicija |    s0, s2   |    s1,s3    |
|          Poƒçetak         |   lokalna_sila   |     0,0     |     0,0     |
|          Poƒçetak         |   priv_pozicija  |    s0,s2    |    s1,s3    |
|          Poƒçetak         |     priv_sila    |     0,0     |     0,0     |
|   Posle proraƒçu na sila  | lokalna_pozicija |    s0,s2    |    s1,s3    |
|   Posle proraƒçu na sila  |   lokalna_sila   |    f02,0    |    f13,0    |
|   Posle proraƒçu na sila  |   priv_pozicija  |    s0,s2    |    s1,s3    |
|   Posle proraƒçu na sila  |     priv_sila    |    0,-f02   |    0,-f13   |
| Posle prve komunik acije | lokalna_pozicija |    s0,s2    |    s1,s3    |
| Posle prve komunik acije |   lokalna_sila   |    f02,0    |    f13,0    |
| Posle prve komunik acije |   priv_pozicija  |    s1,s3    |    s0,s2    |
| Posle prve komunik acije |   priv_sila      |    0,-f13   |    0,-f02   |

]

---

## Primer prstenskog stila komunikacije za n=4, p=2 Vreme

.center-table.small[

|         **Vreme**        |  **Promenljiva** |        **Proces0**       |        **Proces1**        |
|:------------------------:|:----------------:|:------------------------:|:-------------------------:|
|   Posle proraƒçuna sila   | lokalna_pozicija |          s0, s2          |           s1,s3           |
|   Posle proraƒçuna sila   |   lokalna_sila   |      f01+f02+f03,f23     |         f12+f13,0         |
|   Posle proraƒçuna sila   |   priv_pozicija  |           s1,s3          |           s0,s2           |
|   Posle proraƒçuna sila   |     priv_sila    |     -f01,-f03-f13-f23    |         0,-f02-f12        |
| Posle druge komunikacije | lokalna_pozicija |           s0,s2          |           s1,s3           |
| Posle druge komunikacije |   lokalna_sila   |      f01+f02+f03,f23     |         f12+f13,0         |
| Posle druge komunikacije |   priv_pozicija  |           s0,s2          |           s1,s3           |
| Posle druge komunikacije |     priv_sila    |        0,-f02-f12        |     -f01,-f03-f13-f23     |
|   Posle proraƒçuna sila   | lokalna_pozicija |           s0,s2          |           s1,s3           |
|   Posle proraƒçuna sila   |   lokalna_sila   | f01+f02+f03,-f02-f12+f23 | -f01+f12+f13,-f03-f13-f23 |
|   Posle proraƒçuna sila   |   priv_pozicija  |           s0,s2          |           s1,s3           |
|   Posle proraƒçuna sila   |     priv_sila    |        0,-f02-f12        |     -f01,-f03-f13-f23     |

]

---

## Tehniƒçki detalji komunikacije

- Dovoljno je ƒçesto programirati ovako da se podaci istovremeno ≈°alju i rimaju da postoji funkcija koja nam ≈°tedi memoriju za takav tip komunikacije: `MPI_Sendrecv_replace` ƒçiji su parametri:
- ulazno izlazni bafer
- veliƒçina bafera
- tip podataka
- odredi≈°te
- tag
- izvor
- tag
- kanal
- izlazni status

---

## MPI_Sendrecv_replace

- `MPI_Sendrecv_replace` istovremeno ≈°alje podatke u baferu i prima istu koliƒçinu podataka.
- Kada se zavr≈°i, podaci koji su bili u baferu su odaslati dalje, a podaci koji su stigli su sme≈°teni u bafer.

---

## Pregledati kod

- <a target="_blank" rel="noopener noreferrer" href="/courses/hpc-z5-openMPI/#table-of-contents"> ‚òõ Predavanja/`mpi_nbody_red.c`</a>

---

## Ako ≈æelite jo≈° informacija

- Vrlo dobar pregled problema N tela se mo≈æe naƒái u Grop, Lusk, i Skjellum ‚Äî Using MPI: Portable Parallel Programming with the Message Passing Interface u sekciji 5.2.
- Vi≈°e o efikasnoj integraciji diferencijalnih jednaƒçina ima u: William H. Press, Saul A. Teukolsky, William T. Vetterling, and Brian P. Flannery. 2007. Numerical Recipes 3rd Edition: The Art of Scientific Computing (3 ed.). Cambridge University Press, New York, NY, USA. i to u poglavlju 17, stranica 899. Naroƒçito obratite pa≈ænju na sekcije 17.0 i 17.1.

--

class: center, middle, theend, hide-text
layout: false
background-image: url(../theend.gif)

</textarea> <script src="https://remarkjs.com/downloads/remark-latest.min.js"></script> <script>remark.macros.scale=function(percentage){var url=this;return'<div class="center"><img src="' +url+'" style="width: '+percentage+'" /></div>';};var slideshow=remark.create({highlightLanguage:'python',highlightStyle:'monokai',highlightLines:true,countIncrementalSlides:false,navigation:{scroll:false,}});</script> <script src="https://cdnjs.cloudflare.com/ajax/libs/mermaid/8.0.0/mermaid.min.js"></script> <script>mermaid.initialize({startOnLoad:true});</script></body></html>