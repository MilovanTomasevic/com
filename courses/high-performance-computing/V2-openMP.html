<!DOCTYPE html><html><head><title>[High-performance computing (HPC)](/courses/#table-of-contents)</title><meta charset="utf-8"><style>@import url(https://fonts.googleapis.com/css?family=Playfair+Display);@import url(https://fonts.googleapis.com/css?family=Droid+Serif);@import url(https://fonts.googleapis.com/css?family=Open+Sans);@import url(https://fonts.googleapis.com/css?family=Work+Sans);@import url(https://fonts.googleapis.com/css?family=Muli);@import url(https://fonts.googleapis.com/css?family=Yanone+Kaffeesatz);@import url(https://fonts.googleapis.com/css?family=Ubuntu+Mono:400,700,400italic);@import url(https://fonts.googleapis.com/css?family=Roboto+Condensed);@import url(https://fonts.googleapis.com/css?family=PT+Sans);@import url(https://fonts.googleapis.com/css?family=Roboto);body{font-family:'Open Sans';color:#333;display:flex;height:100%}h1{font-family:"Playfair Display"}h2,h3,h4{font-family:'Yanone Kaffeesatz';font-weight:400}a{font-family:"PT Sans"}.remark-slide-content h1{font-size:3em}.remark-slide-content h2{font-size:2em}.remark-slide-content h3{font-size:1.6em}.remark-code,.remark-inline-code{font-family:'Ubuntu Mono'}.remark-code-line-highlighted{background-color:#373832}h1{text-shadow:-1px 0 #000,0 1px #000,1px 0 #000,0 -1px #000;-webkit-animation:pulse 7s forwards;-moz-animation:pulse 7s forwards;-o-animation:pulse 7s forwards;-ms-animation:pulse 7s forwards;animation:pulse 7s forwards}@-webkit-keyframes pulse{0%{color:#eee}100%{color:#666}}@-moz-keyframes pulse{0%{color:#eee}100%{color:#666}}@-ms-keyframes pulse{0%{color:#eee}100%{color:#666}}@-o-keyframes pulse{0%{color:#eee}100%{color:#666}}@keyframes pulse{0%{color:#eee}100%{color:#666}}h2{-webkit-animation:color-change 1.5s infinite;-moz-animation:color-change 1.5s infinite;-o-animation:color-change 1.5s infinite;-ms-animation:color-change 1.5s infinite;animation:color-change 1.5s infinite}@-webkit-keyframes color-change{0%{color:coral}50%{color:#5db9e0}100%{color:coral}}@-moz-keyframes color-change{0%{color:coral}50%{color:#5db9e0}100%{color:coral}}@-ms-keyframes color-change{0%{color:coral}50%{color:#5db9e0}100%{color:coral}}@-o-keyframes color-change{0%{color:coral}50%{color:#5db9e0}100%{color:coral}}@keyframes color-change{0%{color:coral}50%{color:#5db9e0}100%{color:coral}}h3,h4{color:#c7e2ee;text-shadow:-.7px 0 #4d4d4d,0 .7px #4d4d4d,.7px 0 #4d4d4d,0 -.7px #4d4d4d}.theend{background-color:#000;color:#000;text-shadow:0 0 20px #333}.inverse{background-color:#7e7e7e;color:#c5dae4;text-shadow:0 0 20px #333}.inverse h1{text-shadow:-1px 0 #000,0 1px #000,1px 0 #000,0 -1px #000;-webkit-animation:pulsei 7s forwards;-moz-animation:pulsei 7s forwards;-o-animation:pulsei 7s forwards;-ms-animation:pulsei 7s forwards;animation:pulsei 7s forwards}@-webkit-keyframes pulsei{0%{color:#eee}100%{color:#e9a46b}}@-moz-keyframes pulsei{0%{color:#eee}100%{color:#e9a46b}}@-ms-keyframes pulsei{0%{color:#eee}100%{color:#e9a46b}}@-o-keyframes pulsei{0%{color:#eee}100%{color:#e9a46b}}@keyframes pulsei{0%{color:#eee}100%{color:#e9a46b}}.inverse h2{text-shadow:-1px 0 #000,0 1px #000,1px 0 #000,0 -1px #000;-webkit-animation:color-changei 1s infinite;-moz-animation:color-changei 1s infinite;-o-animation:color-changei 1s infinite;-ms-animation:color-changei 1s infinite;animation:color-changei 1s infinite}@-webkit-keyframes color-changei{0%{color:#fff}50%{color:#7bbcd8}100%{color:#fff}}@-moz-keyframes color-changei{0%{color:#fff}50%{color:#7bbcd8}100%{color:#fff}}@-ms-keyframes color-changei{0%{color:#fff}50%{color:#7bbcd8}100%{color:#fff}}@-o-keyframes color-changei{0%{color:#fff}50%{color:#7bbcd8}100%{color:#fff}}@keyframes color-changei{0%{color:#fff}50%{color:#7bbcd8}100%{color:#fff}}a{color:#bb7917;text-decoration:none;transition:all .3s linear;-webkit-transition:all .3s linear;-moz-transition:all .3s linear;background:linear-gradient(to bottom,var(--mainColor) 0,var(--mainColor) 100%);background-position:0 100%;background-repeat:repeat-x;background-size:1.5px 1.5px}a:hover{background-image:url("data:image/svg+xml;charset=utf8,%3Csvg id='squiggle-link' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' xmlns:ev='http://www.w3.org/2001/xml-events' viewBox='0 0 20 4'%3E%3Cstyle type='text/css'%3E.squiggle{animation:shift .3s linear infinite;}@keyframes shift {from {transform:translateX(0);}to {transform:translateX(-20px);}}%3C/style%3E%3Cpath fill='none' stroke='%23ff9800' stroke-width='2' class='squiggle' d='M0,3.5 c 5,0,5,-3,10,-3 s 5,3,10,3 c 5,0,5,-3,10,-3 s 5,3,10,3'/%3E%3C/svg%3E");background-position:0 100%;background-size:auto 4px;background-repeat:repeat-x;text-decoration:none;color:#2d77d8;padding-left:10px}.inverse code{background-color:#7e7e7e}.hide-text{text-indent:-9999px}.remark-slide-container{transition:opacity 1s linear,right 1s ease-in-out;opacity:0;right:1000px}.remark-visible{transition:opacity 1s linear,right 1s ease-in-out;opacity:1;right:0}.remark-fading{z-index:9}.remark-visible~.remark-slide-container{right:-1000px}.remark-code,.remark-inline-code{font-family:'Ubuntu Mono'}.remark-code-line-highlighted{background-color:#373832}.remark-inline-code{font-weight:700}.remark-code-line-highlighted{font-weight:700;background-color:transparent;text-shadow:0 5px 15px rgba(255,106,20,.5),5px 0 15px rgba(255,106,20,.5),-5px 0 15px rgba(255,106,20,.5),0 -5px 15px rgba(255,106,20,.5)}.shade{padding:0}.shade{background-color:rgba(0,0,0,.7);color:#fff;width:100%;padding:1em 0}.shadelight{background-color:rgba(0,0,0,.5);color:#fff;width:100%;padding:0}.fgtransparent h1{color:rgba(255,255,255,.8)!important;text-shadow:none}.boxtitle1{padding:1em;text-align:left;border-left:rgba(255,255,255,.6) solid .5em;border-right:#fff solid 0}.nosplit>div:first-of-type{width:100%;height:100%;position:absolute;top:0;left:0}.split-20>div:first-of-type{width:20%;height:100%;position:absolute;top:0;left:0}.split-20>div:nth-of-type(2){width:80%;height:100%;position:absolute;top:0;right:0}.split-30>div:first-of-type{width:30%;height:100%;position:absolute;top:0;left:0}.split-30>div:nth-of-type(2){width:70%;height:100%;position:absolute;top:0;right:0}.split-50>div:first-of-type{width:50%;height:100%;position:absolute;top:0;left:0}.split-50>div:nth-of-type(2){width:50%;height:100%;position:absolute;top:0;right:0}.split-60>div:first-of-type{width:60%;height:100%;position:absolute;top:0;left:0}.split-60>div:nth-of-type(2){width:40%;height:100%;position:absolute;top:0;right:0}.split-70>div:first-of-type{width:70%;height:100%;position:absolute;top:0;left:0}.split-70>div:nth-of-type(2){width:30%;height:100%;position:absolute;top:0;right:0}.column_t1{background-color:#2aa9df;color:#fff}.column_t1 a{color:#b3e5fc}.column_t1 pre code{-webkit-box-shadow:0 0 55px 0 rgba(0,0,0,.75);-moz-box-shadow:0 0 55px 0 rgba(0,0,0,.75);box-shadow:0 0 55px 0 rgba(0,0,0,.75)}.uline{text-decoration:underline}.vmiddle{position:relative;top:50%;transform:translateY(-50%);padding:1em}.remark-slide-content h1{font-size:50px}.remark-slide-content h2{font-size:40px}.remark-slide-content h3{font-size:30px}.remark-slide-content img{width:100%}.remark-slide-content{padding-left:50px;padding-right:50px}.remark-slide-content{background-size:contain}blockquote{font-family:'Playfair Display';font-style:italic;font-size:110%;margin-top:10px;margin-bottom:10px;margin-left:50px;padding:1em 1em;background-color:#f5f5f5;border-left:5px solid #dbdbdb}.hljs-ln td.hljs-ln-numbers{-webkit-touch-callout:none;-webkit-user-select:none;-khtml-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;text-align:center;color:#ccc;border-right:1px solid #ccc;vertical-align:top;padding-right:5px}.hljs-ln td.hljs-ln-code{padding-left:10px}.lcol{width:49%;float:left}.lcol-narrow{width:39%;float:left}.lcol-narrow2{width:24%;float:left}.lcol-wide{width:59%;float:left}.lcol-wide2{width:74%;float:left}.rcol{width:49%;float:right}.rcol-narrow{width:39%;float:right}.rcol-narrow2{width:24%;float:right}.rcol-wide{width:59%;float:right}.rcol-wide2{width:74%;float:right}.wide{clear:both}.l-col{color:#777;width:20%;height:92%;float:left}.r-col{width:75%;float:right;padding-top:1em}code{-moz-border-radius:5px;-web-border-radius:5px;border-radius:5px;background:#e7e8e2}em{color:#c63235}.remark-slide-content{font-size:24px}ol>li,ul>li{margin-top:5px}.section{font-size:16px;float:right;clear:both}.small,.small .remark-code-line{font-size:60%}.medium,.medium .remark-code-line{font-size:80%}.condensed{line-height:.8em;font-size:90%}.size-90,.size-90 .remark-code-line{font-size:90%}.size-85,.size-85 .remark-code-line{font-size:85%}.multicode pre{margin-top:10px;margin-bottom:10px}.remark-slide img,.remark-slide pre{margin-top:25px;margin-bottom:25px}.attention{-moz-border-radius:5px;-web-border-radius:5px;border-radius:5px;background-color:#fbd2d2;text-align:center}.attention p{margin:10px}.footer{position:absolute;bottom:12px;left:20px;font-size:70%}.footer.small{font-size:50%}.footer,li>p{margin:0}.ref{color:red;vertical-align:super;font-size:70%}.created{font-size:60%;margin-bottom:5em;font-family:"Playfair Display";font-size:16px;font-style:normal;font-variant:normal;font-weight:400;line-height:22px}.created:before{content:"ğŸ‘¨ğŸ»â€ğŸ’»â™ "}.noselect{-webkit-touch-callout:none;-webkit-user-select:none;-khtml-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.overlay{box-shadow:inset 0 0 0 9999px rgba(0,0,0,.35)}.container{height:100%;width:100%;display:flex;position:fixed;align-items:center;justify-content:center}table{border-collapse:collapse;border-spacing:0;empty-cells:show;border:1px solid #cbcbcb}.center-table table{margin:0 auto}table caption{color:#000;font:italic 85%/1 arial,sans-serif;padding:1em 0;text-align:center}table td,table th{border-left:1px solid #cbcbcb;border-width:0 0 0 1px;font-size:inherit;margin:0;overflow:visible;padding:.5em 1em}table td:first-child,table th:first-child{border-left-width:0}table thead{background-color:#e0e0e0;color:#000;text-align:left;vertical-align:bottom}table td{background-color:transparent}table-odd td{background-color:#f2f2f2}table tr:nth-child(2n-1) td{background-color:#f2f2f2}table td{border-bottom:1px solid #cbcbcb}table tbody>tr:last-child>td{border-bottom-width:0}table-horizontal td,table-horizontal th{border-width:0 0 1px 0;border-bottom:1px solid #cbcbcb}table-horizontal tbody>tr:last-child>td{border-bottom-width:0}/*! bulma.io v0.4.2 | MIT License | github.com/jgthms/bulma */@-webkit-keyframes spinAround{from{-webkit-transform:rotate(0);transform:rotate(0)}to{-webkit-transform:rotate(359deg);transform:rotate(359deg)}}@keyframes spinAround{from{-webkit-transform:rotate(0);transform:rotate(0)}to{-webkit-transform:rotate(359deg);transform:rotate(359deg)}}/*! minireset.css v0.0.2 | MIT License | github.com/jgthms/minireset.css */p{margin:0;padding:0}.message{font-family:'Playfair Display';background-color:#f5f5f5;border-radius:3px;font-size:1rem}.message:not(:last-child){margin-bottom:1.5rem}.message.is-white{background-color:#fff}.message.is-white .message-header{background-color:#fff;color:#0a0a0a}.message.is-white .message-body{border-color:#fff;color:#4d4d4d}.message.is-black{background-color:#fafafa}.message.is-black .message-header{background-color:#0a0a0a;color:#fff}.message.is-black .message-body{border-color:#0a0a0a;color:#090909}.message.is-light{background-color:#fafafa}.message.is-light .message-header{background-color:#f5f5f5;color:#363636}.message.is-light .message-body{border-color:#f5f5f5;color:#505050}.message.is-dark{background-color:#fafafa}.message.is-dark .message-header{background-color:#363636;color:#f5f5f5}.message.is-dark .message-body{border-color:#363636;color:#2a2a2a}.message.is-primary{background-color:#f5fffd}.message.is-primary .message-header{background-color:#00d1b2;color:#fff}.message.is-primary .message-body{border-color:#00d1b2;color:#021310}.message.is-info{background-color:#f6f9fe}.message.is-info .message-header{background-color:#3273dc;color:#fff}.message.is-info .message-body{border-color:#3273dc;color:#22509a}.message.is-success{background-color:#f6fef9}.message.is-success .message-header{background-color:#23d160;color:#fff}.message.is-success .message-body{border-color:#23d160;color:#0e301a}.message.is-warning{background-color:#fffdf5}.message.is-warning .message-header{background-color:#ffdd57;color:rgba(0,0,0,.7)}.message.is-warning .message-body{border-color:#ffdd57;color:#3b3108}.message.is-danger{background-color:#fff5f7}.message.is-danger .message-header{background-color:#ff3860;color:#fff}.message.is-danger .message-body{border-color:#ff3860;color:#cd0930}.message-header{-webkit-box-align:center;-ms-flex-align:center;align-items:center;background-color:#4a4a4a;border-radius:3px 3px 0 0;color:#fff;display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-pack:justify;-ms-flex-pack:justify;justify-content:space-between;line-height:1.25;padding:.5em .75em;position:relative}.message-header a,.message-header strong{color:inherit}.message-header a{text-decoration:underline}.message-header .delete{-webkit-box-flex:0;-ms-flex-positive:0;flex-grow:0;-ms-flex-negative:0;flex-shrink:0;margin-left:.75em}.message-header+.message-body{border-top-left-radius:0;border-top-right-radius:0;border-top:none}.message-body{border:1px solid #dbdbdb;border-radius:3px;color:#4a4a4a;padding:.1em .5em}.message-body a,.message-body strong{color:inherit}.message-body a{text-decoration:underline}.message-body code,.message-body pre{background:#fff}.message-body pre code{background:0 0}.column{display:block;-ms-flex-preferred-size:0;flex-basis:0;-webkit-box-flex:1;-ms-flex-positive:1;flex-grow:1;-ms-flex-negative:1;flex-shrink:1;padding:.75rem}.columns.is-mobile>.column.is-narrow{-webkit-box-flex:0;-ms-flex:none;flex:none}.columns.is-mobile>.column.is-full{-webkit-box-flex:0;-ms-flex:none;flex:none;width:100%}.columns.is-mobile>.column.is-three-quarters{-webkit-box-flex:0;-ms-flex:none;flex:none;width:75%}.columns.is-mobile>.column.is-two-thirds{-webkit-box-flex:0;-ms-flex:none;flex:none;width:66.6666%}.columns.is-mobile>.column.is-half{-webkit-box-flex:0;-ms-flex:none;flex:none;width:50%}.columns.is-mobile>.column.is-one-third{-webkit-box-flex:0;-ms-flex:none;flex:none;width:33.3333%}.columns.is-mobile>.column.is-one-quarter{-webkit-box-flex:0;-ms-flex:none;flex:none;width:25%}.columns.is-mobile>.column.is-offset-three-quarters{margin-left:75%}.columns.is-mobile>.column.is-offset-two-thirds{margin-left:66.6666%}.columns.is-mobile>.column.is-offset-half{margin-left:50%}.columns.is-mobile>.column.is-offset-one-third{margin-left:33.3333%}.columns.is-mobile>.column.is-offset-one-quarter{margin-left:25%}.columns.is-mobile>.column.is-1{-webkit-box-flex:0;-ms-flex:none;flex:none;width:8.33333%}.columns.is-mobile>.column.is-offset-1{margin-left:8.33333%}.columns.is-mobile>.column.is-2{-webkit-box-flex:0;-ms-flex:none;flex:none;width:16.66667%}.columns.is-mobile>.column.is-offset-2{margin-left:16.66667%}.columns.is-mobile>.column.is-3{-webkit-box-flex:0;-ms-flex:none;flex:none;width:25%}.columns.is-mobile>.column.is-offset-3{margin-left:25%}.columns.is-mobile>.column.is-4{-webkit-box-flex:0;-ms-flex:none;flex:none;width:33.33333%}.columns.is-mobile>.column.is-offset-4{margin-left:33.33333%}.columns.is-mobile>.column.is-5{-webkit-box-flex:0;-ms-flex:none;flex:none;width:41.66667%}.columns.is-mobile>.column.is-offset-5{margin-left:41.66667%}.columns.is-mobile>.column.is-6{-webkit-box-flex:0;-ms-flex:none;flex:none;width:50%}.columns.is-mobile>.column.is-offset-6{margin-left:50%}.columns.is-mobile>.column.is-7{-webkit-box-flex:0;-ms-flex:none;flex:none;width:58.33333%}.columns.is-mobile>.column.is-offset-7{margin-left:58.33333%}.columns.is-mobile>.column.is-8{-webkit-box-flex:0;-ms-flex:none;flex:none;width:66.66667%}.columns.is-mobile>.column.is-offset-8{margin-left:66.66667%}.columns.is-mobile>.column.is-9{-webkit-box-flex:0;-ms-flex:none;flex:none;width:75%}.columns.is-mobile>.column.is-offset-9{margin-left:75%}.columns.is-mobile>.column.is-10{-webkit-box-flex:0;-ms-flex:none;flex:none;width:83.33333%}.columns.is-mobile>.column.is-offset-10{margin-left:83.33333%}.columns.is-mobile>.column.is-11{-webkit-box-flex:0;-ms-flex:none;flex:none;width:91.66667%}.columns.is-mobile>.column.is-offset-11{margin-left:91.66667%}.columns.is-mobile>.column.is-12{-webkit-box-flex:0;-ms-flex:none;flex:none;width:100%}.columns.is-mobile>.column.is-offset-12{margin-left:100%}@media screen and (max-width:768px){.column.is-narrow-mobile{-webkit-box-flex:0;-ms-flex:none;flex:none}.column.is-full-mobile{-webkit-box-flex:0;-ms-flex:none;flex:none;width:100%}.column.is-three-quarters-mobile{-webkit-box-flex:0;-ms-flex:none;flex:none;width:75%}.column.is-two-thirds-mobile{-webkit-box-flex:0;-ms-flex:none;flex:none;width:66.6666%}.column.is-half-mobile{-webkit-box-flex:0;-ms-flex:none;flex:none;width:50%}.column.is-one-third-mobile{-webkit-box-flex:0;-ms-flex:none;flex:none;width:33.3333%}.column.is-one-quarter-mobile{-webkit-box-flex:0;-ms-flex:none;flex:none;width:25%}.column.is-offset-three-quarters-mobile{margin-left:75%}.column.is-offset-two-thirds-mobile{margin-left:66.6666%}.column.is-offset-half-mobile{margin-left:50%}.column.is-offset-one-third-mobile{margin-left:33.3333%}.column.is-offset-one-quarter-mobile{margin-left:25%}.column.is-1-mobile{-webkit-box-flex:0;-ms-flex:none;flex:none;width:8.33333%}.column.is-offset-1-mobile{margin-left:8.33333%}.column.is-2-mobile{-webkit-box-flex:0;-ms-flex:none;flex:none;width:16.66667%}.column.is-offset-2-mobile{margin-left:16.66667%}.column.is-3-mobile{-webkit-box-flex:0;-ms-flex:none;flex:none;width:25%}.column.is-offset-3-mobile{margin-left:25%}.column.is-4-mobile{-webkit-box-flex:0;-ms-flex:none;flex:none;width:33.33333%}.column.is-offset-4-mobile{margin-left:33.33333%}.column.is-5-mobile{-webkit-box-flex:0;-ms-flex:none;flex:none;width:41.66667%}.column.is-offset-5-mobile{margin-left:41.66667%}.column.is-6-mobile{-webkit-box-flex:0;-ms-flex:none;flex:none;width:50%}.column.is-offset-6-mobile{margin-left:50%}.column.is-7-mobile{-webkit-box-flex:0;-ms-flex:none;flex:none;width:58.33333%}.column.is-offset-7-mobile{margin-left:58.33333%}.column.is-8-mobile{-webkit-box-flex:0;-ms-flex:none;flex:none;width:66.66667%}.column.is-offset-8-mobile{margin-left:66.66667%}.column.is-9-mobile{-webkit-box-flex:0;-ms-flex:none;flex:none;width:75%}.column.is-offset-9-mobile{margin-left:75%}.column.is-10-mobile{-webkit-box-flex:0;-ms-flex:none;flex:none;width:83.33333%}.column.is-offset-10-mobile{margin-left:83.33333%}.column.is-11-mobile{-webkit-box-flex:0;-ms-flex:none;flex:none;width:91.66667%}.column.is-offset-11-mobile{margin-left:91.66667%}.column.is-12-mobile{-webkit-box-flex:0;-ms-flex:none;flex:none;width:100%}.column.is-offset-12-mobile{margin-left:100%}}@media screen and (min-width:769px),print{.column.is-narrow,.column.is-narrow-tablet{-webkit-box-flex:0;-ms-flex:none;flex:none}.column.is-full,.column.is-full-tablet{-webkit-box-flex:0;-ms-flex:none;flex:none;width:100%}.column.is-three-quarters,.column.is-three-quarters-tablet{-webkit-box-flex:0;-ms-flex:none;flex:none;width:75%}.column.is-two-thirds,.column.is-two-thirds-tablet{-webkit-box-flex:0;-ms-flex:none;flex:none;width:66.6666%}.column.is-half,.column.is-half-tablet{-webkit-box-flex:0;-ms-flex:none;flex:none;width:50%}.column.is-one-third,.column.is-one-third-tablet{-webkit-box-flex:0;-ms-flex:none;flex:none;width:33.3333%}.column.is-one-quarter,.column.is-one-quarter-tablet{-webkit-box-flex:0;-ms-flex:none;flex:none;width:25%}.column.is-offset-three-quarters,.column.is-offset-three-quarters-tablet{margin-left:75%}.column.is-offset-two-thirds,.column.is-offset-two-thirds-tablet{margin-left:66.6666%}.column.is-offset-half,.column.is-offset-half-tablet{margin-left:50%}.column.is-offset-one-third,.column.is-offset-one-third-tablet{margin-left:33.3333%}.column.is-offset-one-quarter,.column.is-offset-one-quarter-tablet{margin-left:25%}.column.is-1,.column.is-1-tablet{-webkit-box-flex:0;-ms-flex:none;flex:none;width:8.33333%}.column.is-offset-1,.column.is-offset-1-tablet{margin-left:8.33333%}.column.is-2,.column.is-2-tablet{-webkit-box-flex:0;-ms-flex:none;flex:none;width:16.66667%}.column.is-offset-2,.column.is-offset-2-tablet{margin-left:16.66667%}.column.is-3,.column.is-3-tablet{-webkit-box-flex:0;-ms-flex:none;flex:none;width:25%}.column.is-offset-3,.column.is-offset-3-tablet{margin-left:25%}.column.is-4,.column.is-4-tablet{-webkit-box-flex:0;-ms-flex:none;flex:none;width:33.33333%}.column.is-offset-4,.column.is-offset-4-tablet{margin-left:33.33333%}.column.is-5,.column.is-5-tablet{-webkit-box-flex:0;-ms-flex:none;flex:none;width:41.66667%}.column.is-offset-5,.column.is-offset-5-tablet{margin-left:41.66667%}.column.is-6,.column.is-6-tablet{-webkit-box-flex:0;-ms-flex:none;flex:none;width:50%}.column.is-offset-6,.column.is-offset-6-tablet{margin-left:50%}.column.is-7,.column.is-7-tablet{-webkit-box-flex:0;-ms-flex:none;flex:none;width:58.33333%}.column.is-offset-7,.column.is-offset-7-tablet{margin-left:58.33333%}.column.is-8,.column.is-8-tablet{-webkit-box-flex:0;-ms-flex:none;flex:none;width:66.66667%}.column.is-offset-8,.column.is-offset-8-tablet{margin-left:66.66667%}.column.is-9,.column.is-9-tablet{-webkit-box-flex:0;-ms-flex:none;flex:none;width:75%}.column.is-offset-9,.column.is-offset-9-tablet{margin-left:75%}.column.is-10,.column.is-10-tablet{-webkit-box-flex:0;-ms-flex:none;flex:none;width:83.33333%}.column.is-offset-10,.column.is-offset-10-tablet{margin-left:83.33333%}.column.is-11,.column.is-11-tablet{-webkit-box-flex:0;-ms-flex:none;flex:none;width:91.66667%}.column.is-offset-11,.column.is-offset-11-tablet{margin-left:91.66667%}.column.is-12,.column.is-12-tablet{-webkit-box-flex:0;-ms-flex:none;flex:none;width:100%}.column.is-offset-12,.column.is-offset-12-tablet{margin-left:100%}}@media screen and (max-width:999px){.column.is-narrow-touch{-webkit-box-flex:0;-ms-flex:none;flex:none}.column.is-full-touch{-webkit-box-flex:0;-ms-flex:none;flex:none;width:100%}.column.is-three-quarters-touch{-webkit-box-flex:0;-ms-flex:none;flex:none;width:75%}.column.is-two-thirds-touch{-webkit-box-flex:0;-ms-flex:none;flex:none;width:66.6666%}.column.is-half-touch{-webkit-box-flex:0;-ms-flex:none;flex:none;width:50%}.column.is-one-third-touch{-webkit-box-flex:0;-ms-flex:none;flex:none;width:33.3333%}.column.is-one-quarter-touch{-webkit-box-flex:0;-ms-flex:none;flex:none;width:25%}.column.is-offset-three-quarters-touch{margin-left:75%}.column.is-offset-two-thirds-touch{margin-left:66.6666%}.column.is-offset-half-touch{margin-left:50%}.column.is-offset-one-third-touch{margin-left:33.3333%}.column.is-offset-one-quarter-touch{margin-left:25%}.column.is-1-touch{-webkit-box-flex:0;-ms-flex:none;flex:none;width:8.33333%}.column.is-offset-1-touch{margin-left:8.33333%}.column.is-2-touch{-webkit-box-flex:0;-ms-flex:none;flex:none;width:16.66667%}.column.is-offset-2-touch{margin-left:16.66667%}.column.is-3-touch{-webkit-box-flex:0;-ms-flex:none;flex:none;width:25%}.column.is-offset-3-touch{margin-left:25%}.column.is-4-touch{-webkit-box-flex:0;-ms-flex:none;flex:none;width:33.33333%}.column.is-offset-4-touch{margin-left:33.33333%}.column.is-5-touch{-webkit-box-flex:0;-ms-flex:none;flex:none;width:41.66667%}.column.is-offset-5-touch{margin-left:41.66667%}.column.is-6-touch{-webkit-box-flex:0;-ms-flex:none;flex:none;width:50%}.column.is-offset-6-touch{margin-left:50%}.column.is-7-touch{-webkit-box-flex:0;-ms-flex:none;flex:none;width:58.33333%}.column.is-offset-7-touch{margin-left:58.33333%}.column.is-8-touch{-webkit-box-flex:0;-ms-flex:none;flex:none;width:66.66667%}.column.is-offset-8-touch{margin-left:66.66667%}.column.is-9-touch{-webkit-box-flex:0;-ms-flex:none;flex:none;width:75%}.column.is-offset-9-touch{margin-left:75%}.column.is-10-touch{-webkit-box-flex:0;-ms-flex:none;flex:none;width:83.33333%}.column.is-offset-10-touch{margin-left:83.33333%}.column.is-11-touch{-webkit-box-flex:0;-ms-flex:none;flex:none;width:91.66667%}.column.is-offset-11-touch{margin-left:91.66667%}.column.is-12-touch{-webkit-box-flex:0;-ms-flex:none;flex:none;width:100%}.column.is-offset-12-touch{margin-left:100%}}@media screen and (min-width:1000px){.column.is-narrow-desktop{-webkit-box-flex:0;-ms-flex:none;flex:none}.column.is-full-desktop{-webkit-box-flex:0;-ms-flex:none;flex:none;width:100%}.column.is-three-quarters-desktop{-webkit-box-flex:0;-ms-flex:none;flex:none;width:75%}.column.is-two-thirds-desktop{-webkit-box-flex:0;-ms-flex:none;flex:none;width:66.6666%}.column.is-half-desktop{-webkit-box-flex:0;-ms-flex:none;flex:none;width:50%}.column.is-one-third-desktop{-webkit-box-flex:0;-ms-flex:none;flex:none;width:33.3333%}.column.is-one-quarter-desktop{-webkit-box-flex:0;-ms-flex:none;flex:none;width:25%}.column.is-offset-three-quarters-desktop{margin-left:75%}.column.is-offset-two-thirds-desktop{margin-left:66.6666%}.column.is-offset-half-desktop{margin-left:50%}.column.is-offset-one-third-desktop{margin-left:33.3333%}.column.is-offset-one-quarter-desktop{margin-left:25%}.column.is-1-desktop{-webkit-box-flex:0;-ms-flex:none;flex:none;width:8.33333%}.column.is-offset-1-desktop{margin-left:8.33333%}.column.is-2-desktop{-webkit-box-flex:0;-ms-flex:none;flex:none;width:16.66667%}.column.is-offset-2-desktop{margin-left:16.66667%}.column.is-3-desktop{-webkit-box-flex:0;-ms-flex:none;flex:none;width:25%}.column.is-offset-3-desktop{margin-left:25%}.column.is-4-desktop{-webkit-box-flex:0;-ms-flex:none;flex:none;width:33.33333%}.column.is-offset-4-desktop{margin-left:33.33333%}.column.is-5-desktop{-webkit-box-flex:0;-ms-flex:none;flex:none;width:41.66667%}.column.is-offset-5-desktop{margin-left:41.66667%}.column.is-6-desktop{-webkit-box-flex:0;-ms-flex:none;flex:none;width:50%}.column.is-offset-6-desktop{margin-left:50%}.column.is-7-desktop{-webkit-box-flex:0;-ms-flex:none;flex:none;width:58.33333%}.column.is-offset-7-desktop{margin-left:58.33333%}.column.is-8-desktop{-webkit-box-flex:0;-ms-flex:none;flex:none;width:66.66667%}.column.is-offset-8-desktop{margin-left:66.66667%}.column.is-9-desktop{-webkit-box-flex:0;-ms-flex:none;flex:none;width:75%}.column.is-offset-9-desktop{margin-left:75%}.column.is-10-desktop{-webkit-box-flex:0;-ms-flex:none;flex:none;width:83.33333%}.column.is-offset-10-desktop{margin-left:83.33333%}.column.is-11-desktop{-webkit-box-flex:0;-ms-flex:none;flex:none;width:91.66667%}.column.is-offset-11-desktop{margin-left:91.66667%}.column.is-12-desktop{-webkit-box-flex:0;-ms-flex:none;flex:none;width:100%}.column.is-offset-12-desktop{margin-left:100%}}@media screen and (min-width:1192px){.column.is-narrow-widescreen{-webkit-box-flex:0;-ms-flex:none;flex:none}.column.is-full-widescreen{-webkit-box-flex:0;-ms-flex:none;flex:none;width:100%}.column.is-three-quarters-widescreen{-webkit-box-flex:0;-ms-flex:none;flex:none;width:75%}.column.is-two-thirds-widescreen{-webkit-box-flex:0;-ms-flex:none;flex:none;width:66.6666%}.column.is-half-widescreen{-webkit-box-flex:0;-ms-flex:none;flex:none;width:50%}.column.is-one-third-widescreen{-webkit-box-flex:0;-ms-flex:none;flex:none;width:33.3333%}.column.is-one-quarter-widescreen{-webkit-box-flex:0;-ms-flex:none;flex:none;width:25%}.column.is-offset-three-quarters-widescreen{margin-left:75%}.column.is-offset-two-thirds-widescreen{margin-left:66.6666%}.column.is-offset-half-widescreen{margin-left:50%}.column.is-offset-one-third-widescreen{margin-left:33.3333%}.column.is-offset-one-quarter-widescreen{margin-left:25%}.column.is-1-widescreen{-webkit-box-flex:0;-ms-flex:none;flex:none;width:8.33333%}.column.is-offset-1-widescreen{margin-left:8.33333%}.column.is-2-widescreen{-webkit-box-flex:0;-ms-flex:none;flex:none;width:16.66667%}.column.is-offset-2-widescreen{margin-left:16.66667%}.column.is-3-widescreen{-webkit-box-flex:0;-ms-flex:none;flex:none;width:25%}.column.is-offset-3-widescreen{margin-left:25%}.column.is-4-widescreen{-webkit-box-flex:0;-ms-flex:none;flex:none;width:33.33333%}.column.is-offset-4-widescreen{margin-left:33.33333%}.column.is-5-widescreen{-webkit-box-flex:0;-ms-flex:none;flex:none;width:41.66667%}.column.is-offset-5-widescreen{margin-left:41.66667%}.column.is-6-widescreen{-webkit-box-flex:0;-ms-flex:none;flex:none;width:50%}.column.is-offset-6-widescreen{margin-left:50%}.column.is-7-widescreen{-webkit-box-flex:0;-ms-flex:none;flex:none;width:58.33333%}.column.is-offset-7-widescreen{margin-left:58.33333%}.column.is-8-widescreen{-webkit-box-flex:0;-ms-flex:none;flex:none;width:66.66667%}.column.is-offset-8-widescreen{margin-left:66.66667%}.column.is-9-widescreen{-webkit-box-flex:0;-ms-flex:none;flex:none;width:75%}.column.is-offset-9-widescreen{margin-left:75%}.column.is-10-widescreen{-webkit-box-flex:0;-ms-flex:none;flex:none;width:83.33333%}.column.is-offset-10-widescreen{margin-left:83.33333%}.column.is-11-widescreen{-webkit-box-flex:0;-ms-flex:none;flex:none;width:91.66667%}.column.is-offset-11-widescreen{margin-left:91.66667%}.column.is-12-widescreen{-webkit-box-flex:0;-ms-flex:none;flex:none;width:100%}.column.is-offset-12-widescreen{margin-left:100%}}@media screen and (min-width:1384px){.column.is-narrow-fullhd{-webkit-box-flex:0;-ms-flex:none;flex:none}.column.is-full-fullhd{-webkit-box-flex:0;-ms-flex:none;flex:none;width:100%}.column.is-three-quarters-fullhd{-webkit-box-flex:0;-ms-flex:none;flex:none;width:75%}.column.is-two-thirds-fullhd{-webkit-box-flex:0;-ms-flex:none;flex:none;width:66.6666%}.column.is-half-fullhd{-webkit-box-flex:0;-ms-flex:none;flex:none;width:50%}.column.is-one-third-fullhd{-webkit-box-flex:0;-ms-flex:none;flex:none;width:33.3333%}.column.is-one-quarter-fullhd{-webkit-box-flex:0;-ms-flex:none;flex:none;width:25%}.column.is-offset-three-quarters-fullhd{margin-left:75%}.column.is-offset-two-thirds-fullhd{margin-left:66.6666%}.column.is-offset-half-fullhd{margin-left:50%}.column.is-offset-one-third-fullhd{margin-left:33.3333%}.column.is-offset-one-quarter-fullhd{margin-left:25%}.column.is-1-fullhd{-webkit-box-flex:0;-ms-flex:none;flex:none;width:8.33333%}.column.is-offset-1-fullhd{margin-left:8.33333%}.column.is-2-fullhd{-webkit-box-flex:0;-ms-flex:none;flex:none;width:16.66667%}.column.is-offset-2-fullhd{margin-left:16.66667%}.column.is-3-fullhd{-webkit-box-flex:0;-ms-flex:none;flex:none;width:25%}.column.is-offset-3-fullhd{margin-left:25%}.column.is-4-fullhd{-webkit-box-flex:0;-ms-flex:none;flex:none;width:33.33333%}.column.is-offset-4-fullhd{margin-left:33.33333%}.column.is-5-fullhd{-webkit-box-flex:0;-ms-flex:none;flex:none;width:41.66667%}.column.is-offset-5-fullhd{margin-left:41.66667%}.column.is-6-fullhd{-webkit-box-flex:0;-ms-flex:none;flex:none;width:50%}.column.is-offset-6-fullhd{margin-left:50%}.column.is-7-fullhd{-webkit-box-flex:0;-ms-flex:none;flex:none;width:58.33333%}.column.is-offset-7-fullhd{margin-left:58.33333%}.column.is-8-fullhd{-webkit-box-flex:0;-ms-flex:none;flex:none;width:66.66667%}.column.is-offset-8-fullhd{margin-left:66.66667%}.column.is-9-fullhd{-webkit-box-flex:0;-ms-flex:none;flex:none;width:75%}.column.is-offset-9-fullhd{margin-left:75%}.column.is-10-fullhd{-webkit-box-flex:0;-ms-flex:none;flex:none;width:83.33333%}.column.is-offset-10-fullhd{margin-left:83.33333%}.column.is-11-fullhd{-webkit-box-flex:0;-ms-flex:none;flex:none;width:91.66667%}.column.is-offset-11-fullhd{margin-left:91.66667%}.column.is-12-fullhd{-webkit-box-flex:0;-ms-flex:none;flex:none;width:100%}.column.is-offset-12-fullhd{margin-left:100%}}.columns{margin-left:-.75rem;margin-right:-.75rem;margin-top:-.75rem}.columns:last-child{margin-bottom:-.75rem}.columns:not(:last-child){margin-bottom:.75rem}.columns.is-centered{-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center}.columns.is-gapless{margin-left:0;margin-right:0;margin-top:0}.columns.is-gapless:last-child{margin-bottom:0}.columns.is-gapless:not(:last-child){margin-bottom:1.5rem}.columns.is-gapless>.column{margin:0;padding:0}@media screen and (min-width:769px){.columns.is-grid{-ms-flex-wrap:wrap;flex-wrap:wrap}.columns.is-grid>.column{max-width:33.3333%;padding:.75rem;width:33.3333%}.columns.is-grid>.column+.column{margin-left:0}}.columns.is-mobile{display:-webkit-box;display:-ms-flexbox;display:flex}.columns.is-multiline{-ms-flex-wrap:wrap;flex-wrap:wrap}.columns.is-vcentered{-webkit-box-align:center;-ms-flex-align:center;align-items:center}@media screen and (min-width:769px){.columns:not(.is-desktop){display:-webkit-box;display:-ms-flexbox;display:flex}}@media screen and (min-width:1000px){.columns.is-desktop{display:-webkit-box;display:-ms-flexbox;display:flex}}.label{-webkit-border-radius:4px;-moz-border-radius:4px;border-radius:4px;padding:3px 5px 4px;color:#fff;font-weight:700;text-transform:uppercase;white-space:nowrap;font-size:.75em;left:10px;top:-15px;position:relative}div.box p,div.box ul{position:relative;top:-20px}.box.moody .label{background-color:#f89406}.box.happy .label{background-color:#46a546}.box.angry .label{background-color:#c43c35}code,div.box{-webkit-border-radius:4px;-moz-border-radius:4px;border-radius:4px;padding:0 5px;border:1px solid #ccc;margin-bottom:25px;font-size:.9em}.angry{background-color:#ffd7d5;border-color:#c43c35}.happy{background-color:#c0e0c0;border-color:#46a546}.moody{background-color:#ffecd1;border-color:#f89406}@page{size:1210px 681px;margin:0}@media print{.remark-slide-scaler{width:100%!important;height:100%!important;transform:scale(1)!important;top:0!important;left:0!important}}</style><script type="text/javascript" async src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/latest.js?config=TeX-MML-AM_CHTML" async></script> <script src="https://cdn.jsdelivr.net/npm/highlightjs-line-numbers.js@2.6.0/dist/highlightjs-line-numbers.min.js"></script> <script>hljs.initHighlightingOnLoad();hljs.initLineNumbersOnLoad();</script> <link rel="stylesheet2" href="https://cdnjs.cloudflare.com/ajax/libs/mermaid/7.0.10/mermaid.min.css"> <script>mermaid.initialize({startOnLoad:true});</script> <script async src="https://www.googletagmanager.com/gtag/js?id=UA-127734928-1"></script> <script>window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments);} gtag('js',new Date());gtag('config','UA-127734928-1');</script> <script>(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)})(window,document,'script','//www.google-analytics.com/analytics.js','ga');ga('create','UA-127734928-1','auto');ga('send','pageview');</script> </head><body> <script>if(window.location.search.match(/print-pdf/gi)){var link=document.createElement('link');link.rel='stylesheet';link.type='text/css';link.href='../pdf.css';document.getElementsByTagName('head')[0].appendChild(link);}</script> <textarea id="source">class: center, middle

## [High-performance computing (HPC)](/courses/#table-of-contents)
### V2-openMP


.author[[Milovan TomaÅ¡eviÄ‡, Ph.D.](https://www.milovantomasevic.com/)]

.small[</br>[ğŸŒâ™ milovantomasevic.com](https://milovantomasevic.com)</br> [âœâ™ mt@milovantomasevic.com](mailto:mt@milovantomasevic.com)]



.created[26.03.2019 u 11:03]


---



class: split-20 nopadding
background-image: url(../key.jpg)

.column_t2.center[.vmiddle[
.fgtransparent[
![:scale 80%](../zahvalnica.png)
]
]]
.column_t2[.vmiddle.nopadding[
.shadelight[.boxtitle1[
.small[
## Acknowledgements

#### University of Novi Sad | Serbia

- [Gorana GojiÄ‡, MS, Teaching assistant](http://www.acs.uns.ac.rs/en/user/49)
- [Veljko PetroviÄ‡, Ph.D., Assistant Professor](http://www.acs.uns.ac.rs/en/user/30)
- [Faculty of Technical Sciences](http://ftn.uns.ac.rs/)
- [Computing and Control Department | Chair for Applied Computer Sciences](http://www.acs.uns.ac.rs/en)
]]]
]]

.footer.small[
- #### Slides are created according to sources in the literature & Acknowledgements
]

---

name: sadrzaj

# SadrÅ¾aj

- [Uvod](#uvod)
- [OpenMP](#openmp)
- [loop konstrukcija](#loop)
- [Redukcije](#redukcije)
- [Implicitna vs. eksplicitna barijera](#vs)
- [sections/section konstrukcija](#ss)

---
name: uvod 
class: center, middle, inverse

# Uvod

---
layout: true

.section[[Uvod](#sadrzaj)]

---

## Tematske celine
            
- OpenMP 
- OpenMPI 
- OpenACC
        
---

## Softver
            
- VeÅ¾be se izvode na raÄunarima sa instaliranim Ubuntu 18.04 operativnim sistemom.
- Dodatni softverski paketi potrebni za rad: 
  - `gcc`, `g++` (obavezno), `cmake`, `make` (opciono)
  - `libhdf5-dev` za rad sa izgenerisanim podacima za testiranje reÅ¡enja (vrlo poÅ¾eljno)
  - `libopenmpi-dev`, `openmpi-common` i `openmpi-bin` za rad sa OpenMPI programima.
- OdgovarajuÄ‡e verzije navedenih paketa su dostupne u zvaniÄnom Ubuntu repozitorijumu. 
- Paketi se mogu instalirati komandom:
    -  `sudo apt install <naziv-paketa>`
  

---
name: openmp 
class: center, middle, inverse
layout: false

# OpenMP

---
layout: true

.section[[OpenMP](#sadrzaj)]

---

## OpenMP

- API za programiranje paralelnih aplikacija na viÅ¡eprocesnim (eng. *multiprocessing*) maÅ¡inama, zasnovan na konceptu deljenja memorije.
- Obuhvata skup kompajlerskih direktiva (eng. *compiler directives*), biblioteÄkih rutina (eng. *library routines*) i promenljivih okruÅ¾enja (eng. *environment variables*).
- Postoji podrÅ¡ka za programske jezike C, C++ i Fortran.
  
---

## Fork-join model

  ![:scale 70%](img/Fork_join.png)
  .medium[
- Paralelni region (eng. *Parallel region*) - deo programa koji izvrÅ¡ava tim niti
- `Master nit`
- `Novokreirane niti` - identifikatori od 1 do N âˆ’ 1, ne postoje nakon paralelnog regiona u kojem su kreirane
- Sve niti u paralelnom regionu Äine `tim niti`.
  ]

---

## Fork-join model

- U OpenMP se tim niti kreira koriÅ¡Ä‡enjem parallel konstrukcije 
  - (eng. *parallel construct*)
  .center[
```c
#pragma omp parallel[clause[ [,] clause] ... ]
strukturirani-blok
```
  ]
- Svaka izvrÅ¡ava isti segment koda 
  - (*Single Process Multiple Data* (SPMD)).
  
---

## Hello World!

.medium[
.message.is-dark[
.message-header[
Primer
]
.message-body[
```c
    #include <stdio.h> 
    #include <omp.h>

    int main() {

        #pragma omp parallel
        {
            int id = omp_get_thread_num();
            printf("Hello(%d)", id);
            printf(" world!(%d)\n", id);
        }
        return 0; 
    }
```

```console
    mt@mt:~/courses/high-performance-computing$ gcc -o hello hello.c -fopenmp
    mt@mt:~/courses/high-performance-computing$ ./hello
    Hello(7) world!(7)
    Hello(2) world!(2)
    Hello(4) world!(4)
    Hello(3) world!(3)
    Hello(1) world!(1)
    Hello(0) world!(0)
    Hello(5) world!(5)
    Hello(6) world!(6)
```
]
]
]

---

## Hello World!

- Jedan primer izvrÅ¡avanja:
  

- Iako nigde u primeru broj niti nije zadat, OpenMP radno okruÅ¾enje (eng. *execution environment*) je odluÄilo da napravi 8 niti.
- TipiÄno, OpenMP radno okruÅ¾enje pravi onoliko niti koliko ima jezgara (fiziÄkih ili logiÄkih). 
- Npr. ovaj ispis je dobijen izvrÅ¡avanjem na Intelovom procesoru IntelÂ® Coreâ„¢ i7-8550U (8 logiÄkih jezgara).

---

## Hello World!

- Da li bi se program brÅ¾e izvrÅ¡io ako bismo eksplicitno zatraÅ¾ili, na primer, 8 niti?
  - `omp_set_num_threads() OMP_NUM_THREADS`
- MoguÄ‡e je i da radno okruÅ¾enje *ne napravi* onoliko niti koliko ste od njega zatraÅ¾ili usled postojeÄ‡ih ograniÄenja!
- Druge interesantne funkcije: 
  - `omp_get_num_threads, omp_get_thread_num, omp_get_max_threads`

---

## Kompajliranje i pokretanje

- Kako kompajlirati? 
  - Otvoriti terminal, pozicionirati se u direktorijum u kojem se nalazi izvorna datoteka (izvornad.c) i uneti:
  .center[
    ```console
    gcc [-g] [-o izvrsnad] izvornad.c -fopenmp [-O2]
    ```
  ]
- U sluÄaju da postoji viÅ¡e izvornih datoteka, potrebno ih je sve navesti. Delovi u uglatim zagradama nisu obavezni.
- Opcije:
    - `-g` - omoguÄ‡ava prikupljanje podataka za debagovanje
    - `-o` - specificira naziv izlazne datoteke, u ovom sluÄaju to je izvrÅ¡na datoteka
    - `-O2` | `-O3` - indikator kompajleru da primeni odreÄ‘ene skupove optimizacija (O3 veÄ‡i skup optimizacija od O2). 
    - Upotreba ovih opcija se *ne preporuÄuje* u kombinaciji sa `-g` opcijom!

  
---

## Kompajliranje i pokretanje

- Kako pokrenuti iskompajlirano reÅ¡enje? 
  - Otvoriti terminal, pozicionirati se u direktorijum u kojem se nalazi izvrÅ¡na datoteka (izvrsnad) i uneti:
  .center[
    ```console
    ./izvrsnad <lista-argumenata>
    ```
  ]
- U sluÄaju da pri kompajliranju nije navedeno ime izvrÅ¡ne datoteke, ona Ä‡e se podrazumevano zvati a.out.
 

---

## Zadatak 1: RaÄunanje vrednosti broja Ï€

.message.is-info[
.message-header[
Zadatak
]
.message-body[
- KoriÅ¡Ä‡enjem samo parallel konstrukcije, paralelizovati program koji raÄuna vrednost integrala

<p>

$$ \int_{0}^{1} \frac{4}{(1+x^{2})} $$
  
</p>

- Sekvencijalna implementacija programa u C programskom jeziku je data u direktorijumu zadaci. Rezultat integraljenja bi trebalo da bude jednak broju Ï€. Potrebno je dodati parallel konstrukciju bez daljih modifikacija sekvencijalnog programa.

- Å ta se deÅ¡ava sa rezultatom?
]
]

--
.message.is-success[
.message-header[
Odgovor
]
.message-body[
- Funkcija `parallel_code_incorrect` <a target="_blank" rel="noopener noreferrer" href="/courses/hpc-z1-openMP/#table-of-contents"> â˜› reÅ¡enja/`pi.c`</a>
]
]

---

## Tipovi promenljivih
- **Deljene**, odnosno **globalne** - Prostor za ove promenljive se
zauzima na hipu, kome pristupaju sve niti. 
- *Potencijalni kandidati za Å¡tetno preplitanje*! 
- U deljene promenljive se ubrajaju:
	- statiÄke promenljive i
	- promenljive alocirane izvan paralelnog regiona (na primer promenljiva sum iz zadatka 1)

- **Privatne**, odnosno **lokalne** - Vidljive samo u okviru niti u kojoj su deklarisane. Prostor za ove promenljive se zauzima na `steku niti`. 
- U privatne promenljive se ubrajaju:
	- promenljive deklarisane unutar paralelnog regiona (x)
	- promenljive promenljive deklarisane unutar funkcije koja je pozvana iz paralelnog regiona i
	- brojaÄke promenljive u `for` petlji prvog nivoa

- `OMP_STACKSIZE` za upravljanje veliÄinom steka niti

---

## Zadatak 2: RaÄunanje vrednosti broja Ï€

.message.is-info[
.message-header[
Zadatak
]
.message-body[

- Modifikovati reÅ¡enje prethodnog zadatka tako da se ukloni Å¡tetno preplitanje.

]
]

--
.message.is-success[
.message-header[
Odgovor
]
.message-body[
- Funkcija `parallel_code` <a target="_blank" rel="noopener noreferrer" href="/courses/hpc-z1-openMP/#table-of-contents"> â˜› reÅ¡enja/`pi.c`</a>
]
]

---

## Zadatak 3*: RaÄunanje vrednosti broja Ï€

.message.is-info[
.message-header[
Zadatak
]
.message-body[
- Paralelno reÅ¡enje zadatka 2 eliminiÅ¡e problem Å¡tetnog preplitanja, ali uvodi problem laÅ¾nog deljenja (eng. *false sharing*) pri pristupu nizovnoj promenljivoj `sum`.
- Izmeniti reÅ¡enje tako se otkloni laÅ¾no deljenje.
]
]

--
.message.is-warning[
.message-header[
Info
]
.message-body[
- Razmisliti o tome koliko se elemenata niza prenosi u keÅ¡ procesora kada se pristupa jednom elementu.
]
]

--
.message.is-success[
.message-header[
Odgovor
]
.message-body[
- Funkcija `parallel_code_no_false_sharing` <a target="_blank" rel="noopener noreferrer" href="/courses/hpc-z1-openMP/#table-of-contents"> â˜› reÅ¡enja/`pi.c`</a>
]
]

---

## Sinhronizacioni konstrukti
- Sinhronizacija visokog nivoa apstrakcije:
    - barrier construct - definiÅ¡e taÄku u kodu do koje sve aktivne niti moraju da se zaustave dok do te taÄke ne stigne i poslednja nit, nakon Äega sve niti mogu nastaviti dalje izvrÅ¡avanje. `#pragma omp barrier`


- `critical construct` - samo jedna nit moÅ¾e u jednom trenutku biti u kritiÄnoj sekciji.
```c
	#pragma omp critical
		strukturirani-blok
```

- `atomic construct` - hardverski podrÅ¾an iskljuÄiv pristup aÅ¾uriranju vrednosti proste promenljive. Ukoliko nema hardverske podrÅ¡ke, ova konstrukcija se ponaÅ¡a kao i `critical` - `#pragma omp atomic`

---

## Zadatak 4: RaÄunanje vrednosti broja pi

.message.is-info[
.message-header[
Zadatak
]
.message-body[
- Doraditi reÅ¡enje zadatka 2 tako da se Å¡tetno preplitanje ukloni odgovarajuÄ‡im sinhronizacionim mehanizmom.
]
]

--
.message.is-success[
.message-header[
Odgovor
]
.message-body[
- Funkcija  `parallel_code_synchronization` <a target="_blank" rel="noopener noreferrer" href="/courses/hpc-z1-openMP/#table-of-contents"> â˜› reÅ¡enja/`pi.c`</a>
]
]

---

## Konstrukcije za podelu posla

- eng. *worksharing constructs*

	- `loop` konstrukcija (eng. *loop construct*)
	- `sections/section` konstrukcija (eng. *sections/section construct*)
	- `single` konstrukcija (eng. *single construct*)

- Na kraju bloka koda koji se izvrÅ¡ava u sklopu neke od konstrukcija za podelu posla podrazumevano postoji `implicitna barijerna sinhronizacija`.
- Podrazumevano ponaÅ¡anje se moÅ¾e promeniti navoÄ‘enjem `nowait` klauze u okviru direktiva za podelu posla (primer kasnije).

---


## Implicitna barijerna sinhronizacija

- Implicitna barijerna sinhronizacija se takoÄ‘e podrazumevano  nalazi i na kraju paralelnog regiona, ali je za razliku od konstrukcija za podelu posla, nije moguÄ‡e odatle ukloniti.

- ZaÅ¡to?

---

name: loop 
class: center, middle, inverse
layout: false

# loop konstrukcija

---
layout: true

.section[[loop konstrukcija](#sadrzaj)]

---

## loop konstrukcija

- Sintaksa:
 ```c
 #pragma omp for [clause[ [,] clause] ... ]
    for-petlje
```

- Problemi u raÄunarstvu visokih performansi se Äesto svode na rad sa velikim nizovima! To znaÄi da Äesto postoji iteriranje kroz nizove...
- Taj posao moÅ¾e da se podeli na viÅ¡e niti! Svaka nit u paraleli moÅ¾e obraditi parÄe niza.

- Ovaj naÄin raspodele podataka ste veÄ‡ implementirali u zadatku 2, ali ste sami morali da specificirate granice niza nad kojima radi svaka pojedinaÄna nit.

---

## Primer 2: `loop` konstrukcija

.message.is-dark[
.message-header[
Primer
]
.message-body[
- Primer upotrebe `for` direktive
```c
#pragma omp parallel
    {
        int sum = 0;
        #pragma omp for
        for (int i = 0; i < N; i++)
            sum += A[i];
    }
```

- KoriÅ¡Ä‡enjem kombinovane konstrukcije:
```c
    #pragma omp parallel for
    {
        int sum = 0;
        for (int i = 0; i < N; i++)
            sum += A[i];
    }
```
]
]

---


## loop konstrukcija: rasporeÄ‘ivanje

- **Kako Ä‡e iteracije petlje biti dodeljene nitima?**
- OpenMP podrÅ¾ava viÅ¡e strategija rasporeÄ‘ivanja koje se mogu specificirati schedule klauzom.

```c
#pragma omp for schedule(tip [,velicina_bloka])
```

---


## loop konstrukcija: rasporeÄ‘ivanje

- **Kako Ä‡e iteracije petlje biti dodeljene nitima?**
	- `static` - blokovi iteracija se dodeljuju nitima u vreme kompajliranja po `round-robin` principu

	- `dynamic` - blokovi iteracija se dodeljuju nitima u vreme izvrÅ¡avanja tako da optereÄ‡enje niti bude optimalno

	- `guided` - modifikacija dinamiÄkog rasporeÄ‘ivanja gde je svaki naredni blok dodeljen niti manji od prethodnog

	- `auto`  - kompajler odreÄ‘uje tip rasporeÄ‘ivanja koji misli da je najbolji za problem 
	- `runtime` - moguÄ‡e je "spolja" uticati na tip rasporeÄ‘ivanja preko `OMP_SCHEDULE` promenljive okruÅ¾enja

---

name: redukcije 
class: center, middle, inverse
layout: false

# Redukcije

---
layout: true

.section[[Redukcije](#sadrzaj)]

---


## Redukcije

- Prisetimo se nepotpunog paralelnog sabiranja elemenata niza iz primera 2
```c
    #pragma omp parallel for
    {
        int sum = 0;
        for (int i = 0; i < N; i++) {
            sum += A[i];
        } 
    }
    /* saberi parcijalne sume */
```

- Da bi program bio potpuno funkcionalan, potrebno je posabirati parcijalne sume koje sraÄunaju niti.

---


## Redukcije

- MoÅ¾e da se uradi ovako:
```C
	int sum = 0;
	#pragma omp parallel for
{
		for (int i = 0; i < N; i++) {
				#pragma omp critical
				sum += A[i];
		}
}
``` 
- I u deljenoj promenljivoj sum Ä‡e biti konaÄan rezultat. 
- Ali ovo je **MNOGO** neefikasno!

---


## Redukcije

- A moÅ¾e i ovako:
```c
	int sum = 0;
	#pragma omp parallel for reduction(+:sum)
{
		for (int i = 0; i < N; i++) {
				sum += A[i];
		}
}
```
- Å ta zapravo znaÄi `reduction(+:sum)?`

--

.message.is-warning[
.message-header[
Info
]
.message-body[
1. Za svaku nit u paralelnom regionu napravi po jednu privatnu
instancu promenljive `sum` i inicijalizuj je na vrednost neutralnu
za navedeni redukcioni operator (u sluÄaju sabiranja je to 0).

2. Svaka nit menja svoju kopiju promenljive `sum.`

3. Na kraju petlje, rezultati se kombinuju upotrebom redukcionog
operatora u deljenu promenljivu `sum.`

]
]

---


## Redukcije
- OpÅ¡ti format redukcije:
```c
reduction(redukcioni_operator : lista_promenljivih)
``` 
- UgraÄ‘eni redukcioni operatori za C/C++:
  
.center-table.small[

| **Operacija** |      **Vrednost**      |
|:-------------:|:----------------------:|
|       +       |            0           |
|       *       |            1           |
|       -       |            0           |
|      min      | najveÄ‡i pozitivan broj |
|      max      | najveÄ‡i negativan broj |
|       &       |           ~0           |
|      I        |            0           |
|       Ë†       |            0           |
|       &&      |            1           |
|     II        |            0           |

]

---

## Zadatak 5: RaÄunanje vrednosti broja pi

.message.is-info[
.message-header[
Zadatak
]
.message-body[
- Implementirati paralelno reÅ¡enje raÄunanja vrednosti broja pi uz
koriÅ¡Ä‡enje `for`  direktive i reduction klauze.
]
]

--
.message.is-success[
.message-header[
Odgovor
]
.message-body[
- Funkcija `parallel_code_for_construct` <a target="_blank" rel="noopener noreferrer" href="/courses/hpc-z1-openMP/#table-of-contents"> â˜› reÅ¡enja/`pi.c`</a>
]
]

---

name: vs 
class: center, middle, inverse
layout: false

# Implicitna vs. eksplicitna barijera

---
layout: true

.section[[Implicitna vs. eksplicitna barijera](#sadrzaj)]

---
## Implicitna vs. eksplicitna barijera 

- Eksplicitna barijera je zadata `#pragma omp barrier direktivom`.
- Implicitna barijera je barijera veÄ‡ ukljuÄena u neku konstrukciju (npr. `for`  konstrukciju).

---
## Implicitna vs. eksplicitna barijera 

.message.is-info[
.message-header[
Zadatak
]
.message-body[
- U kojem delu koda Ä‡e se niti sinhronizovati?
```c
	#pragma omp parallel
	{
			/* prvi blok naredbi */
			#pragma omp barrier
			/* drugi blok naredbi */
    }
```
]
]

---

## Implicitna vs. eksplicitna barijera 

.message.is-info[
.message-header[
Zadatak
]
.message-body[
- U kojem delu koda Ä‡e se niti sinhronizovati?
```c
	#pragma omp parallel
	{
			/* prvi blok naredbi */
			#pragma omp barrier
			/* drugi blok naredbi */
    }
```
]
]
.message.is-success[
.message-header[
Odgovor
]
.message-body[
- Na barrier direktivi (eksplicitna barijerna sinhronizacija).
]
]

---
## Implicitna vs. eksplicitna barijera

.message.is-info[
.message-header[
Zadatak
]
.message-body[
- U kojem delu koda Ä‡e se niti sinhronizovati?
```c
	#pragma omp parallel for
	for (i = 0; i < N; i++)
		/* prvi blok naredbi */
	/* drugi blok naredbi */
```
]
]

---
## Implicitna vs. eksplicitna barijera 

.message.is-info[
.message-header[
Zadatak
]
.message-body[
- U kojem delu koda Ä‡e se niti sinhronizovati?
```c
	#pragma omp parallel for
	for (i = 0; i < N; i++)
		/* prvi blok naredbi */
	/* drugi blok naredbi */
```
]
]

.message.is-success[
.message-header[
Odgovor
]
.message-body[
- Na kraju prvog bloka naredbi. Sve niti moraju da zavrÅ¡e svoje iteracije petlje da bi mogle da nastave sa drugim blokom naredbi, jer podrazumevano `loop` konstrukcija ima ugraÄ‘enu implicitnu barijeru.
]
]

---
## Implicitna vs. eksplicitna barijera 

.message.is-info[
.message-header[
Zadatak
]
.message-body[
- U kojem delu koda Ä‡e se niti sinhronizovati?
```c
	#pragma omp parallel for nowait
	for (i = 0; i < N; i++)
		/* prvi blok naredbi */
    /* drugi blok naredbi */
``` 
]
]

---
## Implicitna vs. eksplicitna barijera 

.message.is-info[
.message-header[
Zadatak
]
.message-body[
- U kojem delu koda Ä‡e se niti sinhronizovati?
```c
	#pragma omp parallel for nowait
	for (i = 0; i < N; i++)
		/* prvi blok naredbi */
    /* drugi blok naredbi */
``` 
]
]

.message.is-success[
.message-header[
Odgovor
]
.message-body[
- Na kraju paralelnog regiona. Implicitna barijera loop konstrukcije je onemoguÄ‡ena upotrebom `nowait` klauze.
]
]

---
name: ss 
class: center, middle, inverse
layout: false

# sections/section konstrukcija

---
layout: true

.section[[sections/section konstrukcija](#sadrzaj)]

---
## sections/section konstrukcija

- Svaka nit unutar sections konstrukcije izvrÅ¡ava jedan blok koda koji pripada sekciji.

- Sintaksa:
```c
	#pragma omp sections [clause[ [,] clause] ... ]
	{
		[ #pragma omp section ]
				strukturirani-blok
		[ #pragma omp section
				strukturirani-blok ]
	...
} 
``` 

---
## Primer 3: sections/section konstrukcija

.message.is-dark[
.message-header[
Primer
]
.message-body[
```c
	#pragma omp parallel
	{
		#pragma omp sections
		{
		#pragma omp section
			x_calculation();
		#pragma omp section
			y_calculation();
		#pragma omp section
			z_calculation();
		}
	}
```
]
]

---
## single konstrukcija

- Sintaksa:
```c
#pragma omp single [clause[ [,] clause] ... ]
    strukturirani-blok
``` 

- Blok naredbi izvrÅ¡ava samo nit koja prva uÄ‘e u strukturirani blok.
```c
	#pragma omp parallel
	{
		do_many_things();
		#pragma omp single
			{ exchange_boundaries(); }
		#pragma omp barrier
			do_many_other_things();
	}
```
---
## master konstrukcija

- Sintaksa:
```c
#pragma omp master
strukturirani-blok
```

- Blok naredbi izvrÅ¡ava samo master nit.
```c
	#pragma omp parallel
	{
		do_many_things();
		#pragma omp master
			{ exchange_boundaries(); }
		#pragma omp barrier
				do_many_other_things();
	}
```

- Nema implicitne sinhronizacije.

---
## Sihnronizacioni mehanizmi: lock

- Pripada mehanizmima niskog nivoa sinhronizacije.

- Analogni pojam propusnici iz C++11 viÅ¡enitnog okruÅ¾enja.

- `critical` direktiva u pozadini koristi `lock`.  
- ZaÅ¡to biste onda ikada Å¾eleli da direktno koristite ovu direktivu?

- Nema problema, ako na primer, ograniÄavate pristup jednoj celobrojnoj promenljivoj kroz kritiÄnu sekciju.  
- Ali Å¡ta Ä‡e se desiti ako kroz kritiÄnu sekciju ograniÄite pristup elementima nekog niza?

---
## Primer 3: histogram

![:scale 65%](img/histogram.png)

.center[
    `int` histogram[255];
]

---
## Primer 4: histogram

```C
	#pragma omp parallel for
	for (i = 0; i < NBUCKETS; i+) {
		omp_init_lock(&hist_locks[i]);
		hist[i] = 0;
    }

	#pragma omp parallel for
	for (i = 0; i < NVALS; i++) {
		ival = (int) sample(arr[i]);
		omp_set_lock(&hist_locks[ival]);
			hist[ival]++;
		omp_unset_lock(&hist_locks[ival]);
    }

    for (i = 0; i < NBUCKETS; i++) {
		omp_destroy_lock(&hist_locks[i]);
    }
``` 

---
## Klauze za rad sa podacima

- `shared`(<lista-promenljivih>)
- `private`(<lista-promenljivih>)
- `firstprivate`(<lista-promenljivih>)
- `lastprivate`(<lista-promenljivih>)
- `default( private | shared | none )` - Ako se niÅ¡ta ne navede za ovu klauzu, podrazumevana vrednost u C i C++ programskim jezicima je `shared.`

---

## Primer 5: Klauze za rad sa podacima

.message.is-info[
.message-header[
Zadatak
]
.message-body[
```c
	void dummy() {
		int tmp = 0;
	#pragma omp parallel for private(tmp)
	for (int j = 0; j < 5; j++)
		tmp += j;
	printf("%d\n", tmp);
	}
```
- Koja vrednost Ä‡e biti ispisana na standardni izlaz?
]
]

---

## Primer 5: Klauze za rad sa podacima

.message.is-info[
.message-header[
Zadatak
]
.message-body[
```c
	void dummy() {
		int tmp = 0;
	#pragma omp parallel for private(tmp)
	for (int j = 0; j < 5; j++)
		tmp += j;
	printf("%d\n", tmp);
	}
```
- Koja vrednost Ä‡e biti ispisana na standardni izlaz?
]
]

.message.is-success[
.message-header[
Odgovor
]
.message-body[

- Na standardni izlaz Ä‡e biti ispisana vrednost 0.
- **ObjaÅ¡njenje**:  <br> Kako je promenljiva tmp proglaÅ¡ena privatnom, svaka nit Ä‡e imati svoju instancu ove promenljive. Po zavrÅ¡etku petlje, lokalne promenljive Ä‡e biti uniÅ¡tene, a deljena promenljiva `tmp` Ä‡e zadrÅ¾ati svoj u inicijalnu vrednost.

]
]

---

## Primer 5: Klauze za rad sa podacima

.message.is-info[
.message-header[
Zadatak
]
.message-body[
```c
	void dummy() {
		int tmp = 0;
		#pragma omp parallel for private(tmp)
		for (int j = 0; j < 5; j++)
				tmp += j;
			printf("%d\n", tmp);
}
```
- Koja je inicijalna vrednost privatnih verzija promenljive `tmp`?
]
]

---

## Primer 5: Klauze za rad sa podacima

.message.is-info[
.message-header[
Zadatak
]
.message-body[
```c
	void dummy() {
		int tmp = 0;
		#pragma omp parallel for private(tmp)
		for (int j = 0; j < 5; j++)
				tmp += j;
			printf("%d\n", tmp);
}
```
- Koja je inicijalna vrednost privatnih verzija promenljive `tmp`?
]
]

.message.is-success[
.message-header[
Odgovor
]
.message-body[
- Inicijalna vrednost privatnih promenljivih tmp je nepoznata.
- **ObjaÅ¡njenje**:  <br>Klauza private`(tmp)` kaÅ¾e kompajleru da treba da alocira prostor za promenljivu tmp na steku. Kompajler ne mora inicijalizovati zauzetu lokaciju.
]
]

---

## Primer 5: Klauze za rad sa podacima

.message.is-info[
.message-header[
Zadatak
]
.message-body[
```c
	void dummy() {
		int tmp = 0;
		#pragma omp parallel for private(tmp)
		for (int j = 0; j < 5; j++)
			tmp += j;
		printf("%d\n", tmp);
	}
```
- Kojom klauzom je potrebno zameniti private klauzu da bi lokalne
instance promenljive tmp dobile inicijalnu vrednost globalne
promenljive `tmp`?
]
]

---

## Primer 5: Klauze za rad sa podacima

.message.is-info[
.message-header[
Zadatak
]
.message-body[
```c
	void dummy() {
		int tmp = 0;
		#pragma omp parallel for private(tmp)
		for (int j = 0; j < 5; j++)
			tmp += j;
		printf("%d\n", tmp);
	}
```
- Kojom klauzom je potrebno zameniti private klauzu da bi lokalne
instance promenljive tmp dobile inicijalnu vrednost globalne
promenljive `tmp`?
]
]

.message.is-success[
.message-header[
Odgovor
]
.message-body[
- `firstprivate`
]
]

---

## Zadatak 6: Mandelbrotov set

.message.is-info[
.message-header[
Zadatak
]
.message-body[
- Data je datoteka `mandelbrot.c.` Datoteka sadrÅ¾i paralelno OpenMP reÅ¡enje koje odreÄ‘uje Mandelbrotov set. 
- ReÅ¡enje ima par problema vezanih za koriÅ¡Ä‡enje klauza za rad sa podacima i poneko Å¡tetno preplitanje. PronaÄ‘ite i ispravite greÅ¡ke.
]
]

--
.message.is-success[
.message-header[
Odgovor
]
.message-body[
- <a target="_blank" rel="noopener noreferrer" href="/courses/hpc-z1-openMP/#table-of-contents"> â˜› reÅ¡enja/`mandelbrot.c`</a>
]
]

---

## Kako paralelizovati `while` i rekurziju?

- Inicijalno, OpenMP je zamiÅ¡ljen tako da je moguÄ‡e paralelizovati
probleme za koje se unapred zna broj potrebnih iteracija za njihovo
reÅ¡avanje!

--

.message.is-danger[
.message-header[
Problem
]
.message-body[ 
- Kako primeniti OpenMP u drugim tipovima petlji u kojima se ne zna unapred broj iteracija? Ili u sluÄaju rekurzije?
]
]

--

.message.is-warning[
.message-header[
Info
]
.message-body[
- Opcije:
	- Problem transformisati u formu `for` petlje ako je to moguÄ‡e
	- Koristiti `task` konstrukciju (od OpenMP 3.0)
]
]

---
## Primer 6: Paralelizacija obrade Ävorova liste

.lcol[
```c
// petlja koju
// treba paralelizovati
while (p != NULL) {
	processwork(p);
	p = p->next;
}
```
]

.rcol[
```c
// 1. odrediti broj cvorova
while (p != NULL) {
	nelems++; p = p->next;
}
...

// 2. zapamtiti adrese cvorova
p = head;
for (i = 0; i < nelems; i++) {
	ptrs[i] = p;
	p = p->next;
}
...

// 3. pokrenuti paralelnu obradu
#pragma omp parallel for
for (i = 0; i < nelems; i++)
	processwork(ptrs[i]);
```
]

---
## task konstrukcija

- Sintaksa:
```c 
#pragma omp task[clause[ [,] clause] ... ]
strukturirani-blok
```

- MoÅ¾e se posmatrati kao nezavisna jedinica posla.
- ÄŒine ga:
	- Kod koji zadatak izvrÅ¡ava
	- Podaci (privatne i deljene promenljive)
	- `Internal Control Variables (ICV)` (npr. indikator da li zadatak moÅ¾e da bude dodeljen razliÄitim nitima, vrsta rasporeÄ‘ivanja, broj niti u paralelnom regionu itd.)

---
## Primer 7: Kreiranje zadataka

- `task i single` konstrukcije se Äesto koriste zajedno:
	- jedna nit pravi zadatke koji se uvezuju u red zadataka odakle sve niti mogu da uzimaju zadatke.

```c
	#pragma omp parallel
	{
		#pragma omp single
		{
				#pragma omp task
				y = f(x)
				#pragma omp task
				z = g(x)
		}
	}
```

---
## Zadatak 7: Modifikacija liste

.message.is-info[
.message-header[
Zadatak
]
.message-body[
- Data je sekvencijalna implementacija liste `(linked.c)` u kojoj svaki element sadrÅ¾i po jedan FibonaÄijev broj dobijen funkcijom `processwork`. 
- Napraviti OpenMP paralelni program koriÅ¡Ä‡enjem `task` konstrukcije.
]
]

--
.message.is-success[
.message-header[
Odgovor
]
.message-body[
- <a target="_blank" rel="noopener noreferrer" href="/courses/hpc-z1-openMP/#table-of-contents"> â˜› reÅ¡enja/`linkedlist.c`</a>
]
]

---

## Konstrukti za sinhronizaciju izvrÅ¡avanja zadataka

- `taskwait` - sinhronizacija samo zadataka istog nivoa
    ```c 
    #pragma omp taskwait
    ```

- `taskgroup` - sinhronizuje i podzadatke

    ```c
    #pragma omp taskgroup
        strukturirani-block
    ``` 

- `depend` - task klauza

    ```c 
    depend(in | out | inout : lista)
    ```

---
## Primer 8: Sinhronizacija zavisnih zadataka

```c 
	int y, z;
	#pragma omp parallel
	{
		#pragma omp single
		{
				#pragma omp task
				y = f(x)
				#pragma omp taskwait
				#pragma omp task
				z = g(y)
		}
	}
```
---

## Primer 8: Sinhronizacija zavisnih zadataka

```c
	#pragma omp parallel
	{
		int y, z;
		#pragma omp single
		{
				#pragma omp task depend(out:y)
				y = f(x)
				#pragma omp task depend(in:y)
				z = g(y)
		}
	}
```

---

## Zadatak 8*: MnoÅ¾enje matrice i vektora

.message.is-info[
.message-header[
Zadatak
]
.message-body[
- Implementirati sekvencijalni program za mnoÅ¾enje nekvadratne matrice i vektora u C programskom jeziku.

- Nakon Å¡to se uverite da program daje oÄekivane rezultate, implementirani OpenMP paralelni algoritam na osnovu sekvencijalnog programa.
]
]

--
.message.is-warning[
.message-header[
Info
]
.message-body[
- **Napomene**: Svaka od dimenzija matrice treba da bude makar 1000. Za potrebe testiranja programa dimenzije matrice mogu da budu i manje.
    Meriti izvrÅ¡avanje programa funkcijom `omp_get_wtime()`.
]
]

---

## Zadatak 9*: MnoÅ¾enje matrica - domaÄ‡i

.message.is-info[
.message-header[
Zadatak
]
.message-body[
- Implementirati sekvencijalni program za mnoÅ¾enje dve nekvadratne
matrice u C programskom jeziku.

- Nakon Å¡to se uverite da program daje oÄekivane rezultate,
implementirati OpenMP paralelni program na osnovu
sekvencijalnog programa.
]
]

--
.message.is-warning[
.message-header[
Info
]
.message-body[
- **Napomene**: Korektan sekvencijalni program testirati na velikim matricama (oko 1000 po dimenziji, modifikovati zavisno od karakteristika raÄunara na kojem radite zadatak). 
    Za potrebe testiranja, dimenzije matrica mogu da budu i manje.
    Meriti izvrÅ¡avanje programa funkcijom `omp_get_wtime()`.
]
]

---

## Zadatak 10*: Akumuliranje vrednosti Ävorova stabla

.message.is-info[
.message-header[
Zadatak
]
.message-body[
- Napraviti sekvencijalnu implementaciju stabla u C programskom jeziku. 
- Svaki Ävor stabla sadrÅ¾i jedan razlomljeni broj u jednostrukoj preciznosti. 
- Potrebno je implementirati minimalni skup funkcionalnosti (kreiranje stabla, sabiranje vrednosti Ävorova stabla i uniÅ¡tavanje stabla).

 - Nakon Å¡to se uverite da program daje oÄekivane rezultate implementirati OpenMP paralelni program na osnovu sekvencijalnog programa
]
]

--
.message.is-warning[
.message-header[
Info
]
.message-body[
- **Napomene**:
Paralelni program implementirati koriÅ¡Ä‡enjem task konstrukcije.
Meriti izvrÅ¡avanje programa funkcijom `omp_get_wtime()`.
]
]

---

## Zadatak 11: Transponovanje matrice

.message.is-info[
.message-header[
Zadatak
]
.message-body[
- Data je sekvencijalna implementacija transponovanja matrice <br><a target="_blank" rel="noopener noreferrer" href="/courses/hpc-z2-openMP/#table-of-contents"> â˜› zadaci/`Matrix Transpose`</a>. Napraviti OpenMP paralelnu verziju algoritma.
]
]

--
.message.is-warning[
.message-header[
Info
]
.message-body[
- **Napomene**: Meriti izvrÅ¡avanje programa funkcijom `omp_get_wtime()`.
]
]

---

## Zadatak 12: Jednostavni genetski algoritam

.message.is-info[
.message-header[
Zadatak
]
.message-body[
- Data je sekvencijalna implementacija jednostavnog genetskog algoritma implementiranog u C programskom jeziku <br><a target="_blank" rel="noopener noreferrer" href="/courses/hpc-z2-openMP/#table-of-contents"> â˜› zadaci/`Genetic Algorithm`</a>.  
- Pokrenuti sekvencijalni algoritam nad svim datim primerima prema uputstvu u <a target="_blank" rel="noopener noreferrer" href="/courses/hpc-z2-openMP/#table-of-contents"> â˜› zadaci/`Genetic Algorithm/ReadMe`</a> i analizirati vremena izvrÅ¡avanja delova genetskog algoritma.
- Odrediti kritiÄne delove koda i paralelizovati ih koriÅ¡Ä‡enjem OpenMP.
]
]

--
.message.is-warning[
.message-header[
Info
]
.message-body[
- **Napomene**: Meriti izvrÅ¡avanje programa funkcijom `omp_get_wtime()`.
]
]

---
## Zadatak 13*: TraÅ¾enje korena funkcije nad intervalom - domaÄ‡i

.message.is-info[
.message-header[
Zadatak
]
.message-body[
- Data je sekvencijalna implementacija metode za odreÄ‘ivanje korena funkcije nad zadatim intervalom metodom bisekcije <br><a target="_blank" rel="noopener noreferrer" href="/courses/hpc-z2-openMP/#table-of-contents"> â˜› zadaci/`Bisection`</a>.  
- Pokrenuti sekvencijalni algoritam nad svim datim primerima prema uputstvu u <a target="_blank" rel="noopener noreferrer" href="/courses/hpc-z2-openMP/#table-of-contents"> â˜› zadaci/`Bisection/ReadMe`</a> i pogledati reÅ¡enja sva tri zadata primera.
- Zatim implementirati OpenMP paralelno reÅ¡enje.
]
]

--
.message.is-warning[
.message-header[
Info
]
.message-body[
- **Napomene**: Algoritam isprobati na joÅ¡ primera. Pri proveri taÄnosti dobijenog reÅ¡enja moguÄ‡e je koristiti neki od alata za odreÄ‘ivanje korena funkcije (Volfram, na primer). Meriti izvrÅ¡avanje programa funkcijom `omp_get_wtime()`.
]
]

---
## KoriÅ¡Ä‡eni materijali

- Dokumentacija sa OpenMP sajta, videti `www.openmp.org`
- `"Introduction to OpenMP", Tim Mattson`, dostupno na [ovom linku](https://www.youtube.com/playlist?list=PLLX-Q6B8xqZ8n8bwjGdzBJ25X2utwnoEG)
- [`"Introduction to OpenMP"`, prateÄ‡a prezentacija](https://www.openmp.org/wp-content/uploads/Intro_To_OpenMP_Mattson.pdf)
- `"Parallel Computing Book"`, Victor Eijkhout, elektronska verzija knjige je dostupna na [ovom linku](http://pages.tacc.utexas.edu/~eijkhout/pcse/html/omp-basics.html)

--

class: center, middle, theend, hide-text
layout: false
background-image: url(../theend.gif)

</textarea> <script src="https://remarkjs.com/downloads/remark-latest.min.js"></script> <script>remark.macros.scale=function(percentage){var url=this;return'<div class="center"><img src="' +url+'" style="width: '+percentage+'" /></div>';};var slideshow=remark.create({highlightLanguage:'python',highlightStyle:'monokai',highlightLines:true,countIncrementalSlides:false,navigation:{scroll:false,}});</script> <script src="https://cdnjs.cloudflare.com/ajax/libs/mermaid/8.0.0/mermaid.min.js"></script> <script>mermaid.initialize({startOnLoad:true});</script></body></html>