<!DOCTYPE html><html><head><title>[High-performance computing (HPC)](/courses/#table-of-contents)</title><meta charset="utf-8"><style>@import url(https://fonts.googleapis.com/css?family=Playfair+Display);@import url(https://fonts.googleapis.com/css?family=Droid+Serif);@import url(https://fonts.googleapis.com/css?family=Open+Sans);@import url(https://fonts.googleapis.com/css?family=Work+Sans);@import url(https://fonts.googleapis.com/css?family=Muli);@import url(https://fonts.googleapis.com/css?family=Yanone+Kaffeesatz);@import url(https://fonts.googleapis.com/css?family=Ubuntu+Mono:400,700,400italic);@import url(https://fonts.googleapis.com/css?family=Roboto+Condensed);@import url(https://fonts.googleapis.com/css?family=PT+Sans);@import url(https://fonts.googleapis.com/css?family=Roboto);body{font-family:'Open Sans';color:#333;display:flex;height:100%}h1{font-family:"Playfair Display"}h2,h3,h4{font-family:'Yanone Kaffeesatz';font-weight:400}a{font-family:"PT Sans"}.remark-slide-content h1{font-size:3em}.remark-slide-content h2{font-size:2em}.remark-slide-content h3{font-size:1.6em}.remark-code,.remark-inline-code{font-family:'Ubuntu Mono'}.remark-code-line-highlighted{background-color:#373832}h1{text-shadow:-1px 0 #000,0 1px #000,1px 0 #000,0 -1px #000;-webkit-animation:pulse 7s forwards;-moz-animation:pulse 7s forwards;-o-animation:pulse 7s forwards;-ms-animation:pulse 7s forwards;animation:pulse 7s forwards}@-webkit-keyframes pulse{0%{color:#eee}100%{color:#666}}@-moz-keyframes pulse{0%{color:#eee}100%{color:#666}}@-ms-keyframes pulse{0%{color:#eee}100%{color:#666}}@-o-keyframes pulse{0%{color:#eee}100%{color:#666}}@keyframes pulse{0%{color:#eee}100%{color:#666}}h2{-webkit-animation:color-change 1.5s infinite;-moz-animation:color-change 1.5s infinite;-o-animation:color-change 1.5s infinite;-ms-animation:color-change 1.5s infinite;animation:color-change 1.5s infinite}@-webkit-keyframes color-change{0%{color:coral}50%{color:#5db9e0}100%{color:coral}}@-moz-keyframes color-change{0%{color:coral}50%{color:#5db9e0}100%{color:coral}}@-ms-keyframes color-change{0%{color:coral}50%{color:#5db9e0}100%{color:coral}}@-o-keyframes color-change{0%{color:coral}50%{color:#5db9e0}100%{color:coral}}@keyframes color-change{0%{color:coral}50%{color:#5db9e0}100%{color:coral}}h3,h4{color:#c7e2ee;text-shadow:-.7px 0 #4d4d4d,0 .7px #4d4d4d,.7px 0 #4d4d4d,0 -.7px #4d4d4d}.theend{background-color:#000;color:#000;text-shadow:0 0 20px #333}.inverse{background-color:#7e7e7e;color:#c5dae4;text-shadow:0 0 20px #333}.inverse h1{text-shadow:-1px 0 #000,0 1px #000,1px 0 #000,0 -1px #000;-webkit-animation:pulsei 7s forwards;-moz-animation:pulsei 7s forwards;-o-animation:pulsei 7s forwards;-ms-animation:pulsei 7s forwards;animation:pulsei 7s forwards}@-webkit-keyframes pulsei{0%{color:#eee}100%{color:#e9a46b}}@-moz-keyframes pulsei{0%{color:#eee}100%{color:#e9a46b}}@-ms-keyframes pulsei{0%{color:#eee}100%{color:#e9a46b}}@-o-keyframes pulsei{0%{color:#eee}100%{color:#e9a46b}}@keyframes pulsei{0%{color:#eee}100%{color:#e9a46b}}.inverse h2{text-shadow:-1px 0 #000,0 1px #000,1px 0 #000,0 -1px #000;-webkit-animation:color-changei 1s infinite;-moz-animation:color-changei 1s infinite;-o-animation:color-changei 1s infinite;-ms-animation:color-changei 1s infinite;animation:color-changei 1s infinite}@-webkit-keyframes color-changei{0%{color:#fff}50%{color:#7bbcd8}100%{color:#fff}}@-moz-keyframes color-changei{0%{color:#fff}50%{color:#7bbcd8}100%{color:#fff}}@-ms-keyframes color-changei{0%{color:#fff}50%{color:#7bbcd8}100%{color:#fff}}@-o-keyframes color-changei{0%{color:#fff}50%{color:#7bbcd8}100%{color:#fff}}@keyframes color-changei{0%{color:#fff}50%{color:#7bbcd8}100%{color:#fff}}a{color:#bb7917;text-decoration:none;transition:all .3s linear;-webkit-transition:all .3s linear;-moz-transition:all .3s linear;background:linear-gradient(to bottom,var(--mainColor) 0,var(--mainColor) 100%);background-position:0 100%;background-repeat:repeat-x;background-size:1.5px 1.5px}a:hover{background-image:url("data:image/svg+xml;charset=utf8,%3Csvg id='squiggle-link' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' xmlns:ev='http://www.w3.org/2001/xml-events' viewBox='0 0 20 4'%3E%3Cstyle type='text/css'%3E.squiggle{animation:shift .3s linear infinite;}@keyframes shift {from {transform:translateX(0);}to {transform:translateX(-20px);}}%3C/style%3E%3Cpath fill='none' stroke='%23ff9800' stroke-width='2' class='squiggle' d='M0,3.5 c 5,0,5,-3,10,-3 s 5,3,10,3 c 5,0,5,-3,10,-3 s 5,3,10,3'/%3E%3C/svg%3E");background-position:0 100%;background-size:auto 4px;background-repeat:repeat-x;text-decoration:none;color:#2d77d8;padding-left:10px}.inverse code{background-color:#7e7e7e}.hide-text{text-indent:-9999px}.remark-slide-container{transition:opacity 1s linear,right 1s ease-in-out;opacity:0;right:1000px}.remark-visible{transition:opacity 1s linear,right 1s ease-in-out;opacity:1;right:0}.remark-fading{z-index:9}.remark-visible~.remark-slide-container{right:-1000px}.remark-code,.remark-inline-code{font-family:'Ubuntu Mono'}.remark-code-line-highlighted{background-color:#373832}.remark-inline-code{font-weight:700}.remark-code-line-highlighted{font-weight:700;background-color:transparent;text-shadow:0 5px 15px rgba(255,106,20,.5),5px 0 15px rgba(255,106,20,.5),-5px 0 15px rgba(255,106,20,.5),0 -5px 15px rgba(255,106,20,.5)}.shade{padding:0}.shade{background-color:rgba(0,0,0,.7);color:#fff;width:100%;padding:1em 0}.shadelight{background-color:rgba(0,0,0,.5);color:#fff;width:100%;padding:0}.fgtransparent h1{color:rgba(255,255,255,.8)!important;text-shadow:none}.boxtitle1{padding:1em;text-align:left;border-left:rgba(255,255,255,.6) solid .5em;border-right:#fff solid 0}.nosplit>div:first-of-type{width:100%;height:100%;position:absolute;top:0;left:0}.split-20>div:first-of-type{width:20%;height:100%;position:absolute;top:0;left:0}.split-20>div:nth-of-type(2){width:80%;height:100%;position:absolute;top:0;right:0}.split-30>div:first-of-type{width:30%;height:100%;position:absolute;top:0;left:0}.split-30>div:nth-of-type(2){width:70%;height:100%;position:absolute;top:0;right:0}.split-50>div:first-of-type{width:50%;height:100%;position:absolute;top:0;left:0}.split-50>div:nth-of-type(2){width:50%;height:100%;position:absolute;top:0;right:0}.split-60>div:first-of-type{width:60%;height:100%;position:absolute;top:0;left:0}.split-60>div:nth-of-type(2){width:40%;height:100%;position:absolute;top:0;right:0}.split-70>div:first-of-type{width:70%;height:100%;position:absolute;top:0;left:0}.split-70>div:nth-of-type(2){width:30%;height:100%;position:absolute;top:0;right:0}.column_t1{background-color:#2aa9df;color:#fff}.column_t1 a{color:#b3e5fc}.column_t1 pre code{-webkit-box-shadow:0 0 55px 0 rgba(0,0,0,.75);-moz-box-shadow:0 0 55px 0 rgba(0,0,0,.75);box-shadow:0 0 55px 0 rgba(0,0,0,.75)}.uline{text-decoration:underline}.vmiddle{position:relative;top:50%;transform:translateY(-50%);padding:1em}.remark-slide-content h1{font-size:50px}.remark-slide-content h2{font-size:40px}.remark-slide-content h3{font-size:30px}.remark-slide-content img{width:100%}.remark-slide-content{padding-left:50px;padding-right:50px}.remark-slide-content{background-size:contain}blockquote{font-family:'Playfair Display';font-style:italic;font-size:110%;margin-top:10px;margin-bottom:10px;margin-left:50px;padding:1em 1em;background-color:#f5f5f5;border-left:5px solid #dbdbdb}.hljs-ln td.hljs-ln-numbers{-webkit-touch-callout:none;-webkit-user-select:none;-khtml-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;text-align:center;color:#ccc;border-right:1px solid #ccc;vertical-align:top;padding-right:5px}.hljs-ln td.hljs-ln-code{padding-left:10px}.lcol{width:49%;float:left}.lcol-narrow{width:39%;float:left}.lcol-narrow2{width:24%;float:left}.lcol-wide{width:59%;float:left}.lcol-wide2{width:74%;float:left}.rcol{width:49%;float:right}.rcol-narrow{width:39%;float:right}.rcol-narrow2{width:24%;float:right}.rcol-wide{width:59%;float:right}.rcol-wide2{width:74%;float:right}.wide{clear:both}.l-col{color:#777;width:20%;height:92%;float:left}.r-col{width:75%;float:right;padding-top:1em}code{-moz-border-radius:5px;-web-border-radius:5px;border-radius:5px;background:#e7e8e2}em{color:#c63235}.remark-slide-content{font-size:24px}ol>li,ul>li{margin-top:5px}.section{font-size:16px;float:right;clear:both}.small,.small .remark-code-line{font-size:60%}.medium,.medium .remark-code-line{font-size:80%}.condensed{line-height:.8em;font-size:90%}.size-90,.size-90 .remark-code-line{font-size:90%}.size-85,.size-85 .remark-code-line{font-size:85%}.multicode pre{margin-top:10px;margin-bottom:10px}.remark-slide img,.remark-slide pre{margin-top:25px;margin-bottom:25px}.attention{-moz-border-radius:5px;-web-border-radius:5px;border-radius:5px;background-color:#fbd2d2;text-align:center}.attention p{margin:10px}.footer{position:absolute;bottom:12px;left:20px;font-size:70%}.footer.small{font-size:50%}.footer,li>p{margin:0}.ref{color:red;vertical-align:super;font-size:70%}.created{font-size:60%;margin-bottom:5em;font-family:"Playfair Display";font-size:16px;font-style:normal;font-variant:normal;font-weight:400;line-height:22px}.created:before{content:"üë®üèª‚Äçüíª‚ûô "}.noselect{-webkit-touch-callout:none;-webkit-user-select:none;-khtml-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.overlay{box-shadow:inset 0 0 0 9999px rgba(0,0,0,.35)}.container{height:100%;width:100%;display:flex;position:fixed;align-items:center;justify-content:center}table{border-collapse:collapse;border-spacing:0;empty-cells:show;border:1px solid #cbcbcb}.center-table table{margin:0 auto}table caption{color:#000;font:italic 85%/1 arial,sans-serif;padding:1em 0;text-align:center}table td,table th{border-left:1px solid #cbcbcb;border-width:0 0 0 1px;font-size:inherit;margin:0;overflow:visible;padding:.5em 1em}table td:first-child,table th:first-child{border-left-width:0}table thead{background-color:#e0e0e0;color:#000;text-align:left;vertical-align:bottom}table td{background-color:transparent}table-odd td{background-color:#f2f2f2}table tr:nth-child(2n-1) td{background-color:#f2f2f2}table td{border-bottom:1px solid #cbcbcb}table tbody>tr:last-child>td{border-bottom-width:0}table-horizontal td,table-horizontal th{border-width:0 0 1px 0;border-bottom:1px solid #cbcbcb}table-horizontal tbody>tr:last-child>td{border-bottom-width:0}/*! bulma.io v0.4.2 | MIT License | github.com/jgthms/bulma */@-webkit-keyframes spinAround{from{-webkit-transform:rotate(0);transform:rotate(0)}to{-webkit-transform:rotate(359deg);transform:rotate(359deg)}}@keyframes spinAround{from{-webkit-transform:rotate(0);transform:rotate(0)}to{-webkit-transform:rotate(359deg);transform:rotate(359deg)}}/*! minireset.css v0.0.2 | MIT License | github.com/jgthms/minireset.css */p{margin:0;padding:0}.message{font-family:'Playfair Display';background-color:#f5f5f5;border-radius:3px;font-size:1rem}.message:not(:last-child){margin-bottom:1.5rem}.message.is-white{background-color:#fff}.message.is-white .message-header{background-color:#fff;color:#0a0a0a}.message.is-white .message-body{border-color:#fff;color:#4d4d4d}.message.is-black{background-color:#fafafa}.message.is-black .message-header{background-color:#0a0a0a;color:#fff}.message.is-black .message-body{border-color:#0a0a0a;color:#090909}.message.is-light{background-color:#fafafa}.message.is-light .message-header{background-color:#f5f5f5;color:#363636}.message.is-light .message-body{border-color:#f5f5f5;color:#505050}.message.is-dark{background-color:#fafafa}.message.is-dark .message-header{background-color:#363636;color:#f5f5f5}.message.is-dark .message-body{border-color:#363636;color:#2a2a2a}.message.is-primary{background-color:#f5fffd}.message.is-primary .message-header{background-color:#00d1b2;color:#fff}.message.is-primary .message-body{border-color:#00d1b2;color:#021310}.message.is-info{background-color:#f6f9fe}.message.is-info .message-header{background-color:#3273dc;color:#fff}.message.is-info .message-body{border-color:#3273dc;color:#22509a}.message.is-success{background-color:#f6fef9}.message.is-success .message-header{background-color:#23d160;color:#fff}.message.is-success .message-body{border-color:#23d160;color:#0e301a}.message.is-warning{background-color:#fffdf5}.message.is-warning .message-header{background-color:#ffdd57;color:rgba(0,0,0,.7)}.message.is-warning .message-body{border-color:#ffdd57;color:#3b3108}.message.is-danger{background-color:#fff5f7}.message.is-danger .message-header{background-color:#ff3860;color:#fff}.message.is-danger .message-body{border-color:#ff3860;color:#cd0930}.message-header{-webkit-box-align:center;-ms-flex-align:center;align-items:center;background-color:#4a4a4a;border-radius:3px 3px 0 0;color:#fff;display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-pack:justify;-ms-flex-pack:justify;justify-content:space-between;line-height:1.25;padding:.5em .75em;position:relative}.message-header a,.message-header strong{color:inherit}.message-header a{text-decoration:underline}.message-header .delete{-webkit-box-flex:0;-ms-flex-positive:0;flex-grow:0;-ms-flex-negative:0;flex-shrink:0;margin-left:.75em}.message-header+.message-body{border-top-left-radius:0;border-top-right-radius:0;border-top:none}.message-body{border:1px solid #dbdbdb;border-radius:3px;color:#4a4a4a;padding:.1em .5em}.message-body a,.message-body strong{color:inherit}.message-body a{text-decoration:underline}.message-body code,.message-body pre{background:#fff}.message-body pre code{background:0 0}.column{display:block;-ms-flex-preferred-size:0;flex-basis:0;-webkit-box-flex:1;-ms-flex-positive:1;flex-grow:1;-ms-flex-negative:1;flex-shrink:1;padding:.75rem}.columns.is-mobile>.column.is-narrow{-webkit-box-flex:0;-ms-flex:none;flex:none}.columns.is-mobile>.column.is-full{-webkit-box-flex:0;-ms-flex:none;flex:none;width:100%}.columns.is-mobile>.column.is-three-quarters{-webkit-box-flex:0;-ms-flex:none;flex:none;width:75%}.columns.is-mobile>.column.is-two-thirds{-webkit-box-flex:0;-ms-flex:none;flex:none;width:66.6666%}.columns.is-mobile>.column.is-half{-webkit-box-flex:0;-ms-flex:none;flex:none;width:50%}.columns.is-mobile>.column.is-one-third{-webkit-box-flex:0;-ms-flex:none;flex:none;width:33.3333%}.columns.is-mobile>.column.is-one-quarter{-webkit-box-flex:0;-ms-flex:none;flex:none;width:25%}.columns.is-mobile>.column.is-offset-three-quarters{margin-left:75%}.columns.is-mobile>.column.is-offset-two-thirds{margin-left:66.6666%}.columns.is-mobile>.column.is-offset-half{margin-left:50%}.columns.is-mobile>.column.is-offset-one-third{margin-left:33.3333%}.columns.is-mobile>.column.is-offset-one-quarter{margin-left:25%}.columns.is-mobile>.column.is-1{-webkit-box-flex:0;-ms-flex:none;flex:none;width:8.33333%}.columns.is-mobile>.column.is-offset-1{margin-left:8.33333%}.columns.is-mobile>.column.is-2{-webkit-box-flex:0;-ms-flex:none;flex:none;width:16.66667%}.columns.is-mobile>.column.is-offset-2{margin-left:16.66667%}.columns.is-mobile>.column.is-3{-webkit-box-flex:0;-ms-flex:none;flex:none;width:25%}.columns.is-mobile>.column.is-offset-3{margin-left:25%}.columns.is-mobile>.column.is-4{-webkit-box-flex:0;-ms-flex:none;flex:none;width:33.33333%}.columns.is-mobile>.column.is-offset-4{margin-left:33.33333%}.columns.is-mobile>.column.is-5{-webkit-box-flex:0;-ms-flex:none;flex:none;width:41.66667%}.columns.is-mobile>.column.is-offset-5{margin-left:41.66667%}.columns.is-mobile>.column.is-6{-webkit-box-flex:0;-ms-flex:none;flex:none;width:50%}.columns.is-mobile>.column.is-offset-6{margin-left:50%}.columns.is-mobile>.column.is-7{-webkit-box-flex:0;-ms-flex:none;flex:none;width:58.33333%}.columns.is-mobile>.column.is-offset-7{margin-left:58.33333%}.columns.is-mobile>.column.is-8{-webkit-box-flex:0;-ms-flex:none;flex:none;width:66.66667%}.columns.is-mobile>.column.is-offset-8{margin-left:66.66667%}.columns.is-mobile>.column.is-9{-webkit-box-flex:0;-ms-flex:none;flex:none;width:75%}.columns.is-mobile>.column.is-offset-9{margin-left:75%}.columns.is-mobile>.column.is-10{-webkit-box-flex:0;-ms-flex:none;flex:none;width:83.33333%}.columns.is-mobile>.column.is-offset-10{margin-left:83.33333%}.columns.is-mobile>.column.is-11{-webkit-box-flex:0;-ms-flex:none;flex:none;width:91.66667%}.columns.is-mobile>.column.is-offset-11{margin-left:91.66667%}.columns.is-mobile>.column.is-12{-webkit-box-flex:0;-ms-flex:none;flex:none;width:100%}.columns.is-mobile>.column.is-offset-12{margin-left:100%}@media screen and (max-width:768px){.column.is-narrow-mobile{-webkit-box-flex:0;-ms-flex:none;flex:none}.column.is-full-mobile{-webkit-box-flex:0;-ms-flex:none;flex:none;width:100%}.column.is-three-quarters-mobile{-webkit-box-flex:0;-ms-flex:none;flex:none;width:75%}.column.is-two-thirds-mobile{-webkit-box-flex:0;-ms-flex:none;flex:none;width:66.6666%}.column.is-half-mobile{-webkit-box-flex:0;-ms-flex:none;flex:none;width:50%}.column.is-one-third-mobile{-webkit-box-flex:0;-ms-flex:none;flex:none;width:33.3333%}.column.is-one-quarter-mobile{-webkit-box-flex:0;-ms-flex:none;flex:none;width:25%}.column.is-offset-three-quarters-mobile{margin-left:75%}.column.is-offset-two-thirds-mobile{margin-left:66.6666%}.column.is-offset-half-mobile{margin-left:50%}.column.is-offset-one-third-mobile{margin-left:33.3333%}.column.is-offset-one-quarter-mobile{margin-left:25%}.column.is-1-mobile{-webkit-box-flex:0;-ms-flex:none;flex:none;width:8.33333%}.column.is-offset-1-mobile{margin-left:8.33333%}.column.is-2-mobile{-webkit-box-flex:0;-ms-flex:none;flex:none;width:16.66667%}.column.is-offset-2-mobile{margin-left:16.66667%}.column.is-3-mobile{-webkit-box-flex:0;-ms-flex:none;flex:none;width:25%}.column.is-offset-3-mobile{margin-left:25%}.column.is-4-mobile{-webkit-box-flex:0;-ms-flex:none;flex:none;width:33.33333%}.column.is-offset-4-mobile{margin-left:33.33333%}.column.is-5-mobile{-webkit-box-flex:0;-ms-flex:none;flex:none;width:41.66667%}.column.is-offset-5-mobile{margin-left:41.66667%}.column.is-6-mobile{-webkit-box-flex:0;-ms-flex:none;flex:none;width:50%}.column.is-offset-6-mobile{margin-left:50%}.column.is-7-mobile{-webkit-box-flex:0;-ms-flex:none;flex:none;width:58.33333%}.column.is-offset-7-mobile{margin-left:58.33333%}.column.is-8-mobile{-webkit-box-flex:0;-ms-flex:none;flex:none;width:66.66667%}.column.is-offset-8-mobile{margin-left:66.66667%}.column.is-9-mobile{-webkit-box-flex:0;-ms-flex:none;flex:none;width:75%}.column.is-offset-9-mobile{margin-left:75%}.column.is-10-mobile{-webkit-box-flex:0;-ms-flex:none;flex:none;width:83.33333%}.column.is-offset-10-mobile{margin-left:83.33333%}.column.is-11-mobile{-webkit-box-flex:0;-ms-flex:none;flex:none;width:91.66667%}.column.is-offset-11-mobile{margin-left:91.66667%}.column.is-12-mobile{-webkit-box-flex:0;-ms-flex:none;flex:none;width:100%}.column.is-offset-12-mobile{margin-left:100%}}@media screen and (min-width:769px),print{.column.is-narrow,.column.is-narrow-tablet{-webkit-box-flex:0;-ms-flex:none;flex:none}.column.is-full,.column.is-full-tablet{-webkit-box-flex:0;-ms-flex:none;flex:none;width:100%}.column.is-three-quarters,.column.is-three-quarters-tablet{-webkit-box-flex:0;-ms-flex:none;flex:none;width:75%}.column.is-two-thirds,.column.is-two-thirds-tablet{-webkit-box-flex:0;-ms-flex:none;flex:none;width:66.6666%}.column.is-half,.column.is-half-tablet{-webkit-box-flex:0;-ms-flex:none;flex:none;width:50%}.column.is-one-third,.column.is-one-third-tablet{-webkit-box-flex:0;-ms-flex:none;flex:none;width:33.3333%}.column.is-one-quarter,.column.is-one-quarter-tablet{-webkit-box-flex:0;-ms-flex:none;flex:none;width:25%}.column.is-offset-three-quarters,.column.is-offset-three-quarters-tablet{margin-left:75%}.column.is-offset-two-thirds,.column.is-offset-two-thirds-tablet{margin-left:66.6666%}.column.is-offset-half,.column.is-offset-half-tablet{margin-left:50%}.column.is-offset-one-third,.column.is-offset-one-third-tablet{margin-left:33.3333%}.column.is-offset-one-quarter,.column.is-offset-one-quarter-tablet{margin-left:25%}.column.is-1,.column.is-1-tablet{-webkit-box-flex:0;-ms-flex:none;flex:none;width:8.33333%}.column.is-offset-1,.column.is-offset-1-tablet{margin-left:8.33333%}.column.is-2,.column.is-2-tablet{-webkit-box-flex:0;-ms-flex:none;flex:none;width:16.66667%}.column.is-offset-2,.column.is-offset-2-tablet{margin-left:16.66667%}.column.is-3,.column.is-3-tablet{-webkit-box-flex:0;-ms-flex:none;flex:none;width:25%}.column.is-offset-3,.column.is-offset-3-tablet{margin-left:25%}.column.is-4,.column.is-4-tablet{-webkit-box-flex:0;-ms-flex:none;flex:none;width:33.33333%}.column.is-offset-4,.column.is-offset-4-tablet{margin-left:33.33333%}.column.is-5,.column.is-5-tablet{-webkit-box-flex:0;-ms-flex:none;flex:none;width:41.66667%}.column.is-offset-5,.column.is-offset-5-tablet{margin-left:41.66667%}.column.is-6,.column.is-6-tablet{-webkit-box-flex:0;-ms-flex:none;flex:none;width:50%}.column.is-offset-6,.column.is-offset-6-tablet{margin-left:50%}.column.is-7,.column.is-7-tablet{-webkit-box-flex:0;-ms-flex:none;flex:none;width:58.33333%}.column.is-offset-7,.column.is-offset-7-tablet{margin-left:58.33333%}.column.is-8,.column.is-8-tablet{-webkit-box-flex:0;-ms-flex:none;flex:none;width:66.66667%}.column.is-offset-8,.column.is-offset-8-tablet{margin-left:66.66667%}.column.is-9,.column.is-9-tablet{-webkit-box-flex:0;-ms-flex:none;flex:none;width:75%}.column.is-offset-9,.column.is-offset-9-tablet{margin-left:75%}.column.is-10,.column.is-10-tablet{-webkit-box-flex:0;-ms-flex:none;flex:none;width:83.33333%}.column.is-offset-10,.column.is-offset-10-tablet{margin-left:83.33333%}.column.is-11,.column.is-11-tablet{-webkit-box-flex:0;-ms-flex:none;flex:none;width:91.66667%}.column.is-offset-11,.column.is-offset-11-tablet{margin-left:91.66667%}.column.is-12,.column.is-12-tablet{-webkit-box-flex:0;-ms-flex:none;flex:none;width:100%}.column.is-offset-12,.column.is-offset-12-tablet{margin-left:100%}}@media screen and (max-width:999px){.column.is-narrow-touch{-webkit-box-flex:0;-ms-flex:none;flex:none}.column.is-full-touch{-webkit-box-flex:0;-ms-flex:none;flex:none;width:100%}.column.is-three-quarters-touch{-webkit-box-flex:0;-ms-flex:none;flex:none;width:75%}.column.is-two-thirds-touch{-webkit-box-flex:0;-ms-flex:none;flex:none;width:66.6666%}.column.is-half-touch{-webkit-box-flex:0;-ms-flex:none;flex:none;width:50%}.column.is-one-third-touch{-webkit-box-flex:0;-ms-flex:none;flex:none;width:33.3333%}.column.is-one-quarter-touch{-webkit-box-flex:0;-ms-flex:none;flex:none;width:25%}.column.is-offset-three-quarters-touch{margin-left:75%}.column.is-offset-two-thirds-touch{margin-left:66.6666%}.column.is-offset-half-touch{margin-left:50%}.column.is-offset-one-third-touch{margin-left:33.3333%}.column.is-offset-one-quarter-touch{margin-left:25%}.column.is-1-touch{-webkit-box-flex:0;-ms-flex:none;flex:none;width:8.33333%}.column.is-offset-1-touch{margin-left:8.33333%}.column.is-2-touch{-webkit-box-flex:0;-ms-flex:none;flex:none;width:16.66667%}.column.is-offset-2-touch{margin-left:16.66667%}.column.is-3-touch{-webkit-box-flex:0;-ms-flex:none;flex:none;width:25%}.column.is-offset-3-touch{margin-left:25%}.column.is-4-touch{-webkit-box-flex:0;-ms-flex:none;flex:none;width:33.33333%}.column.is-offset-4-touch{margin-left:33.33333%}.column.is-5-touch{-webkit-box-flex:0;-ms-flex:none;flex:none;width:41.66667%}.column.is-offset-5-touch{margin-left:41.66667%}.column.is-6-touch{-webkit-box-flex:0;-ms-flex:none;flex:none;width:50%}.column.is-offset-6-touch{margin-left:50%}.column.is-7-touch{-webkit-box-flex:0;-ms-flex:none;flex:none;width:58.33333%}.column.is-offset-7-touch{margin-left:58.33333%}.column.is-8-touch{-webkit-box-flex:0;-ms-flex:none;flex:none;width:66.66667%}.column.is-offset-8-touch{margin-left:66.66667%}.column.is-9-touch{-webkit-box-flex:0;-ms-flex:none;flex:none;width:75%}.column.is-offset-9-touch{margin-left:75%}.column.is-10-touch{-webkit-box-flex:0;-ms-flex:none;flex:none;width:83.33333%}.column.is-offset-10-touch{margin-left:83.33333%}.column.is-11-touch{-webkit-box-flex:0;-ms-flex:none;flex:none;width:91.66667%}.column.is-offset-11-touch{margin-left:91.66667%}.column.is-12-touch{-webkit-box-flex:0;-ms-flex:none;flex:none;width:100%}.column.is-offset-12-touch{margin-left:100%}}@media screen and (min-width:1000px){.column.is-narrow-desktop{-webkit-box-flex:0;-ms-flex:none;flex:none}.column.is-full-desktop{-webkit-box-flex:0;-ms-flex:none;flex:none;width:100%}.column.is-three-quarters-desktop{-webkit-box-flex:0;-ms-flex:none;flex:none;width:75%}.column.is-two-thirds-desktop{-webkit-box-flex:0;-ms-flex:none;flex:none;width:66.6666%}.column.is-half-desktop{-webkit-box-flex:0;-ms-flex:none;flex:none;width:50%}.column.is-one-third-desktop{-webkit-box-flex:0;-ms-flex:none;flex:none;width:33.3333%}.column.is-one-quarter-desktop{-webkit-box-flex:0;-ms-flex:none;flex:none;width:25%}.column.is-offset-three-quarters-desktop{margin-left:75%}.column.is-offset-two-thirds-desktop{margin-left:66.6666%}.column.is-offset-half-desktop{margin-left:50%}.column.is-offset-one-third-desktop{margin-left:33.3333%}.column.is-offset-one-quarter-desktop{margin-left:25%}.column.is-1-desktop{-webkit-box-flex:0;-ms-flex:none;flex:none;width:8.33333%}.column.is-offset-1-desktop{margin-left:8.33333%}.column.is-2-desktop{-webkit-box-flex:0;-ms-flex:none;flex:none;width:16.66667%}.column.is-offset-2-desktop{margin-left:16.66667%}.column.is-3-desktop{-webkit-box-flex:0;-ms-flex:none;flex:none;width:25%}.column.is-offset-3-desktop{margin-left:25%}.column.is-4-desktop{-webkit-box-flex:0;-ms-flex:none;flex:none;width:33.33333%}.column.is-offset-4-desktop{margin-left:33.33333%}.column.is-5-desktop{-webkit-box-flex:0;-ms-flex:none;flex:none;width:41.66667%}.column.is-offset-5-desktop{margin-left:41.66667%}.column.is-6-desktop{-webkit-box-flex:0;-ms-flex:none;flex:none;width:50%}.column.is-offset-6-desktop{margin-left:50%}.column.is-7-desktop{-webkit-box-flex:0;-ms-flex:none;flex:none;width:58.33333%}.column.is-offset-7-desktop{margin-left:58.33333%}.column.is-8-desktop{-webkit-box-flex:0;-ms-flex:none;flex:none;width:66.66667%}.column.is-offset-8-desktop{margin-left:66.66667%}.column.is-9-desktop{-webkit-box-flex:0;-ms-flex:none;flex:none;width:75%}.column.is-offset-9-desktop{margin-left:75%}.column.is-10-desktop{-webkit-box-flex:0;-ms-flex:none;flex:none;width:83.33333%}.column.is-offset-10-desktop{margin-left:83.33333%}.column.is-11-desktop{-webkit-box-flex:0;-ms-flex:none;flex:none;width:91.66667%}.column.is-offset-11-desktop{margin-left:91.66667%}.column.is-12-desktop{-webkit-box-flex:0;-ms-flex:none;flex:none;width:100%}.column.is-offset-12-desktop{margin-left:100%}}@media screen and (min-width:1192px){.column.is-narrow-widescreen{-webkit-box-flex:0;-ms-flex:none;flex:none}.column.is-full-widescreen{-webkit-box-flex:0;-ms-flex:none;flex:none;width:100%}.column.is-three-quarters-widescreen{-webkit-box-flex:0;-ms-flex:none;flex:none;width:75%}.column.is-two-thirds-widescreen{-webkit-box-flex:0;-ms-flex:none;flex:none;width:66.6666%}.column.is-half-widescreen{-webkit-box-flex:0;-ms-flex:none;flex:none;width:50%}.column.is-one-third-widescreen{-webkit-box-flex:0;-ms-flex:none;flex:none;width:33.3333%}.column.is-one-quarter-widescreen{-webkit-box-flex:0;-ms-flex:none;flex:none;width:25%}.column.is-offset-three-quarters-widescreen{margin-left:75%}.column.is-offset-two-thirds-widescreen{margin-left:66.6666%}.column.is-offset-half-widescreen{margin-left:50%}.column.is-offset-one-third-widescreen{margin-left:33.3333%}.column.is-offset-one-quarter-widescreen{margin-left:25%}.column.is-1-widescreen{-webkit-box-flex:0;-ms-flex:none;flex:none;width:8.33333%}.column.is-offset-1-widescreen{margin-left:8.33333%}.column.is-2-widescreen{-webkit-box-flex:0;-ms-flex:none;flex:none;width:16.66667%}.column.is-offset-2-widescreen{margin-left:16.66667%}.column.is-3-widescreen{-webkit-box-flex:0;-ms-flex:none;flex:none;width:25%}.column.is-offset-3-widescreen{margin-left:25%}.column.is-4-widescreen{-webkit-box-flex:0;-ms-flex:none;flex:none;width:33.33333%}.column.is-offset-4-widescreen{margin-left:33.33333%}.column.is-5-widescreen{-webkit-box-flex:0;-ms-flex:none;flex:none;width:41.66667%}.column.is-offset-5-widescreen{margin-left:41.66667%}.column.is-6-widescreen{-webkit-box-flex:0;-ms-flex:none;flex:none;width:50%}.column.is-offset-6-widescreen{margin-left:50%}.column.is-7-widescreen{-webkit-box-flex:0;-ms-flex:none;flex:none;width:58.33333%}.column.is-offset-7-widescreen{margin-left:58.33333%}.column.is-8-widescreen{-webkit-box-flex:0;-ms-flex:none;flex:none;width:66.66667%}.column.is-offset-8-widescreen{margin-left:66.66667%}.column.is-9-widescreen{-webkit-box-flex:0;-ms-flex:none;flex:none;width:75%}.column.is-offset-9-widescreen{margin-left:75%}.column.is-10-widescreen{-webkit-box-flex:0;-ms-flex:none;flex:none;width:83.33333%}.column.is-offset-10-widescreen{margin-left:83.33333%}.column.is-11-widescreen{-webkit-box-flex:0;-ms-flex:none;flex:none;width:91.66667%}.column.is-offset-11-widescreen{margin-left:91.66667%}.column.is-12-widescreen{-webkit-box-flex:0;-ms-flex:none;flex:none;width:100%}.column.is-offset-12-widescreen{margin-left:100%}}@media screen and (min-width:1384px){.column.is-narrow-fullhd{-webkit-box-flex:0;-ms-flex:none;flex:none}.column.is-full-fullhd{-webkit-box-flex:0;-ms-flex:none;flex:none;width:100%}.column.is-three-quarters-fullhd{-webkit-box-flex:0;-ms-flex:none;flex:none;width:75%}.column.is-two-thirds-fullhd{-webkit-box-flex:0;-ms-flex:none;flex:none;width:66.6666%}.column.is-half-fullhd{-webkit-box-flex:0;-ms-flex:none;flex:none;width:50%}.column.is-one-third-fullhd{-webkit-box-flex:0;-ms-flex:none;flex:none;width:33.3333%}.column.is-one-quarter-fullhd{-webkit-box-flex:0;-ms-flex:none;flex:none;width:25%}.column.is-offset-three-quarters-fullhd{margin-left:75%}.column.is-offset-two-thirds-fullhd{margin-left:66.6666%}.column.is-offset-half-fullhd{margin-left:50%}.column.is-offset-one-third-fullhd{margin-left:33.3333%}.column.is-offset-one-quarter-fullhd{margin-left:25%}.column.is-1-fullhd{-webkit-box-flex:0;-ms-flex:none;flex:none;width:8.33333%}.column.is-offset-1-fullhd{margin-left:8.33333%}.column.is-2-fullhd{-webkit-box-flex:0;-ms-flex:none;flex:none;width:16.66667%}.column.is-offset-2-fullhd{margin-left:16.66667%}.column.is-3-fullhd{-webkit-box-flex:0;-ms-flex:none;flex:none;width:25%}.column.is-offset-3-fullhd{margin-left:25%}.column.is-4-fullhd{-webkit-box-flex:0;-ms-flex:none;flex:none;width:33.33333%}.column.is-offset-4-fullhd{margin-left:33.33333%}.column.is-5-fullhd{-webkit-box-flex:0;-ms-flex:none;flex:none;width:41.66667%}.column.is-offset-5-fullhd{margin-left:41.66667%}.column.is-6-fullhd{-webkit-box-flex:0;-ms-flex:none;flex:none;width:50%}.column.is-offset-6-fullhd{margin-left:50%}.column.is-7-fullhd{-webkit-box-flex:0;-ms-flex:none;flex:none;width:58.33333%}.column.is-offset-7-fullhd{margin-left:58.33333%}.column.is-8-fullhd{-webkit-box-flex:0;-ms-flex:none;flex:none;width:66.66667%}.column.is-offset-8-fullhd{margin-left:66.66667%}.column.is-9-fullhd{-webkit-box-flex:0;-ms-flex:none;flex:none;width:75%}.column.is-offset-9-fullhd{margin-left:75%}.column.is-10-fullhd{-webkit-box-flex:0;-ms-flex:none;flex:none;width:83.33333%}.column.is-offset-10-fullhd{margin-left:83.33333%}.column.is-11-fullhd{-webkit-box-flex:0;-ms-flex:none;flex:none;width:91.66667%}.column.is-offset-11-fullhd{margin-left:91.66667%}.column.is-12-fullhd{-webkit-box-flex:0;-ms-flex:none;flex:none;width:100%}.column.is-offset-12-fullhd{margin-left:100%}}.columns{margin-left:-.75rem;margin-right:-.75rem;margin-top:-.75rem}.columns:last-child{margin-bottom:-.75rem}.columns:not(:last-child){margin-bottom:.75rem}.columns.is-centered{-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center}.columns.is-gapless{margin-left:0;margin-right:0;margin-top:0}.columns.is-gapless:last-child{margin-bottom:0}.columns.is-gapless:not(:last-child){margin-bottom:1.5rem}.columns.is-gapless>.column{margin:0;padding:0}@media screen and (min-width:769px){.columns.is-grid{-ms-flex-wrap:wrap;flex-wrap:wrap}.columns.is-grid>.column{max-width:33.3333%;padding:.75rem;width:33.3333%}.columns.is-grid>.column+.column{margin-left:0}}.columns.is-mobile{display:-webkit-box;display:-ms-flexbox;display:flex}.columns.is-multiline{-ms-flex-wrap:wrap;flex-wrap:wrap}.columns.is-vcentered{-webkit-box-align:center;-ms-flex-align:center;align-items:center}@media screen and (min-width:769px){.columns:not(.is-desktop){display:-webkit-box;display:-ms-flexbox;display:flex}}@media screen and (min-width:1000px){.columns.is-desktop{display:-webkit-box;display:-ms-flexbox;display:flex}}.label{-webkit-border-radius:4px;-moz-border-radius:4px;border-radius:4px;padding:3px 5px 4px;color:#fff;font-weight:700;text-transform:uppercase;white-space:nowrap;font-size:.75em;left:10px;top:-15px;position:relative}div.box p,div.box ul{position:relative;top:-20px}.box.moody .label{background-color:#f89406}.box.happy .label{background-color:#46a546}.box.angry .label{background-color:#c43c35}code,div.box{-webkit-border-radius:4px;-moz-border-radius:4px;border-radius:4px;padding:0 5px;border:1px solid #ccc;margin-bottom:25px;font-size:.9em}.angry{background-color:#ffd7d5;border-color:#c43c35}.happy{background-color:#c0e0c0;border-color:#46a546}.moody{background-color:#ffecd1;border-color:#f89406}@page{size:1210px 681px;margin:0}@media print{.remark-slide-scaler{width:100%!important;height:100%!important;transform:scale(1)!important;top:0!important;left:0!important}}</style><script type="text/javascript" async src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/latest.js?config=TeX-MML-AM_CHTML" async></script> <script src="https://cdn.jsdelivr.net/npm/highlightjs-line-numbers.js@2.6.0/dist/highlightjs-line-numbers.min.js"></script> <script>hljs.initHighlightingOnLoad();hljs.initLineNumbersOnLoad();</script> <link rel="stylesheet2" href="https://cdnjs.cloudflare.com/ajax/libs/mermaid/7.0.10/mermaid.min.css"> <script>mermaid.initialize({startOnLoad:true});</script> <script async src="https://www.googletagmanager.com/gtag/js?id=UA-127734928-1"></script> <script>window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments);} gtag('js',new Date());gtag('config','UA-127734928-1');</script> <script>(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)})(window,document,'script','//www.google-analytics.com/analytics.js','ga');ga('create','UA-127734928-1','auto');ga('send','pageview');</script> </head><body> <script>if(window.location.search.match(/print-pdf/gi)){var link=document.createElement('link');link.rel='stylesheet';link.type='text/css';link.href='../pdf.css';document.getElementsByTagName('head')[0].appendChild(link);}</script> <textarea id="source">class: center, middle

## [High-performance computing (HPC)](/courses/#table-of-contents)
### V7-openACC


.author[[Milovan Toma≈°eviƒá, Ph.D.](https://www.milovantomasevic.com/)]

.small[</br>[üåê‚ûô milovantomasevic.com](https://milovantomasevic.com)</br> [‚úé‚ûô mt@milovantomasevic.com](mailto:mt@milovantomasevic.com)]



.created[26.03.2019 u 11:04]


---



class: split-20 nopadding
background-image: url(../key.jpg)

.column_t2.center[.vmiddle[
.fgtransparent[
![:scale 80%](../zahvalnica.png)
]
]]
.column_t2[.vmiddle.nopadding[
.shadelight[.boxtitle1[
.small[
## Acknowledgements

#### University of Novi Sad | Serbia

- [Gorana Gojiƒá, MS, Teaching assistant](http://www.acs.uns.ac.rs/en/user/49)
- [Veljko Petroviƒá, Ph.D., Assistant Professor](http://www.acs.uns.ac.rs/en/user/30)
- [Faculty of Technical Sciences](http://ftn.uns.ac.rs/)
- [Computing and Control Department | Chair for Applied Computer Sciences](http://www.acs.uns.ac.rs/en)
]]]
]]

.footer.small[
- #### Slides are created according to sources in the literature & Acknowledgements
]

---

name: sadrzaj

# Sadr≈æaj

- [OpenACC](#acc)
- [kernels direktiva](#kd)
- [parallel direktiva](#pd)
- [loop direktiva](#ld)
- [Model](#model)
- [data direktiva](#dd)
- [Zadaci](#zad)
- [OpenACC i CUDA](#cuda)

---
name: acc
class: center, middle, inverse

# OpenACC

---
layout: true

.section[[OpenACC](#sadrzaj)]

---
## ≈†ta je OpenACC

- API za prebacivanje izvr≈°avanja delova koda na **akcelerator**.
- Obuhvata:
	- direktive (`pragma acc <direktiva>`)
	- promenljive okru≈æenja (eng. *runtime environment variables*)
	- biblioteƒçke rutine (eng. *library routines*)
- Podr≈°ka za C, C++ i Fortran.
- Konceptualno veoma sliƒçan OpenMP.

---

## Ciljna arhitektura

- Akceleratori.

.lcol[

![:scale 75%](img/acc2.png)
]

.rcol[

![:scale 110%](img/acc.jpg)

]

<br><br><br><br><br><br><br><br><br>
- U laboratoriji ƒáemo kao akcelerator koristiti **Nvidia Quadro** grafiƒçke kartice.

---

## OpenACC kompajleri

![:scale 90%](img/compile.png)

- Na ve≈æbama ƒáemo koristiti GNU GCC kompajler.

.footer.medium[
[Izvor - OpenACC](https://www.openacc.org/tools)
] 

---

## Kompajliranje OpenACC programa

- Pozicionirati se u direktorijum u kojem se nalazi datoteka sa OpenACC kodom i u terminalu uneti:
```console
gcc -o izvrsna_dat izvorna_dat.c -fopenacc
```

- Za pokretanje programa, pozicionirati se u direktorijum u kojem je izvr≈°na datoteka i uneti `./izvrsna_dat`.
- Ukoliko program poziva neku od OpenACC funkcija (naziv poƒçinje sa acc_), u izvornu datoteku je potrebno dodati i
```c
#include <openacc.h>
```

---

## Terminologija

- **Domaƒáin** (eng. *Host*) - centralna procesna jedinica sa svojom hijerarhijom memorije.
- **Akselerator** (eng. *Accelerator* ili *Device*) - akseleratorski ureƒëaj, npr. grafiƒçka kartica.
- **Paralelni region** - Deo koda obele≈æen za izvr≈°avanje na akceleratorskom ureƒëaju sa pridru≈æenim strukturama podataka. Obuhvata regione koda obele≈æene `parallel` i `kernels` direktivama (drugaƒçije ƒáe se zvati i raƒçunski regioni).

---

## OpenACC model izvr≈°avanja

![:scale 50%](img/accModel.jpg)

.center[
`Figure`: Konceptualna arhitektura akseleratora.ref[*]
]

OpenACC podr≈æava tri nivoa paralelizma: `gang, worker, vector`

.footer.medium[
  [* Link](https://www.sciencedirect.com/topics/computer-science/target-machine)
]

---

## OpenACC model izvr≈°avanja

Op≈°ti format OpenACC direktive:

```c
#pragma acc <directive> [clause-list] new-line
structured block
```
- Direktive za obele≈æavanje paralelnog koda:
	- `kernels`
	- `parallel`

---
layout: false
name: kd
class: center, middle, inverse

# kernels direktiva

---
layout: true
.section[[kernels direktiva](#sadrzaj)]

---

## kernels direktiva

- Oznaƒçava deo koda koji mo≈æe biti preveden za izvr≈°avanje na akceleratoru pravljenjem jednog ili vi≈°e kernela. 
- Kompajler odluƒçuje `≈°ta` ƒáe i `kako` ƒáe paralelizovati.
```c
#pragma acc kernels [clause-list] new-line
structured block
```
- Neke od klauzula (parametri nisu navedeni):

.lcol[

- async
- copyin
- wait
]

.rcol[
- copyout
- copy
- ...
]

---

## Primer 1: kernel.c

```c
int main() {

	/* ... */
	#pragma acc kernels
	{
		for(i = 0; i < MATRIX_SIZE; i++)
			for(j = 0; j < MATRIX_SIZE; j++)
				randomMatrix[i * MATRIX_SIZE + j] =
				randomMatrix[i * MATRIX_SIZE + j] * 2;
	}

	return 0;
}

```

---

## Primer 2: <a target="_blank" rel="noopener noreferrer" href="/courses/hpc-z7-openACC/#table-of-contents"> ‚òõ Primeri/`ptraliasing.c`</a>

.message.is-dark[
.message-header[
Primer
]
.message-body[
```c
void assign(int *a, int *b, int size) {
	#pragma acc kernels
	{
		for (int i = 0; i < size - 1; i++)
			a[i] = b[i + 1];
	}
}
``` 
]
]

--
.message.is-info[
.message-header[
Zadatak
]
.message-body[
- **Pitanje**: Kada se koristi kernels direktiva, kompajler pronalazi delove koda koji su bezbedni za paralelizaciju, odnosno, u kojima nema zavisnosti meƒëu podacima. ≈†ta mislite, da li bi OpenACC kompajler preveo ovo u kod za paralelno izvr≈°avanje?
]
]

---

layout: false
name: pd
class: center, middle, inverse

# parallel direktiva

---
layout: true
.section[[parallel direktiva](#sadrzaj)]

---

## parallel direktiva

- Oznaƒçava deo koda koji ƒáe biti preveden za izvr≈°avanje na akceleratoru. 
Kompajler odreƒëuje **kako** ƒáe segment koda biti paralelizovan. 
Podrazumevano izvr≈°avanje kreƒáe u `gang-redundant` re≈æimu.
```C
#pragma acc parallel [clause-list] new-line
structured block
```
Neke od klauzula (parametri nisu navedeni):

.lcol[

- async
- wait
- num_gangs
- num_workers
- vector_length
]

.rcol[
- reduction
- copy
- copyin
- copyout
- ...
]

---

## Primer 3: <a target="_blank" rel="noopener noreferrer" href="/courses/hpc-z7-openACC/#table-of-contents"> ‚òõ Primeri/`parallel.c`</a>

.message.is-dark[
.message-header[
Primer
]
.message-body[
```c
#include <openacc.h>

int main() {
	float *values = (float *) malloc(sizeof(float) * size);

	#pragma acc parallel
	for (int i = 0; i < 1024; i++)
		values[i] = 1.f;
	free(values);

	return 0;
}
```
]
]

--
.message.is-info[
.message-header[
Zadatak
]
.message-body[
- **Pitanje**: Koliko puta ƒáe svakom polju value niza biti dodeljena vrednost?
]
]

---

## parallel klauzule

- `async` - Nit koja je nai≈°la na parallel ili kernels direktivu (lokalna nit) mo≈æe da nastavi izvr≈°avanje koda koji sledi iza paralelnog regiona bez ƒçekanja da ureƒëaj zavr≈°i svoj posao.
- `wait` - Kada naiƒëe na ovu klauzulu, lokalna nit ƒçeka.
- `num_gangs(int-exp)` - Broj `gang`-ova koji izvr≈°avaju paralelni region.
- `num_workers(int-exp)` - Broj radnika unutar `gang`-a.
- `vector_length(int-exp)` - Du≈æina vektora koja se koristi za SIMD operacije.
- `reduction(op:var-list)` - Pravi lokalnu kopiju promenljive i inicijalizuje je. Na kraju paralelnog regiona se lokalne kopije redukuju.
- `copy, copyin, copyout`

---

layout: false
name: ld
class: center, middle, inverse

# loop direktiva

---
layout: true
.section[[loop direktiva](#sadrzaj)]

---

## loop direktiva

- Daje kompajleru dodatne informacije o tome kako da paralelizuje petlju na koju se odnosi direktiva. Mo≈æe biti unutar `parallel` ili `kernels` direktiva.

```c
  #pragma acc loop [clause-list] new-line
    for loop
```
- Kombinovane konstrukcije:

```c
  #pragma acc parallel loop [clause-list] new-line
    for loop
```

```c
  #pragma acc kernels loop [clause-list] new-line
    for loop
```

---

## loop klauzule
- Klauzule za optimizaciju izvr≈°avanja:
	- `gang` - Particioni≈°e iteracije izmeƒëu `gang`-ova. Prevodi izvr≈°avanje iz `gang-redundant` u `gang-partitioned` re≈æim. U sluƒçaju ugnje≈ædenih petlji, spoljna mora biti `gang` petlja.
	- `worker` - Patricioni≈°e iteracije izmeƒëu `worker`-a. Prevodi izvr≈°avanje iz `worker-single` u `worker-partitioned` re≈æim. U sluƒçaju ugnje≈ædenih petlji, bilo koja unutra≈°nja petlja, osim one najugnje≈ædenije, mo≈æe biti `worker` petlja.
	- `vector` - Vektorizacija petlje (SIMD ili SIMT ). U sluƒçaju ugnje≈ædenih petlji, najugnje≈ædenija je vector petlja.
	- `seq` - Petlja ƒáe se izvr≈°iti sekvencijalno bez obzira na potencijalne optimizacije koje je kompajler prona≈°ao. U suƒçaju ugnje≈ædenih petlji, mo≈æe biti na bilo kom nivou. 
- *Optimizacijom petlji se gubi na portabilnosti programa.*

---

##loop klauzule

- Ostale klauzule:
	- private
	- reduction
	- independent - Signalizira kompajleru da nema zavisnosti podataka izmeƒëu iteracija petlje.
	- ...

---

## Primer 4: <a target="_blank" rel="noopener noreferrer" href="/courses/hpc-z7-openACC/#table-of-contents"> ‚òõ Primeri/`parallelloop.c`</a>

```c
int main() {

	/* ... */

	#pragma acc parallel loop gang
	for (int i=0; i<N; i++)
		#pragma acc loop vector
		for (int j=0; j<M; j++)
			A[i * N + j] = 1.f;

	return 0;
}
```

---
layout: false
name: model
class: center, middle, inverse

# Model

---
layout: true
.section[[Model](#sadrzaj)]

---

## Model podataka i utican na na performanse

.lcol[

![:scale 95%](img/modelAcc.png)
]

.rcol[

![](img/modelAcc2.png)

]
<br><br><br><br><br><br><br><br><br><br><br>

- Optimizacija kernela bez optimizacije prenosa podataka obiƒçno ne vodi pobolj≈°anju performansi izvr≈°avanja programa!

.footer.medium[
	Izvor: [OpenACC Programming and Best Practices Guide](https://www.openacc.org/sites/default/files/inline-files/OpenACC_Programming_Guide_0.pdf)
] 

---

## Upravljanje podacima

- Prenos podataka izmeƒëu domaƒáina i ureƒëaja je moguƒáe kontrolisati na vi≈°e naƒçina:
	- Bez bilo kakvog specificiranja pona≈°anja, kompajler ƒáe sam odrediti kada i koje podatke treba preneti sa domaƒáina na ureƒëaj ili obrnuto.
	- Modifikovanjem pona≈°anja `parallel` i `kernels` odgovarajuƒáim klauzulama za rad sa podacima (npr. `copy, copyin, copyout`...). Modifikacije va≈æe za paralelni region nad kojim su primenjene klauzule za modfikaciju.
	- Kori≈°ƒáenjem `data` direktive.
	- Kori≈°ƒáenjem `data enter` i `data exit` direktiva (uglavnom za objektno programiranje).

---

layout: false
name: dd
class: center, middle, inverse

# data direktiva

---
layout: true
.section[[data direktiva](#sadrzaj)]

---

## data direktiva

- Defini≈°e blok koda u kojem se klauzulama kontroli≈°e prenos podataka na relaciji domaƒáin ureƒëaj.
```c
#pragma acc data [clause-list] new-line
structured block
```
	- copy
	- copyin
	- copyout
	- create
	- present

---

## Primer 5: <a target="_blank" rel="noopener noreferrer" href="/courses/hpc-z7-openACC/#table-of-contents"> ‚òõ Primeri/`data.c`</a>

```c
int main() {
	/* ... */
	#pragma acc data
	{
		#pragma acc parallel loop
		for (int i=0; i<N; i++) {
			y[i] = 0.0f;
			x[i] = (float)(i+1);
		}
		#pragma acc parallel loop
		for (int i=0; i<N; i++) {
			y[i] = 2.0f * x[i] + y[i];
		}
	}
	/* ... */
}
```

---

## Klauzule
- `copy(var-list)` - Alocira prostor za promenljive na ureƒëaju, kopira vrednosti sa domaƒáina na ureƒëaj i sa ureƒëaja nazad na domaƒáina kada se zavr≈°i blok podataka (ili `parallel` i `kernels` blok ako klauzula stoji uz njih)
- `copyin(var-list)` - Alocira prostor za promenljive na ureƒëaju i kopira vrednosti sa domaƒáina na ureƒëaj. Po zavr≈°etku bloka ne prenosi vrednosti nazad na domaƒáina.
- `copyout(var-list)` - Alocira prostor za promenljive na ureƒëaju bez inicijalizacije podacima sa domaƒáina. Po zavr≈°etku bloka, podaci se prenose sa ureƒëaja na domaƒáina.
- `create(var-list)` - Alocira prostor za promenljive na ureƒëaju bez inicijalizacije. Vrednosti promenljivih se na kraju bloka ne prebacuju na domaƒáina.
- `present(var-list)` - Oznaƒçava da su promenljive prisutne u memoriji ureƒëaja.

---

## OpenACC promenljive okru≈æenja

- GNU GCC kompajler:
	- `ACC_DEVICE_TYPE` (standard)
	- `ACC_DEVICE_NUM` (standard)
	- `ACC_PROF` (standard)
	- `GOPMP_OPENACC_DIM` (gcc)
	- `GOMP_DEBUG` (gcc)

---

layout: false
name: zad
class: center, middle, inverse

# Zadaci

---
layout: true
.section[[Zadaci](#sadrzaj)]

---

## Zadatak 1: Raƒçunanje broja œÄ

.message.is-info[
.message-header[
Zadatak
]
.message-body[
- Modifikovati dati sekvencijalni program za raƒçunanje vrednosti broja œÄ kori≈°ƒáenjem OpenACC direktiva. Koristiti NVIDIA grafiƒçku karticu kao akcelerator (GNU GCC trenutno ne podr≈æava Radeon kartice). 
- Meriti izvr≈°avanje sekvencijalnog i implementiranog ubrzanog programa.
]
]

--
.message.is-warning[
.message-header[
Info
]
.message-body[
- **Napomena**: Zadatak svakako implementirati i u sluƒçaju da na raƒçunaru nemate dostupnu NVIDIA grafiƒçku karticu.
]
]

---

## Zadatak 2: Raƒçunanje Jakobijana

.message.is-info[
.message-header[
Zadatak
]
.message-body[
- Modifikovati dati sekvencijalni program za raƒçunanje Jakobijana.
- Osnovnu verziju programa u C++ programskom jeziku skinuti sa
- Githab naloga OpenACCUserGroup.Koristiti NVIDIA grafiƒçku karticu kao akcelerator (GNU GCC trenutno ne podr≈æava Radeon kartice). 
- Meriti izvr≈°avanje sekvencijalnog i implementiranog ubrzanog programa.
]
]

--
.message.is-warning[
.message-header[
Info
]
.message-body[
- **Napomena**: Zadatak svakako implementirati i u sluƒçaju da na raƒçunaru nemate dostupnu NVIDIA grafiƒçku karticu.
]
]

---

## Saveti za inkrementalno portovanje sekvencijalnog u OpenACC kod

1. Identifikovati paralelizam petlji. Paralelizovati deo po deo sekvencijalnog koda pri tom kontroli≈°uƒái korektnost izvr≈°avanja programa. Nastaviti sa ovim tipom optimizacije bez obzira na to da li se vreme izvr≈°avanja poveƒáava.

2. Optimizovati prenos podataka. Preklopiti prenos podataka sa raƒçunanjem, ukloniti nepotrebna kopiranja, a≈æuriranja promenljivih, itd...

3. Paralelizovane petlje optimizovati za ciljnu arhitekturu kori≈°ƒáenjem klauzula.

.footer.medium[
Izvor: [OpenACC Programming and Best Practices Guide](https://www.openacc.org/sites/default/files/inline-files/OpenACC_Programming_Guide_0.pdf)
]

---

layout: false
name: cuda
class: center, middle, inverse

# OpenACC i CUDA

---
layout: true
.section[[OpenACC i CUDA](#sadrzaj)]

---
## CUDA ponavljanje

- `CUDA` (eng. *Compute Unified Device Architecture*) - platrofma za paralelno programiranje na NVIDIA grafiƒçkim karticama.
- Mapiranje OpenACC na CUDA termine:

|            **OpenACC**           |           **CUDA**          |
|:--------------------------------:|:---------------------------:|
|       Domaƒáin (eng. *Host*)      |    Domaƒáin (eng. *Host*)    |
| Akcelerator (eng. *Accelerator*) |    Ureƒëaj (eng. *Device*)   |
|   Paralelni ili raƒçunski region  | Jedan ili vi≈°e CUDA kernela |

- U OpenACC kod je na vi≈°em nivou abstrakcije u odnosu na CUDA kod i mo≈æe se prevesti za izvr≈°avanje na GPU.

---

## Arhitektura CUDA grafiƒçke kartice

- Streaming Multiprocessors (SM) & Kuda jezgra
- Veliki broj hardverskih niti ƒçini grafiƒçke kartice pogodnim za probleme za izra≈æenim SIMD paralelizmom.

.lcol[

![:scale 75%](img/cudaM.png)
]

.rcol[

![:scale 65%](img/cuda.jpg)
]

---

## Memorijska hijerarhija CUDA grafiƒçke kartice

![:scale 55%](img/cudaMH.png)

- **Globalna memorija, L2 ke≈°** - mogu da joj pristupe svi SM.
- **Deljena memorija, L1 ke≈°** - mogu joj pristupiti sva jezgra unutar jednog SM.
- **Registri** - pristup na nivou jezgra.
- Konstantna memorija, memorija tekstura

---

## CUDA model izvr≈°avanja

.lcol[

![:scale 85%](img/cudaMI.png)

]

.rcol[

- Nit
- Blok niti (eng. *thread block*) sadr≈æi jednu ili vi≈°e niti
- Osnova (eng. *warp*) - sadr≈æi jednu ili vi≈°e niti iz istog bloka, blok je podeljen na jednu ili vi≈°e osnova
- Mre≈æa niti (eng. *grid*) sadr≈æi jedan ili vi≈°e blokova niti

]

---

## OpenACC CUDA mapiranja

.center[

| **CUDA logiƒçki** | **OpenACC logiƒçki** | **CUDA fiziƒçki nivo** |
|:----------------:|:-------------------:|:---------------------:|
|    Mre≈æa niti    |    vi≈°e gang -ova   |   svi SM na kartici   |
|     Blok niti    |         gang        |           SM          |
|       warp       |        worker       |           SM          |
|     CUDA nit     |        vector       |      CUDA jezgro      |

]

- Mapiranje pojmova CUDA modela izvr≈°avanja (prva kolona) na OpenACC model izvr≈°avanja (druga kolona) i na fiziƒçke komponente GPU koja podr≈æava CUDA tehnologiju.

---

## Tehnike za ubrzavanje CUDA programa

- Preporuke za ubrzanje izvr≈°avanja CUDA programa:
	- Ukoliko je moguƒáe, CUDA niti treba da pristupaju uzastopnim lokacijama globalne memorije (eng. *coalesced access*).
	- Izbeƒái divergenciju izvr≈°avanja niti unutar jedne osnove.
	- Podatke koji se ƒçesto koriste prebaciti u br≈æu memoriju u odnosu na globalnu (`cache direktiva`).
	- Optimizovati prenos podataka u/iz globalne memorije grafiƒçke kartice (`data direktiva`).
	- ... 

--

.message.is-warning[
.message-header[
Info
]
.message-body[
- **Preporuƒçeno ƒçitanje**: Programming Massively Parallel Processors: A Hands-on Approach, David B. Kirk and Wen-mei W. Hwu, poglavlje 6 Performance Considerations
]
]

---

## Primer 6: <a target="_blank" rel="noopener noreferrer" href="/courses/hpc-z7-openACC/#table-of-contents"> ‚òõ Primeri/`matrixop.c`</a>

```c
int main(int argc, char *argv[]) {
	int *randomMatrix =
	(int *) calloc(MSIZE * MSIZE * sizeof(int));

	#pragma acc kernels
	{
		for(i = 0; i < MSIZE; i++) {
			for(j = 0; j < MSIZE; j++) {
				randomMatrix[j * MSIZE + i] =
				randomMatrix[j * MSIZE + i] + 2;
			}
		}
	}
}
```

---

## Primer 7: <br><a target="_blank" rel="noopener noreferrer" href="/courses/hpc-z7-openACC/#table-of-contents"> ‚òõ Primeri/`matrixop-coalesced.c`</a>

```c
int main(int argc, char *argv[]) {
	int *randomMatrix =
	(int *) calloc(MSIZE * MSIZE * sizeof(int));

	#pragma acc kernels
	{
		for(int i = 0; i < MSIZE; i++) {
			for(int j = 0; j < MSIZE; j++) {
				randomMatrix[i * MSIZE + j] =
				randomMatrix[i * MSIZE + j] + 2;
			}
		}
	}
}
```

---

## Pristup elementima matrice

- Pristup lokacijama koje nisu uzastopne

![:scale 65%](img/m1.png)

- Pristup uzastopnim lokacijama

![:scale 65%](img/m2.png)

.attention[
**Pretpostavka**: Svaki element matrice obraƒëuje jedna CUDA nit.
]

---

## matrixop.c Visual Profiler

![:scale 75%](img/vp.png)
---

## matrixop-coalesced.c Visual Profiler

![:scale 75%](img/vp2.png)

---

## Divergencija pri izvr≈°avanju niti

- Ukoliko razliƒçite niti unutar iste osnove imaju razliƒçite tragove izvr≈°avanja, izvr≈°avanje grupa niti sa razliƒçitim tragovima unutar osnove se sekvencijalizuje.
- Do divergencije u izvr≈°avanju mogu dovesti naredbe za kontrolu toka izvr≈°avanja `if-else, switch, do, for, while`.

--

.message.is-warning[
.message-header[
Info
]
.message-body[
- **Videti**: CUDA C Best Practices Guide - Branching and Divergence.
]
]

---

## Neki radovi na temu OpenACC, CUDA i OpenCL

- [A Comprehensive Performance Comparison of CUDA and OpenCL](https://ieeexplore.ieee.org/document/6047190)
- [CUDA vs OpenACC: Performance Case Studies with Kernel Benchmarks and a Memory-Bound CFD Application](https://ieeexplore.ieee.org/document/6546071)
- [An in-depth evaluation of GCC‚Äôs OpenACC implementation on Cray systems](https://cug.org/proceedings/cug2017_proceedings/includes/files/pap174s2-file1.pdf)
- [OpenACC cache Directive: Opportunities and Optimizations](https://ieeexplore.ieee.org/document/7836580)

---

## Zadatak 3: Mno≈æenje matrica

.message.is-info[
.message-header[
Zadatak
]
.message-body[
- Implementirati OpenACC C program za mno≈æenje dve kvadratne matrice. 
- Kao ulazne matrice koristiti matrice u hdf5 formatu sa prethodnih ve≈æbi.
]
]

--
.message.is-warning[
.message-header[
Info
]
.message-body[
- **Napomene**:
- Saƒçuvati rezultat mno≈æenja matrica 3x3 ili rezultat ispisati na konzolu.
- Meriti vreme izvr≈°avanja programa i ispisati ga na standardni izlaz (za primer merenja pogledati matrixop.c datoteku u primerima).
- Opciono uporediti vremena izvr≈°avanja implementiranog OpenACC re≈°enja prevedenog za izvr≈°avanje na GPU sa ekvivalentnim CUDA re≈°enjima (direktorijum Samples u CudaToolkit-u ima implementiran primer mno≈æenja dve matrice bez i sa kori≈°ƒáenjem optimizovane cublas biblioteke (direktorijumi cudaMatMul i cudaMatMulCUBLAS).
]
]

---

## Zadatak 3: Mno≈æenje matrica - kompajliranje i pokretanje zadatka

.message.is-warning[
.message-header[
Info
]
.message-body[
- **GNU GCC 7**
- Za prevoƒëenje OpenACC koda za izvr≈°avanje na domaƒáinu:
```console
gcc -fopenacc <izvorna_datoteka>
```
- Za prevoƒëenje OpenACC koda za izvr≈°avanje na NVIDIA GPU:
```console
gcc -fopenacc -foffload=nvptx-none <izvorna_datoteka>
```
- Da bi ovo radilo, neophodno je prvo instalirati paket
`gcc-7-offload-nvptx` *iz repzitorijuma*.

- Pokretanje programa: `./<izvrsna_datoteka>`
- Svi programi koji se izvr≈°avaju na NVIDIA GPU kartici se mogu pratiti pozivom alata `nvidia-smi -l 1`, ≈°to ƒáe osve≈æavati listu procesa koji koriste GPU na svaku sekundu.
]
]

---

## Zadatak 3: Mno≈æenje matrica - kompajliranje i pokretanje zadatka

.message.is-warning[
.message-header[
Info
]
.message-body[
- **PGCC 18.10**
- Za prevoƒëenje OpenACC koda za izvr≈°avanje na domaƒáinu:
```console
pgcc -acc -ta=host <izvorna_datoteka>
```
- Za prevoƒëenje OpenACC koda za izvr≈°avanje na NVIDIA GPU:
```console
pgcc -acc -ta=tesla -Minfo <izvorna_datoteka>.
```
- Pokretanje programa: `./<izvrsna_datoteka>`

- Svi programi koji se izvr≈°avaju na NVIDIA GPU kartici se mogu pratiti pozivom alata nvidia-smi -l 1, ≈°to ƒáe osve≈æavati listu procesa koji koriste GPU na svaku sekundu.
]
]

---
## Literatura

- Tekstualni materijali:
	- [OpenACC Programming and Best Practices Guide](https://www.openacc.org/sites/default/files/inline-files/OpenACC_Programming_Guide_0.pdf)
	- [OpenACC Specification 2.5](https://www.openacc.org/sites/default/files/inline-files/OpenACC_2pt5.pdf)
	- [GNU GCC OpenACC Wiki](https://gcc.gnu.org/wiki/OpenACC)
	- David B. Kirk, Wen-mei W. Hwu, Programming Massively Parallel Processors, A Hands on Approach, 2nd edition, 2012
	- [Advanced OpenACC](http://videolectures.net/site/normal_dl/tag=1058329/ihpcss2016_urbanic_advanced_openACC_01.pdf)
- Video tutorijali:
	- [Introduction to Parallel Programming with OpenACC](https://www.youtube.com/playlist?list=PLx_s9Cz7_T429SF7gBGJ51iiZoEWYVvkq)
	- [Advanced OpenACC](http://videolectures.net/ihpcss2016_urbanic_advanced_openACC/)

--

class: center, middle, theend, hide-text
layout: false
background-image: url(../theend.gif)

</textarea> <script src="https://remarkjs.com/downloads/remark-latest.min.js"></script> <script>remark.macros.scale=function(percentage){var url=this;return'<div class="center"><img src="' +url+'" style="width: '+percentage+'" /></div>';};var slideshow=remark.create({highlightLanguage:'python',highlightStyle:'monokai',highlightLines:true,countIncrementalSlides:false,navigation:{scroll:false,}});</script> <script src="https://cdnjs.cloudflare.com/ajax/libs/mermaid/8.0.0/mermaid.min.js"></script> <script>mermaid.initialize({startOnLoad:true});</script></body></html>